{"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/wallet.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/wallet.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}},"2":{"start":{"line":8,"column":18},"end":{"line":8,"column":41}},"3":{"start":{"line":10,"column":18},"end":{"line":10,"column":75}},"4":{"start":{"line":12,"column":22},"end":{"line":12,"column":83}},"5":{"start":{"line":14,"column":26},"end":{"line":14,"column":67}},"6":{"start":{"line":16,"column":19},"end":{"line":16,"column":77}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":39}},"8":{"start":{"line":20,"column":13},"end":{"line":20,"column":31}},"9":{"start":{"line":22,"column":19},"end":{"line":22,"column":50}},"10":{"start":{"line":24,"column":16},"end":{"line":24,"column":37}},"11":{"start":{"line":26,"column":24},"end":{"line":26,"column":86}},"12":{"start":{"line":28,"column":39},"end":{"line":28,"column":95}},"13":{"start":{"line":30,"column":24},"end":{"line":30,"column":328}},"14":{"start":{"line":30,"column":99},"end":{"line":30,"column":154}},"15":{"start":{"line":30,"column":133},"end":{"line":30,"column":151}},"16":{"start":{"line":30,"column":164},"end":{"line":30,"column":326}},"17":{"start":{"line":30,"column":198},"end":{"line":30,"column":323}},"18":{"start":{"line":30,"column":329},"end":{"line":30,"column":349}},"19":{"start":{"line":32,"column":77},"end":{"line":32,"column":175}},"20":{"start":{"line":32,"column":94},"end":{"line":32,"column":107}},"21":{"start":{"line":32,"column":121},"end":{"line":32,"column":131}},"22":{"start":{"line":32,"column":151},"end":{"line":32,"column":165}},"23":{"start":{"line":32,"column":166},"end":{"line":32,"column":173}},"24":{"start":{"line":32,"column":176},"end":{"line":32,"column":263}},"25":{"start":{"line":32,"column":193},"end":{"line":32,"column":208}},"26":{"start":{"line":32,"column":218},"end":{"line":32,"column":261}},"27":{"start":{"line":34,"column":33},"end":{"line":34,"column":387}},"28":{"start":{"line":34,"column":65},"end":{"line":34,"column":69}},"29":{"start":{"line":34,"column":78},"end":{"line":34,"column":87}},"30":{"start":{"line":34,"column":89},"end":{"line":34,"column":384}},"31":{"start":{"line":34,"column":147},"end":{"line":34,"column":167}},"32":{"start":{"line":34,"column":193},"end":{"line":34,"column":264}},"33":{"start":{"line":34,"column":290},"end":{"line":34,"column":360}},"34":{"start":{"line":34,"column":363},"end":{"line":34,"column":380}},"35":{"start":{"line":36,"column":54},"end":{"line":36,"column":73}},"36":{"start":{"line":36,"column":75},"end":{"line":36,"column":326}},"37":{"start":{"line":36,"column":125},"end":{"line":36,"column":161}},"38":{"start":{"line":36,"column":163},"end":{"line":36,"column":292}},"39":{"start":{"line":36,"column":183},"end":{"line":36,"column":292}},"40":{"start":{"line":36,"column":225},"end":{"line":36,"column":288}},"41":{"start":{"line":36,"column":293},"end":{"line":36,"column":324}},"42":{"start":{"line":36,"column":327},"end":{"line":36,"column":339}},"43":{"start":{"line":38,"column":33},"end":{"line":38,"column":517}},"44":{"start":{"line":38,"column":46},"end":{"line":38,"column":47}},"45":{"start":{"line":38,"column":91},"end":{"line":38,"column":131}},"46":{"start":{"line":38,"column":133},"end":{"line":38,"column":515}},"47":{"start":{"line":38,"column":146},"end":{"line":38,"column":247}},"48":{"start":{"line":38,"column":201},"end":{"line":38,"column":243}},"49":{"start":{"line":38,"column":255},"end":{"line":38,"column":515}},"50":{"start":{"line":38,"column":295},"end":{"line":38,"column":369}},"51":{"start":{"line":38,"column":379},"end":{"line":38,"column":513}},"52":{"start":{"line":38,"column":428},"end":{"line":38,"column":509}},"53":{"start":{"line":38,"column":518},"end":{"line":38,"column":532}},"54":{"start":{"line":40,"column":50},"end":{"line":40,"column":151}},"55":{"start":{"line":40,"column":92},"end":{"line":40,"column":149}},"56":{"start":{"line":42,"column":44},"end":{"line":42,"column":315}},"57":{"start":{"line":42,"column":57},"end":{"line":42,"column":58}},"58":{"start":{"line":42,"column":102},"end":{"line":42,"column":110}},"59":{"start":{"line":42,"column":112},"end":{"line":42,"column":167}},"60":{"start":{"line":42,"column":168},"end":{"line":42,"column":199}},"61":{"start":{"line":42,"column":200},"end":{"line":42,"column":254}},"62":{"start":{"line":42,"column":227},"end":{"line":42,"column":254}},"63":{"start":{"line":42,"column":255},"end":{"line":42,"column":313}},"64":{"start":{"line":44,"column":62},"end":{"line":44,"column":131}},"65":{"start":{"line":44,"column":78},"end":{"line":44,"column":131}},"66":{"start":{"line":44,"column":132},"end":{"line":44,"column":193}},"67":{"start":{"line":44,"column":149},"end":{"line":44,"column":193}},"68":{"start":{"line":44,"column":194},"end":{"line":44,"column":213}},"69":{"start":{"line":46,"column":50},"end":{"line":46,"column":138}},"70":{"start":{"line":46,"column":124},"end":{"line":46,"column":136}},"71":{"start":{"line":46,"column":139},"end":{"line":46,"column":175}},"72":{"start":{"line":48,"column":30},"end":{"line":48,"column":176}},"73":{"start":{"line":48,"column":126},"end":{"line":48,"column":173}},"74":{"start":{"line":48,"column":177},"end":{"line":48,"column":203}},"75":{"start":{"line":50,"column":40},"end":{"line":50,"column":151}},"76":{"start":{"line":50,"column":63},"end":{"line":50,"column":149}},"77":{"start":{"line":50,"column":152},"end":{"line":50,"column":164}},"78":{"start":{"line":52,"column":43},"end":{"line":52,"column":182}},"79":{"start":{"line":52,"column":106},"end":{"line":52,"column":180}},"80":{"start":{"line":52,"column":183},"end":{"line":52,"column":328}},"81":{"start":{"line":52,"column":329},"end":{"line":52,"column":383}},"82":{"start":{"line":52,"column":345},"end":{"line":52,"column":383}},"83":{"start":{"line":54,"column":33},"end":{"line":54,"column":138}},"84":{"start":{"line":54,"column":109},"end":{"line":54,"column":125}},"85":{"start":{"line":54,"column":126},"end":{"line":54,"column":135}},"86":{"start":{"line":54,"column":139},"end":{"line":54,"column":168}},"87":{"start":{"line":56,"column":44},"end":{"line":56,"column":195}},"88":{"start":{"line":56,"column":62},"end":{"line":56,"column":166}},"89":{"start":{"line":56,"column":176},"end":{"line":56,"column":193}},"90":{"start":{"line":56,"column":196},"end":{"line":56,"column":207}},"91":{"start":{"line":58,"column":17},"end":{"line":58,"column":18}},"92":{"start":{"line":65,"column":0},"end":{"line":405,"column":33}},"93":{"start":{"line":66,"column":2},"end":{"line":66,"column":41}},"94":{"start":{"line":71,"column":4},"end":{"line":71,"column":34}},"95":{"start":{"line":73,"column":4},"end":{"line":73,"column":81}},"96":{"start":{"line":75,"column":4},"end":{"line":75,"column":94}},"97":{"start":{"line":77,"column":4},"end":{"line":77,"column":89}},"98":{"start":{"line":79,"column":4},"end":{"line":79,"column":73}},"99":{"start":{"line":81,"column":4},"end":{"line":81,"column":81}},"100":{"start":{"line":83,"column":4},"end":{"line":83,"column":77}},"101":{"start":{"line":85,"column":4},"end":{"line":85,"column":74}},"102":{"start":{"line":87,"column":4},"end":{"line":91,"column":7}},"103":{"start":{"line":93,"column":4},"end":{"line":93,"column":72}},"104":{"start":{"line":95,"column":4},"end":{"line":95,"column":71}},"105":{"start":{"line":97,"column":4},"end":{"line":97,"column":73}},"106":{"start":{"line":99,"column":4},"end":{"line":99,"column":75}},"107":{"start":{"line":101,"column":4},"end":{"line":101,"column":69}},"108":{"start":{"line":103,"column":4},"end":{"line":103,"column":81}},"109":{"start":{"line":104,"column":4},"end":{"line":104,"column":105}},"110":{"start":{"line":105,"column":4},"end":{"line":105,"column":89}},"111":{"start":{"line":106,"column":4},"end":{"line":106,"column":83}},"112":{"start":{"line":107,"column":4},"end":{"line":107,"column":63}},"113":{"start":{"line":108,"column":4},"end":{"line":108,"column":17}},"114":{"start":{"line":117,"column":2},"end":{"line":402,"column":6}},"115":{"start":{"line":121,"column":6},"end":{"line":121,"column":37}},"116":{"start":{"line":132,"column":6},"end":{"line":134,"column":7}},"117":{"start":{"line":133,"column":8},"end":{"line":133,"column":72}},"118":{"start":{"line":136,"column":6},"end":{"line":138,"column":7}},"119":{"start":{"line":137,"column":8},"end":{"line":137,"column":91}},"120":{"start":{"line":140,"column":6},"end":{"line":140,"column":62}},"121":{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},"122":{"start":{"line":143,"column":8},"end":{"line":143,"column":50}},"123":{"start":{"line":154,"column":6},"end":{"line":156,"column":7}},"124":{"start":{"line":155,"column":8},"end":{"line":155,"column":110}},"125":{"start":{"line":158,"column":6},"end":{"line":158,"column":36}},"126":{"start":{"line":168,"column":6},"end":{"line":168,"column":32}},"127":{"start":{"line":179,"column":6},"end":{"line":181,"column":7}},"128":{"start":{"line":180,"column":8},"end":{"line":180,"column":38}},"129":{"start":{"line":183,"column":6},"end":{"line":185,"column":7}},"130":{"start":{"line":184,"column":8},"end":{"line":184,"column":81}},"131":{"start":{"line":187,"column":24},"end":{"line":187,"column":54}},"132":{"start":{"line":190,"column":6},"end":{"line":203,"column":7}},"133":{"start":{"line":191,"column":23},"end":{"line":191,"column":43}},"134":{"start":{"line":193,"column":8},"end":{"line":197,"column":9}},"135":{"start":{"line":194,"column":10},"end":{"line":196,"column":13}},"136":{"start":{"line":199,"column":8},"end":{"line":199,"column":55}},"137":{"start":{"line":200,"column":8},"end":{"line":200,"column":42}},"138":{"start":{"line":202,"column":8},"end":{"line":202,"column":43}},"139":{"start":{"line":205,"column":6},"end":{"line":207,"column":7}},"140":{"start":{"line":206,"column":8},"end":{"line":206,"column":50}},"141":{"start":{"line":209,"column":6},"end":{"line":209,"column":20}},"142":{"start":{"line":222,"column":32},"end":{"line":227,"column":8}},"143":{"start":{"line":223,"column":8},"end":{"line":223,"column":88}},"144":{"start":{"line":223,"column":27},"end":{"line":223,"column":88}},"145":{"start":{"line":224,"column":25},"end":{"line":224,"column":91}},"146":{"start":{"line":225,"column":23},"end":{"line":225,"column":81}},"147":{"start":{"line":226,"column":8},"end":{"line":226,"column":24}},"148":{"start":{"line":230,"column":8},"end":{"line":230,"column":58}},"149":{"start":{"line":233,"column":6},"end":{"line":233,"column":32}},"150":{"start":{"line":245,"column":29},"end":{"line":255,"column":8}},"151":{"start":{"line":248,"column":8},"end":{"line":252,"column":9}},"152":{"start":{"line":249,"column":10},"end":{"line":249,"column":42}},"153":{"start":{"line":251,"column":10},"end":{"line":251,"column":82}},"154":{"start":{"line":254,"column":8},"end":{"line":254,"column":74}},"155":{"start":{"line":258,"column":8},"end":{"line":258,"column":55}},"156":{"start":{"line":261,"column":6},"end":{"line":261,"column":29}},"157":{"start":{"line":271,"column":6},"end":{"line":271,"column":102}},"158":{"start":{"line":281,"column":6},"end":{"line":285,"column":7}},"159":{"start":{"line":282,"column":8},"end":{"line":282,"column":68}},"160":{"start":{"line":284,"column":8},"end":{"line":284,"column":40}},"161":{"start":{"line":287,"column":6},"end":{"line":287,"column":34}},"162":{"start":{"line":297,"column":6},"end":{"line":301,"column":7}},"163":{"start":{"line":298,"column":8},"end":{"line":298,"column":70}},"164":{"start":{"line":300,"column":8},"end":{"line":300,"column":41}},"165":{"start":{"line":303,"column":6},"end":{"line":303,"column":35}},"166":{"start":{"line":312,"column":19},"end":{"line":315,"column":8}},"167":{"start":{"line":313,"column":8},"end":{"line":313,"column":57}},"168":{"start":{"line":314,"column":8},"end":{"line":314,"column":55}},"169":{"start":{"line":318,"column":8},"end":{"line":318,"column":45}},"170":{"start":{"line":321,"column":6},"end":{"line":321,"column":19}},"171":{"start":{"line":331,"column":20},"end":{"line":333,"column":8}},"172":{"start":{"line":332,"column":8},"end":{"line":332,"column":50}},"173":{"start":{"line":336,"column":8},"end":{"line":336,"column":46}},"174":{"start":{"line":339,"column":6},"end":{"line":339,"column":20}},"175":{"start":{"line":349,"column":6},"end":{"line":349,"column":94}},"176":{"start":{"line":358,"column":6},"end":{"line":358,"column":39}},"177":{"start":{"line":367,"column":6},"end":{"line":367,"column":29}},"178":{"start":{"line":376,"column":27},"end":{"line":384,"column":8}},"179":{"start":{"line":377,"column":8},"end":{"line":377,"column":50}},"180":{"start":{"line":378,"column":8},"end":{"line":378,"column":42}},"181":{"start":{"line":380,"column":8},"end":{"line":383,"column":9}},"182":{"start":{"line":381,"column":10},"end":{"line":381,"column":64}},"183":{"start":{"line":382,"column":10},"end":{"line":382,"column":60}},"184":{"start":{"line":387,"column":8},"end":{"line":387,"column":53}},"185":{"start":{"line":390,"column":6},"end":{"line":390,"column":27}},"186":{"start":{"line":395,"column":6},"end":{"line":395,"column":64}},"187":{"start":{"line":400,"column":6},"end":{"line":400,"column":38}},"188":{"start":{"line":404,"column":2},"end":{"line":404,"column":16}},"189":{"start":{"line":407,"column":0},"end":{"line":407,"column":24}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":31}},"loc":{"start":{"line":28,"column":37},"end":{"line":28,"column":97}},"line":28},"1":{"name":"_typeof","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":16}},"loc":{"start":{"line":30,"column":22},"end":{"line":30,"column":351}},"line":30},"2":{"name":"_typeof","decl":{"start":{"line":30,"column":118},"end":{"line":30,"column":125}},"loc":{"start":{"line":30,"column":131},"end":{"line":30,"column":153}},"line":30},"3":{"name":"_typeof","decl":{"start":{"line":30,"column":183},"end":{"line":30,"column":190}},"loc":{"start":{"line":30,"column":196},"end":{"line":30,"column":325}},"line":30},"4":{"name":"asyncGeneratorStep","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":27}},"loc":{"start":{"line":32,"column":75},"end":{"line":32,"column":265}},"line":32},"5":{"name":"_asyncToGenerator","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":26}},"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":389}},"line":34},"6":{"name":"(anonymous_6)","decl":{"start":{"line":34,"column":40},"end":{"line":34,"column":41}},"loc":{"start":{"line":34,"column":52},"end":{"line":34,"column":386}},"line":34},"7":{"name":"(anonymous_7)","decl":{"start":{"line":34,"column":108},"end":{"line":34,"column":109}},"loc":{"start":{"line":34,"column":135},"end":{"line":34,"column":382}},"line":34},"8":{"name":"_next","decl":{"start":{"line":34,"column":178},"end":{"line":34,"column":183}},"loc":{"start":{"line":34,"column":191},"end":{"line":34,"column":266}},"line":34},"9":{"name":"_throw","decl":{"start":{"line":34,"column":276},"end":{"line":34,"column":282}},"loc":{"start":{"line":34,"column":288},"end":{"line":34,"column":362}},"line":34},"10":{"name":"ownKeys","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":16}},"loc":{"start":{"line":36,"column":41},"end":{"line":36,"column":341}},"line":36},"11":{"name":"(anonymous_11)","decl":{"start":{"line":36,"column":208},"end":{"line":36,"column":209}},"loc":{"start":{"line":36,"column":223},"end":{"line":36,"column":290}},"line":36},"12":{"name":"_objectSpread","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":22}},"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":534}},"line":38},"13":{"name":"(anonymous_13)","decl":{"start":{"line":38,"column":184},"end":{"line":38,"column":185}},"loc":{"start":{"line":38,"column":199},"end":{"line":38,"column":245}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":38,"column":411},"end":{"line":38,"column":412}},"loc":{"start":{"line":38,"column":426},"end":{"line":38,"column":511}},"line":38},"15":{"name":"_classCallCheck","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":24}},"loc":{"start":{"line":40,"column":48},"end":{"line":40,"column":153}},"line":40},"16":{"name":"_defineProperties","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":26}},"loc":{"start":{"line":42,"column":42},"end":{"line":42,"column":317}},"line":42},"17":{"name":"_createClass","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":21}},"loc":{"start":{"line":44,"column":60},"end":{"line":44,"column":215}},"line":44},"18":{"name":"_possibleConstructorReturn","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":35}},"loc":{"start":{"line":46,"column":48},"end":{"line":46,"column":177}},"line":46},"19":{"name":"_getPrototypeOf","decl":{"start":{"line":48,"column":9},"end":{"line":48,"column":24}},"loc":{"start":{"line":48,"column":28},"end":{"line":48,"column":205}},"line":48},"20":{"name":"_getPrototypeOf","decl":{"start":{"line":48,"column":105},"end":{"line":48,"column":120}},"loc":{"start":{"line":48,"column":124},"end":{"line":48,"column":175}},"line":48},"21":{"name":"_assertThisInitialized","decl":{"start":{"line":50,"column":9},"end":{"line":50,"column":31}},"loc":{"start":{"line":50,"column":38},"end":{"line":50,"column":166}},"line":50},"22":{"name":"_inherits","decl":{"start":{"line":52,"column":9},"end":{"line":52,"column":18}},"loc":{"start":{"line":52,"column":41},"end":{"line":52,"column":385}},"line":52},"23":{"name":"_setPrototypeOf","decl":{"start":{"line":54,"column":9},"end":{"line":54,"column":24}},"loc":{"start":{"line":54,"column":31},"end":{"line":54,"column":170}},"line":54},"24":{"name":"_setPrototypeOf","decl":{"start":{"line":54,"column":85},"end":{"line":54,"column":100}},"loc":{"start":{"line":54,"column":107},"end":{"line":54,"column":137}},"line":54},"25":{"name":"_defineProperty","decl":{"start":{"line":56,"column":9},"end":{"line":56,"column":24}},"loc":{"start":{"line":56,"column":42},"end":{"line":56,"column":209}},"line":56},"26":{"name":"(anonymous_26)","decl":{"start":{"line":65,"column":0},"end":{"line":65,"column":1}},"loc":{"start":{"line":65,"column":31},"end":{"line":405,"column":1}},"line":65},"27":{"name":"Wallet","decl":{"start":{"line":68,"column":11},"end":{"line":68,"column":17}},"loc":{"start":{"line":68,"column":26},"end":{"line":109,"column":3}},"line":68},"28":{"name":"set","decl":{"start":{"line":119,"column":20},"end":{"line":119,"column":23}},"loc":{"start":{"line":119,"column":42},"end":{"line":122,"column":5}},"line":119},"29":{"name":"useChain","decl":{"start":{"line":131,"column":20},"end":{"line":131,"column":28}},"loc":{"start":{"line":131,"column":42},"end":{"line":145,"column":5}},"line":131},"30":{"name":"setDefaultChain","decl":{"start":{"line":153,"column":20},"end":{"line":153,"column":35}},"loc":{"start":{"line":153,"column":45},"end":{"line":159,"column":5}},"line":153},"31":{"name":"setDefaultLimit","decl":{"start":{"line":167,"column":20},"end":{"line":167,"column":35}},"loc":{"start":{"line":167,"column":43},"end":{"line":169,"column":5}},"line":167},"32":{"name":"getClient","decl":{"start":{"line":178,"column":20},"end":{"line":178,"column":29}},"loc":{"start":{"line":178,"column":39},"end":{"line":210,"column":5}},"line":178},"33":{"name":"(anonymous_33)","decl":{"start":{"line":221,"column":11},"end":{"line":221,"column":12}},"loc":{"start":{"line":221,"column":23},"end":{"line":234,"column":5}},"line":221},"34":{"name":"(anonymous_34)","decl":{"start":{"line":222,"column":50},"end":{"line":222,"column":51}},"loc":{"start":{"line":222,"column":83},"end":{"line":227,"column":7}},"line":222},"35":{"name":"prepareTransaction","decl":{"start":{"line":229,"column":15},"end":{"line":229,"column":33}},"loc":{"start":{"line":229,"column":43},"end":{"line":231,"column":7}},"line":229},"36":{"name":"(anonymous_36)","decl":{"start":{"line":244,"column":11},"end":{"line":244,"column":12}},"loc":{"start":{"line":244,"column":23},"end":{"line":262,"column":5}},"line":244},"37":{"name":"(anonymous_37)","decl":{"start":{"line":245,"column":47},"end":{"line":245,"column":48}},"loc":{"start":{"line":245,"column":80},"end":{"line":255,"column":7}},"line":245},"38":{"name":"sendTransaction","decl":{"start":{"line":257,"column":15},"end":{"line":257,"column":30}},"loc":{"start":{"line":257,"column":41},"end":{"line":259,"column":7}},"line":257},"39":{"name":"useStorage","decl":{"start":{"line":270,"column":20},"end":{"line":270,"column":30}},"loc":{"start":{"line":270,"column":48},"end":{"line":272,"column":5}},"line":270},"40":{"name":"useKeyStorage","decl":{"start":{"line":280,"column":20},"end":{"line":280,"column":33}},"loc":{"start":{"line":280,"column":51},"end":{"line":288,"column":5}},"line":280},"41":{"name":"useDataStorage","decl":{"start":{"line":296,"column":20},"end":{"line":296,"column":34}},"loc":{"start":{"line":296,"column":52},"end":{"line":304,"column":5}},"line":296},"42":{"name":"(anonymous_42)","decl":{"start":{"line":311,"column":11},"end":{"line":311,"column":12}},"loc":{"start":{"line":311,"column":23},"end":{"line":322,"column":5}},"line":311},"43":{"name":"(anonymous_43)","decl":{"start":{"line":312,"column":37},"end":{"line":312,"column":38}},"loc":{"start":{"line":312,"column":50},"end":{"line":315,"column":7}},"line":312},"44":{"name":"close","decl":{"start":{"line":317,"column":15},"end":{"line":317,"column":20}},"loc":{"start":{"line":317,"column":23},"end":{"line":319,"column":7}},"line":317},"45":{"name":"(anonymous_45)","decl":{"start":{"line":330,"column":11},"end":{"line":330,"column":12}},"loc":{"start":{"line":330,"column":23},"end":{"line":340,"column":5}},"line":330},"46":{"name":"(anonymous_46)","decl":{"start":{"line":331,"column":38},"end":{"line":331,"column":39}},"loc":{"start":{"line":331,"column":61},"end":{"line":333,"column":7}},"line":331},"47":{"name":"unlock","decl":{"start":{"line":335,"column":15},"end":{"line":335,"column":21}},"loc":{"start":{"line":335,"column":27},"end":{"line":337,"column":7}},"line":335},"48":{"name":"setupAndUnlock","decl":{"start":{"line":348,"column":20},"end":{"line":348,"column":34}},"loc":{"start":{"line":348,"column":47},"end":{"line":350,"column":5}},"line":348},"49":{"name":"isSetup","decl":{"start":{"line":357,"column":20},"end":{"line":357,"column":27}},"loc":{"start":{"line":357,"column":30},"end":{"line":359,"column":5}},"line":357},"50":{"name":"lock","decl":{"start":{"line":366,"column":20},"end":{"line":366,"column":24}},"loc":{"start":{"line":366,"column":27},"end":{"line":368,"column":5}},"line":366},"51":{"name":"(anonymous_51)","decl":{"start":{"line":375,"column":11},"end":{"line":375,"column":12}},"loc":{"start":{"line":375,"column":23},"end":{"line":391,"column":5}},"line":375},"52":{"name":"(anonymous_52)","decl":{"start":{"line":376,"column":45},"end":{"line":376,"column":46}},"loc":{"start":{"line":376,"column":58},"end":{"line":384,"column":7}},"line":376},"53":{"name":"deleteAllData","decl":{"start":{"line":386,"column":15},"end":{"line":386,"column":28}},"loc":{"start":{"line":386,"column":31},"end":{"line":388,"column":7}},"line":386},"54":{"name":"connectLedger","decl":{"start":{"line":394,"column":20},"end":{"line":394,"column":33}},"loc":{"start":{"line":394,"column":45},"end":{"line":396,"column":5}},"line":394},"55":{"name":"get","decl":{"start":{"line":399,"column":18},"end":{"line":399,"column":21}},"loc":{"start":{"line":399,"column":24},"end":{"line":401,"column":5}},"line":399}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":46},"end":{"line":28,"column":94}},"type":"cond-expr","locations":[{"start":{"line":28,"column":70},"end":{"line":28,"column":73}},{"start":{"line":28,"column":76},"end":{"line":28,"column":94}}],"line":28},"1":{"loc":{"start":{"line":28,"column":46},"end":{"line":28,"column":67}},"type":"binary-expr","locations":[{"start":{"line":28,"column":46},"end":{"line":28,"column":49}},{"start":{"line":28,"column":53},"end":{"line":28,"column":67}}],"line":28},"2":{"loc":{"start":{"line":30,"column":24},"end":{"line":30,"column":328}},"type":"if","locations":[{"start":{"line":30,"column":24},"end":{"line":30,"column":328}},{"start":{"line":30,"column":24},"end":{"line":30,"column":328}}],"line":30},"3":{"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":95}},"type":"binary-expr","locations":[{"start":{"line":30,"column":28},"end":{"line":30,"column":56}},{"start":{"line":30,"column":60},"end":{"line":30,"column":95}}],"line":30},"4":{"loc":{"start":{"line":30,"column":205},"end":{"line":30,"column":322}},"type":"cond-expr","locations":[{"start":{"line":30,"column":301},"end":{"line":30,"column":309}},{"start":{"line":30,"column":312},"end":{"line":30,"column":322}}],"line":30},"5":{"loc":{"start":{"line":30,"column":205},"end":{"line":30,"column":298}},"type":"binary-expr","locations":[{"start":{"line":30,"column":205},"end":{"line":30,"column":208}},{"start":{"line":30,"column":212},"end":{"line":30,"column":240}},{"start":{"line":30,"column":244},"end":{"line":30,"column":270}},{"start":{"line":30,"column":274},"end":{"line":30,"column":298}}],"line":30},"6":{"loc":{"start":{"line":32,"column":176},"end":{"line":32,"column":263}},"type":"if","locations":[{"start":{"line":32,"column":176},"end":{"line":32,"column":263}},{"start":{"line":32,"column":176},"end":{"line":32,"column":263}}],"line":32},"7":{"loc":{"start":{"line":36,"column":75},"end":{"line":36,"column":326}},"type":"if","locations":[{"start":{"line":36,"column":75},"end":{"line":36,"column":326}},{"start":{"line":36,"column":75},"end":{"line":36,"column":326}}],"line":36},"8":{"loc":{"start":{"line":36,"column":163},"end":{"line":36,"column":292}},"type":"if","locations":[{"start":{"line":36,"column":163},"end":{"line":36,"column":292}},{"start":{"line":36,"column":163},"end":{"line":36,"column":292}}],"line":36},"9":{"loc":{"start":{"line":38,"column":91},"end":{"line":38,"column":131}},"type":"cond-expr","locations":[{"start":{"line":38,"column":114},"end":{"line":38,"column":126}},{"start":{"line":38,"column":129},"end":{"line":38,"column":131}}],"line":38},"10":{"loc":{"start":{"line":38,"column":133},"end":{"line":38,"column":515}},"type":"if","locations":[{"start":{"line":38,"column":133},"end":{"line":38,"column":515}},{"start":{"line":38,"column":133},"end":{"line":38,"column":515}}],"line":38},"11":{"loc":{"start":{"line":38,"column":255},"end":{"line":38,"column":515}},"type":"if","locations":[{"start":{"line":38,"column":255},"end":{"line":38,"column":515}},{"start":{"line":38,"column":255},"end":{"line":38,"column":515}}],"line":38},"12":{"loc":{"start":{"line":40,"column":50},"end":{"line":40,"column":151}},"type":"if","locations":[{"start":{"line":40,"column":50},"end":{"line":40,"column":151}},{"start":{"line":40,"column":50},"end":{"line":40,"column":151}}],"line":40},"13":{"loc":{"start":{"line":42,"column":136},"end":{"line":42,"column":166}},"type":"binary-expr","locations":[{"start":{"line":42,"column":136},"end":{"line":42,"column":157}},{"start":{"line":42,"column":161},"end":{"line":42,"column":166}}],"line":42},"14":{"loc":{"start":{"line":42,"column":200},"end":{"line":42,"column":254}},"type":"if","locations":[{"start":{"line":42,"column":200},"end":{"line":42,"column":254}},{"start":{"line":42,"column":200},"end":{"line":42,"column":254}}],"line":42},"15":{"loc":{"start":{"line":44,"column":62},"end":{"line":44,"column":131}},"type":"if","locations":[{"start":{"line":44,"column":62},"end":{"line":44,"column":131}},{"start":{"line":44,"column":62},"end":{"line":44,"column":131}}],"line":44},"16":{"loc":{"start":{"line":44,"column":132},"end":{"line":44,"column":193}},"type":"if","locations":[{"start":{"line":44,"column":132},"end":{"line":44,"column":193}},{"start":{"line":44,"column":132},"end":{"line":44,"column":193}}],"line":44},"17":{"loc":{"start":{"line":46,"column":50},"end":{"line":46,"column":138}},"type":"if","locations":[{"start":{"line":46,"column":50},"end":{"line":46,"column":138}},{"start":{"line":46,"column":50},"end":{"line":46,"column":138}}],"line":46},"18":{"loc":{"start":{"line":46,"column":54},"end":{"line":46,"column":120}},"type":"binary-expr","locations":[{"start":{"line":46,"column":54},"end":{"line":46,"column":58}},{"start":{"line":46,"column":63},"end":{"line":46,"column":89}},{"start":{"line":46,"column":93},"end":{"line":46,"column":119}}],"line":46},"19":{"loc":{"start":{"line":48,"column":48},"end":{"line":48,"column":175}},"type":"cond-expr","locations":[{"start":{"line":48,"column":72},"end":{"line":48,"column":93}},{"start":{"line":48,"column":96},"end":{"line":48,"column":175}}],"line":48},"20":{"loc":{"start":{"line":48,"column":133},"end":{"line":48,"column":172}},"type":"binary-expr","locations":[{"start":{"line":48,"column":133},"end":{"line":48,"column":144}},{"start":{"line":48,"column":148},"end":{"line":48,"column":172}}],"line":48},"21":{"loc":{"start":{"line":50,"column":40},"end":{"line":50,"column":151}},"type":"if","locations":[{"start":{"line":50,"column":40},"end":{"line":50,"column":151}},{"start":{"line":50,"column":40},"end":{"line":50,"column":151}}],"line":50},"22":{"loc":{"start":{"line":52,"column":43},"end":{"line":52,"column":182}},"type":"if","locations":[{"start":{"line":52,"column":43},"end":{"line":52,"column":182}},{"start":{"line":52,"column":43},"end":{"line":52,"column":182}}],"line":52},"23":{"loc":{"start":{"line":52,"column":47},"end":{"line":52,"column":102}},"type":"binary-expr","locations":[{"start":{"line":52,"column":47},"end":{"line":52,"column":79}},{"start":{"line":52,"column":83},"end":{"line":52,"column":102}}],"line":52},"24":{"loc":{"start":{"line":52,"column":218},"end":{"line":52,"column":252}},"type":"binary-expr","locations":[{"start":{"line":52,"column":218},"end":{"line":52,"column":228}},{"start":{"line":52,"column":232},"end":{"line":52,"column":252}}],"line":52},"25":{"loc":{"start":{"line":52,"column":329},"end":{"line":52,"column":383}},"type":"if","locations":[{"start":{"line":52,"column":329},"end":{"line":52,"column":383}},{"start":{"line":52,"column":329},"end":{"line":52,"column":383}}],"line":52},"26":{"loc":{"start":{"line":54,"column":51},"end":{"line":54,"column":137}},"type":"binary-expr","locations":[{"start":{"line":54,"column":51},"end":{"line":54,"column":72}},{"start":{"line":54,"column":76},"end":{"line":54,"column":137}}],"line":54},"27":{"loc":{"start":{"line":56,"column":44},"end":{"line":56,"column":195}},"type":"if","locations":[{"start":{"line":56,"column":44},"end":{"line":56,"column":195}},{"start":{"line":56,"column":44},"end":{"line":56,"column":195}}],"line":56},"28":{"loc":{"start":{"line":132,"column":6},"end":{"line":134,"column":7}},"type":"if","locations":[{"start":{"line":132,"column":6},"end":{"line":134,"column":7}},{"start":{"line":132,"column":6},"end":{"line":134,"column":7}}],"line":132},"29":{"loc":{"start":{"line":136,"column":6},"end":{"line":138,"column":7}},"type":"if","locations":[{"start":{"line":136,"column":6},"end":{"line":138,"column":7}},{"start":{"line":136,"column":6},"end":{"line":138,"column":7}}],"line":136},"30":{"loc":{"start":{"line":136,"column":10},"end":{"line":136,"column":98}},"type":"binary-expr","locations":[{"start":{"line":136,"column":10},"end":{"line":136,"column":52}},{"start":{"line":136,"column":56},"end":{"line":136,"column":98}}],"line":136},"31":{"loc":{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},"type":"if","locations":[{"start":{"line":142,"column":6},"end":{"line":144,"column":7}},{"start":{"line":142,"column":6},"end":{"line":144,"column":7}}],"line":142},"32":{"loc":{"start":{"line":142,"column":10},"end":{"line":142,"column":140}},"type":"binary-expr","locations":[{"start":{"line":142,"column":10},"end":{"line":142,"column":38}},{"start":{"line":142,"column":42},"end":{"line":142,"column":89}},{"start":{"line":142,"column":93},"end":{"line":142,"column":140}}],"line":142},"33":{"loc":{"start":{"line":154,"column":6},"end":{"line":156,"column":7}},"type":"if","locations":[{"start":{"line":154,"column":6},"end":{"line":156,"column":7}},{"start":{"line":154,"column":6},"end":{"line":156,"column":7}}],"line":154},"34":{"loc":{"start":{"line":179,"column":6},"end":{"line":181,"column":7}},"type":"if","locations":[{"start":{"line":179,"column":6},"end":{"line":181,"column":7}},{"start":{"line":179,"column":6},"end":{"line":181,"column":7}}],"line":179},"35":{"loc":{"start":{"line":183,"column":6},"end":{"line":185,"column":7}},"type":"if","locations":[{"start":{"line":183,"column":6},"end":{"line":185,"column":7}},{"start":{"line":183,"column":6},"end":{"line":185,"column":7}}],"line":183},"36":{"loc":{"start":{"line":190,"column":6},"end":{"line":203,"column":7}},"type":"if","locations":[{"start":{"line":190,"column":6},"end":{"line":203,"column":7}},{"start":{"line":190,"column":6},"end":{"line":203,"column":7}}],"line":190},"37":{"loc":{"start":{"line":193,"column":8},"end":{"line":197,"column":9}},"type":"if","locations":[{"start":{"line":193,"column":8},"end":{"line":197,"column":9}},{"start":{"line":193,"column":8},"end":{"line":197,"column":9}}],"line":193},"38":{"loc":{"start":{"line":205,"column":6},"end":{"line":207,"column":7}},"type":"if","locations":[{"start":{"line":205,"column":6},"end":{"line":207,"column":7}},{"start":{"line":205,"column":6},"end":{"line":207,"column":7}}],"line":205},"39":{"loc":{"start":{"line":223,"column":8},"end":{"line":223,"column":88}},"type":"if","locations":[{"start":{"line":223,"column":8},"end":{"line":223,"column":88}},{"start":{"line":223,"column":8},"end":{"line":223,"column":88}}],"line":223},"40":{"loc":{"start":{"line":248,"column":8},"end":{"line":252,"column":9}},"type":"if","locations":[{"start":{"line":248,"column":8},"end":{"line":252,"column":9}},{"start":{"line":248,"column":8},"end":{"line":252,"column":9}}],"line":248},"41":{"loc":{"start":{"line":281,"column":6},"end":{"line":285,"column":7}},"type":"if","locations":[{"start":{"line":281,"column":6},"end":{"line":285,"column":7}},{"start":{"line":281,"column":6},"end":{"line":285,"column":7}}],"line":281},"42":{"loc":{"start":{"line":297,"column":6},"end":{"line":301,"column":7}},"type":"if","locations":[{"start":{"line":297,"column":6},"end":{"line":301,"column":7}},{"start":{"line":297,"column":6},"end":{"line":301,"column":7}}],"line":297},"43":{"loc":{"start":{"line":313,"column":8},"end":{"line":313,"column":56}},"type":"binary-expr","locations":[{"start":{"line":313,"column":8},"end":{"line":313,"column":22}},{"start":{"line":313,"column":27},"end":{"line":313,"column":55}}],"line":313},"44":{"loc":{"start":{"line":314,"column":8},"end":{"line":314,"column":54}},"type":"binary-expr","locations":[{"start":{"line":314,"column":8},"end":{"line":314,"column":21}},{"start":{"line":314,"column":26},"end":{"line":314,"column":53}}],"line":314},"45":{"loc":{"start":{"line":380,"column":8},"end":{"line":383,"column":9}},"type":"if","locations":[{"start":{"line":380,"column":8},"end":{"line":383,"column":9}},{"start":{"line":380,"column":8},"end":{"line":383,"column":9}}],"line":380}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":4,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":30,"20":30,"21":27,"22":3,"23":3,"24":27,"25":11,"26":16,"27":5,"28":14,"29":14,"30":14,"31":14,"32":27,"33":3,"34":14,"35":12,"36":12,"37":12,"38":12,"39":12,"40":0,"41":12,"42":12,"43":6,"44":6,"45":18,"46":18,"47":12,"48":18,"49":6,"50":6,"51":0,"52":0,"53":6,"54":6,"55":0,"56":1,"57":1,"58":18,"59":18,"60":18,"61":18,"62":17,"63":18,"64":1,"65":1,"66":1,"67":0,"68":1,"69":6,"70":0,"71":6,"72":1,"73":0,"74":1,"75":102,"76":0,"77":102,"78":1,"79":0,"80":1,"81":1,"82":1,"83":1,"84":0,"85":0,"86":1,"87":90,"88":0,"89":90,"90":90,"91":1,"92":1,"93":1,"94":6,"95":6,"96":6,"97":6,"98":6,"99":6,"100":6,"101":6,"102":6,"103":6,"104":6,"105":6,"106":6,"107":6,"108":6,"109":6,"110":6,"111":6,"112":6,"113":6,"114":1,"115":0,"116":7,"117":7,"118":7,"119":0,"120":7,"121":7,"122":6,"123":6,"124":0,"125":6,"126":0,"127":16,"128":0,"129":16,"130":0,"131":16,"132":16,"133":5,"134":5,"135":5,"136":5,"137":5,"138":11,"139":16,"140":0,"141":16,"142":1,"143":6,"144":0,"145":6,"146":6,"147":4,"148":6,"149":1,"150":1,"151":6,"152":2,"153":4,"154":5,"155":6,"156":1,"157":3,"158":3,"159":3,"160":0,"161":3,"162":3,"163":3,"164":0,"165":3,"166":1,"167":0,"168":0,"169":0,"170":1,"171":1,"172":2,"173":2,"174":1,"175":2,"176":2,"177":2,"178":1,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":1,"186":0,"187":0,"188":1,"189":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":30,"5":5,"6":14,"7":14,"8":27,"9":3,"10":12,"11":0,"12":6,"13":18,"14":0,"15":6,"16":1,"17":1,"18":6,"19":1,"20":0,"21":102,"22":1,"23":1,"24":0,"25":90,"26":1,"27":6,"28":0,"29":7,"30":6,"31":0,"32":16,"33":1,"34":6,"35":6,"36":1,"37":6,"38":6,"39":3,"40":3,"41":3,"42":1,"43":0,"44":0,"45":1,"46":2,"47":2,"48":2,"49":2,"50":2,"51":1,"52":0,"53":0,"54":0,"55":0},"b":{"0":[4,0],"1":[4,4],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0],"6":[11,16],"7":[12,0],"8":[12,0],"9":[12,6],"10":[12,6],"11":[6,0],"12":[0,6],"13":[18,18],"14":[17,1],"15":[1,0],"16":[0,1],"17":[0,6],"18":[6,0,0],"19":[1,0],"20":[0,0],"21":[0,102],"22":[0,1],"23":[1,0],"24":[1,1],"25":[1,0],"26":[1,0],"27":[0,90],"28":[7,0],"29":[0,7],"30":[7,7],"31":[6,1],"32":[7,6,6],"33":[0,6],"34":[0,16],"35":[0,16],"36":[5,11],"37":[5,0],"38":[0,16],"39":[0,6],"40":[2,4],"41":[3,0],"42":[3,0],"43":[0,0],"44":[0,0],"45":[0,0]},"inputSourceMap":{"version":3,"sources":["wallet.ts"],"names":["DB_VERSION","Wallet","config","DEFAULT_CHAIN","HashMap","appName","appVersion","instanceId","Map","keyManager","KeyManager","transactionManager","TransactionManager","accountManager","AccountManager","nameManager","NameManager","configKey","value","chainConfig","provider","AergoClient","defaultProviderClass","nodeUrl","Error","chainConfigs","set","chainId","size","defaultChainId","setDefaultChain","has","limit","defaultLimit","get","client","clients","url","setDefaultLimit","account","transaction","data","getOrAddAccount","preparedTx","prepareTransaction","signedTx","signTransaction","signedTransaction","SignedTransaction","sendTransaction","classOrInstance","Promise","all","useKeyStorage","useDataStorage","keystore","open","datastore","close","passphrase","unlock","setupAndUnlock","isSetup","lock","clearAccounts","clearKeys","getIndex","clear","transport","ledger","LedgerAppAergo","unlocked","MiddlewareConsumer"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src","sourcesContent":["import { MiddlewareConsumer } from './middleware';\nimport KeyManager from './managers/key-manager';\nimport AccountManager from './managers/account-manager';\nimport { TransactionTracker, TransactionManager } from './managers/transaction-manager';\nimport NameManager from './managers/name-manager';\nimport { AergoClient } from '@herajs/client';\nimport { HashMap, isConstructor, Constructor } from './utils';\nimport { Account, AccountSpec } from './models/account';\nimport { TxBody, SignedTransaction } from './models/transaction';\nimport { DEFAULT_CHAIN } from './defaults';\nimport { Storage } from './storages/storage';\nimport LedgerAppAergo from '@herajs/ledger-hw-app-aergo';\n\nconst DB_VERSION = 1;\n\ninterface ChainConfig {\n    chainId: string;\n    nodeUrl?: string;\n    provider?: any;\n}\n\ninterface WalletConfig {\n    appName: string;\n    appVersion: number;\n    instanceId: string;\n}\n\n/**\n * Wallet is the central object that keeps configuration and references to the different managers.\n */\nexport class Wallet extends MiddlewareConsumer {\n    public defaultChainId: string = DEFAULT_CHAIN;\n    private chainConfigs: HashMap<string, ChainConfig> = new HashMap();\n    public keyManager: KeyManager;\n    public transactionManager: TransactionManager;\n    public accountManager: AccountManager;\n    public nameManager: NameManager;\n    private config: WalletConfig = { appName: 'herajs-wallet', appVersion: 1, instanceId: '' };\n    public datastore?: Storage;\n    public keystore?: Storage;\n    private clients: Map<string, AergoClient> = new Map();\n    public defaultLimit?: number;\n    public ledger?: LedgerAppAergo;\n\n    constructor(config?: Partial<WalletConfig>) {\n        super();\n        this.keyManager = new KeyManager(this);\n        this.transactionManager = new TransactionManager(this);\n        this.accountManager = new AccountManager(this);\n        this.nameManager = new NameManager(this);\n        this.config = { ...this.config, ...config };\n    }\n\n    /**\n     * Sets a configuration value\n     * @param configKey\n     * @param value \n     */\n    set(configKey: keyof WalletConfig, value: WalletConfig[keyof WalletConfig]): void {\n        // @ts-ignore\n        this.config[configKey] = value;\n    }\n\n    /**\n     * Add a chain configuration.\n     * Sets new chain as default if first to be added and default chain was unchanged.\n     * @param chainConfig \n     */\n    useChain(chainConfig: ChainConfig): void {\n        if (typeof chainConfig.provider === 'undefined') {\n            chainConfig.provider = AergoClient.defaultProviderClass;\n        }\n\n        if (typeof chainConfig.provider === 'function' && typeof chainConfig.nodeUrl === 'undefined') {\n            throw new Error('supply nodeUrl in chain config or instantiate provider manually');\n        }\n\n        this.chainConfigs.set(chainConfig.chainId, chainConfig);\n        if (\n            this.chainConfigs.size === 1 &&\n            this.defaultChainId === DEFAULT_CHAIN &&\n            chainConfig.chainId !== DEFAULT_CHAIN\n        ) {\n            this.setDefaultChain(chainConfig.chainId);\n        }\n    }\n\n    /**\n     * Set the default chain for subsequent actions.\n     * @param chainId \n     */\n    setDefaultChain(chainId: string): void {\n        if (!this.chainConfigs.has(chainId)) {\n            throw new Error(`configure chain ${chainId} using useChain() before setting it as default`);\n        }\n        this.defaultChainId = chainId;\n    }\n\n    /**\n     * Set the default gas limit for subsequent transactions.\n     * @param limit \n     */\n    setDefaultLimit(limit: number): void {\n        this.defaultLimit = limit;\n    }\n\n    /**\n     * Get AergoClient for chainId.\n     * If called the first time, create AergoClient instance.\n     * @param chainId optional, uses default chainId when undefined\n     */\n    getClient(chainId?: string): AergoClient {\n        if (typeof chainId === 'undefined') {\n            chainId = this.defaultChainId;\n        }\n        if (!this.chainConfigs.has(chainId)) {\n            throw new Error(`trying to use not configured chainId ${chainId}`);\n        }\n        const chainConfig = this.chainConfigs.get(chainId) as ChainConfig;\n        let client: AergoClient;\n\n        if (!this.clients.has(chainId)) {\n            let provider = chainConfig.provider;\n            if (typeof provider === 'function') {\n                provider = new provider({ url: chainConfig.nodeUrl });\n            }\n            client = new AergoClient({}, provider);\n            this.clients.set(chainId, client);\n        } else {\n            client = this.clients.get(chainId) as AergoClient;\n        }\n        if (this.defaultLimit) {\n            client.setDefaultLimit(this.defaultLimit);\n        }\n        return client;\n    }\n\n    /**\n     * Prepare a transaction from given account specified by simple TxBody.\n     * Completes missing information (chainIdHash, nonce) and signs tx using key of account.\n     * @param account account object or specification\n     * @param transaction\n     * @returns prepared and signed transaction\n     */\n    async prepareTransaction(account: Account | AccountSpec, transaction: Partial<TxBody>): Promise<SignedTransaction> {\n        if (!(account as Account).data) account = await this.accountManager.getOrAddAccount(account as AccountSpec);\n        const preparedTx = await this.accountManager.prepareTransaction(account as Account, transaction);\n        const signedTx = await this.keyManager.signTransaction(account as Account, preparedTx);\n        return signedTx;\n    }\n\n    /**\n     * Send a transaction to the network using the specified account.\n     * Calls prepareTransaction() if not already prepared.\n     * @param account \n     * @param transaction\n     */\n    async sendTransaction(account: Account | AccountSpec, transaction: Partial<TxBody> | SignedTransaction): Promise<TransactionTracker> {\n        let signedTransaction: SignedTransaction;\n        if (transaction instanceof SignedTransaction) {\n            signedTransaction = transaction;\n        } else {\n            signedTransaction = await this.prepareTransaction(account, transaction);\n        }\n        return this.transactionManager.sendTransaction(signedTransaction);\n    }\n\n    /**\n     * Sets storage to use for both keystore and datastore\n     * @param classOrInstance\n     */\n    useStorage<T extends Storage>(classOrInstance: T | Constructor<T>): Promise<[Storage, Storage]> {\n        return Promise.all([\n            this.useKeyStorage(classOrInstance),\n            this.useDataStorage(classOrInstance)\n        ]);\n    }\n\n    /**\n     * Sets storage to use for keystore\n     * @param classOrInstance\n     */\n    useKeyStorage<T extends Storage>(classOrInstance: T | Constructor<T>): Promise<Storage> {\n        if (isConstructor<T>(classOrInstance)) {\n            this.keystore = new classOrInstance('keystore', DB_VERSION);\n        } else {\n            this.keystore = classOrInstance;\n        }\n        return this.keystore.open();\n    }\n\n    /**\n     * Sets storage to use for datastore\n     * @param classOrInstance\n     */\n    useDataStorage<T extends Storage>(classOrInstance: T | Constructor<T>): Promise<Storage> {\n        if (isConstructor<T>(classOrInstance)) {\n            this.datastore = new classOrInstance('datastore', DB_VERSION);\n        } else {\n            this.datastore = classOrInstance;\n        }\n        return this.datastore.open();\n    }\n\n    /**\n     * Closes storages.\n     */\n    async close(): Promise<void> {\n        this.datastore && await this.datastore.close();\n        this.keystore && await this.keystore.close();\n    }\n\n    /**\n     * Shortcut for keyManager.unlock()\n     * @param passphrase\n     */\n    async unlock (passphrase: string): Promise<void> {\n        return this.keyManager.unlock(passphrase);\n    }\n\n    /**\n     * Shortcut for keyManager.setupAndUnlock()\n     * @param passphrase\n     */\n    setupAndUnlock (passphrase: string): Promise<void> {\n        return this.keyManager.setupAndUnlock(`id-${this.config.instanceId}`, passphrase);\n    }\n\n    /**\n     * Shortcut for keyManager.isSetup()\n     */\n    isSetup(): Promise<boolean> {\n        return this.keyManager.isSetup();\n    }\n\n    /**\n     * Shortcut for keyManager.lock()\n     */\n    lock(): void {\n        this.keyManager.lock();\n    }\n\n    get unlocked(): boolean {\n        return this.keyManager.unlocked;\n    }\n\n    /**\n     * Clears all storages\n     */\n    async deleteAllData(): Promise<void> {\n        await this.accountManager.clearAccounts();\n        await this.keyManager.clearKeys();\n        if (this.datastore) {\n            await this.datastore.getIndex('transactions').clear();\n            await this.datastore.getIndex('settings').clear();\n        }\n    }\n\n    connectLedger(transport: any): void {\n        this.ledger = new LedgerAppAergo(transport);\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f64ec1643af8a851b62a0ec46d8ee7a3d715c041","contentHash":"d056df640fbf04900d0d3556ceabb13a6088b14573c3775e15d28266a1a99003"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/middleware.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/middleware.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":57}},"2":{"start":{"line":8,"column":44},"end":{"line":8,"column":315}},"3":{"start":{"line":8,"column":57},"end":{"line":8,"column":58}},"4":{"start":{"line":8,"column":102},"end":{"line":8,"column":110}},"5":{"start":{"line":8,"column":112},"end":{"line":8,"column":167}},"6":{"start":{"line":8,"column":168},"end":{"line":8,"column":199}},"7":{"start":{"line":8,"column":200},"end":{"line":8,"column":254}},"8":{"start":{"line":8,"column":227},"end":{"line":8,"column":254}},"9":{"start":{"line":8,"column":255},"end":{"line":8,"column":313}},"10":{"start":{"line":10,"column":62},"end":{"line":10,"column":131}},"11":{"start":{"line":10,"column":78},"end":{"line":10,"column":131}},"12":{"start":{"line":10,"column":132},"end":{"line":10,"column":193}},"13":{"start":{"line":10,"column":149},"end":{"line":10,"column":193}},"14":{"start":{"line":10,"column":194},"end":{"line":10,"column":213}},"15":{"start":{"line":12,"column":44},"end":{"line":12,"column":195}},"16":{"start":{"line":12,"column":62},"end":{"line":12,"column":166}},"17":{"start":{"line":12,"column":176},"end":{"line":12,"column":193}},"18":{"start":{"line":12,"column":196},"end":{"line":12,"column":207}},"19":{"start":{"line":14,"column":50},"end":{"line":14,"column":151}},"20":{"start":{"line":14,"column":92},"end":{"line":14,"column":149}},"21":{"start":{"line":16,"column":17},"end":{"line":18,"column":1}},"22":{"start":{"line":17,"column":2},"end":{"line":17,"column":36}},"23":{"start":{"line":20,"column":0},"end":{"line":20,"column":32}},"24":{"start":{"line":23,"column":2},"end":{"line":23,"column":35}},"25":{"start":{"line":28,"column":0},"end":{"line":95,"column":3}},"26":{"start":{"line":30,"column":4},"end":{"line":30,"column":46}},"27":{"start":{"line":32,"column":4},"end":{"line":32,"column":45}},"28":{"start":{"line":35,"column":2},"end":{"line":92,"column":6}},"29":{"start":{"line":38,"column":6},"end":{"line":40,"column":7}},"30":{"start":{"line":39,"column":8},"end":{"line":39,"column":38}},"31":{"start":{"line":42,"column":6},"end":{"line":42,"column":40}},"32":{"start":{"line":47,"column":18},"end":{"line":47,"column":22}},"33":{"start":{"line":49,"column":6},"end":{"line":90,"column":8}},"34":{"start":{"line":52,"column":8},"end":{"line":58,"column":9}},"35":{"start":{"line":53,"column":10},"end":{"line":55,"column":12}},"36":{"start":{"line":54,"column":12},"end":{"line":54,"column":133}},"37":{"start":{"line":57,"column":10},"end":{"line":57,"column":20}},"38":{"start":{"line":60,"column":8},"end":{"line":87,"column":9}},"39":{"start":{"line":61,"column":42},"end":{"line":61,"column":46}},"40":{"start":{"line":62,"column":34},"end":{"line":62,"column":39}},"41":{"start":{"line":63,"column":31},"end":{"line":63,"column":40}},"42":{"start":{"line":65,"column":10},"end":{"line":86,"column":11}},"43":{"start":{"line":66,"column":12},"end":{"line":72,"column":13}},"44":{"start":{"line":66,"column":33},"end":{"line":66,"column":69}},"45":{"start":{"line":67,"column":31},"end":{"line":67,"column":42}},"46":{"start":{"line":69,"column":14},"end":{"line":71,"column":15}},"47":{"start":{"line":70,"column":16},"end":{"line":70,"column":57}},"48":{"start":{"line":74,"column":12},"end":{"line":74,"column":37}},"49":{"start":{"line":75,"column":12},"end":{"line":75,"column":33}},"50":{"start":{"line":77,"column":12},"end":{"line":85,"column":13}},"51":{"start":{"line":78,"column":14},"end":{"line":80,"column":15}},"52":{"start":{"line":79,"column":16},"end":{"line":79,"column":38}},"53":{"start":{"line":82,"column":14},"end":{"line":84,"column":15}},"54":{"start":{"line":83,"column":16},"end":{"line":83,"column":37}},"55":{"start":{"line":89,"column":8},"end":{"line":89,"column":18}},"56":{"start":{"line":94,"column":2},"end":{"line":94,"column":28}},"57":{"start":{"line":97,"column":0},"end":{"line":97,"column":48}}},"fnMap":{"0":{"name":"_defineProperties","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":26}},"loc":{"start":{"line":8,"column":42},"end":{"line":8,"column":317}},"line":8},"1":{"name":"_createClass","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":21}},"loc":{"start":{"line":10,"column":60},"end":{"line":10,"column":215}},"line":10},"2":{"name":"_defineProperty","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":24}},"loc":{"start":{"line":12,"column":42},"end":{"line":12,"column":209}},"line":12},"3":{"name":"_classCallCheck","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":24}},"loc":{"start":{"line":14,"column":48},"end":{"line":14,"column":153}},"line":14},"4":{"name":"Middleware","decl":{"start":{"line":16,"column":26},"end":{"line":16,"column":36}},"loc":{"start":{"line":16,"column":39},"end":{"line":18,"column":1}},"line":16},"5":{"name":"isMiddlewareConstructor","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":32}},"loc":{"start":{"line":22,"column":38},"end":{"line":24,"column":1}},"line":22},"6":{"name":"(anonymous_6)","decl":{"start":{"line":28,"column":0},"end":{"line":28,"column":1}},"loc":{"start":{"line":28,"column":12},"end":{"line":95,"column":1}},"line":28},"7":{"name":"MiddlewareConsumer","decl":{"start":{"line":29,"column":11},"end":{"line":29,"column":29}},"loc":{"start":{"line":29,"column":32},"end":{"line":33,"column":3}},"line":29},"8":{"name":"use","decl":{"start":{"line":37,"column":20},"end":{"line":37,"column":23}},"loc":{"start":{"line":37,"column":36},"end":{"line":43,"column":5}},"line":37},"9":{"name":"applyMiddlewares","decl":{"start":{"line":46,"column":20},"end":{"line":46,"column":36}},"loc":{"start":{"line":46,"column":51},"end":{"line":91,"column":5}},"line":46},"10":{"name":"(anonymous_10)","decl":{"start":{"line":49,"column":13},"end":{"line":49,"column":14}},"loc":{"start":{"line":49,"column":29},"end":{"line":90,"column":7}},"line":49},"11":{"name":"fn","decl":{"start":{"line":53,"column":24},"end":{"line":53,"column":26}},"loc":{"start":{"line":53,"column":29},"end":{"line":55,"column":11}},"line":53}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":136},"end":{"line":8,"column":166}},"type":"binary-expr","locations":[{"start":{"line":8,"column":136},"end":{"line":8,"column":157}},{"start":{"line":8,"column":161},"end":{"line":8,"column":166}}],"line":8},"1":{"loc":{"start":{"line":8,"column":200},"end":{"line":8,"column":254}},"type":"if","locations":[{"start":{"line":8,"column":200},"end":{"line":8,"column":254}},{"start":{"line":8,"column":200},"end":{"line":8,"column":254}}],"line":8},"2":{"loc":{"start":{"line":10,"column":62},"end":{"line":10,"column":131}},"type":"if","locations":[{"start":{"line":10,"column":62},"end":{"line":10,"column":131}},{"start":{"line":10,"column":62},"end":{"line":10,"column":131}}],"line":10},"3":{"loc":{"start":{"line":10,"column":132},"end":{"line":10,"column":193}},"type":"if","locations":[{"start":{"line":10,"column":132},"end":{"line":10,"column":193}},{"start":{"line":10,"column":132},"end":{"line":10,"column":193}}],"line":10},"4":{"loc":{"start":{"line":12,"column":44},"end":{"line":12,"column":195}},"type":"if","locations":[{"start":{"line":12,"column":44},"end":{"line":12,"column":195}},{"start":{"line":12,"column":44},"end":{"line":12,"column":195}}],"line":12},"5":{"loc":{"start":{"line":14,"column":50},"end":{"line":14,"column":151}},"type":"if","locations":[{"start":{"line":14,"column":50},"end":{"line":14,"column":151}},{"start":{"line":14,"column":50},"end":{"line":14,"column":151}}],"line":14},"6":{"loc":{"start":{"line":38,"column":6},"end":{"line":40,"column":7}},"type":"if","locations":[{"start":{"line":38,"column":6},"end":{"line":40,"column":7}},{"start":{"line":38,"column":6},"end":{"line":40,"column":7}}],"line":38},"7":{"loc":{"start":{"line":52,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":58,"column":9}},{"start":{"line":52,"column":8},"end":{"line":58,"column":9}}],"line":52},"8":{"loc":{"start":{"line":60,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":87,"column":9}},{"start":{"line":60,"column":8},"end":{"line":87,"column":9}}],"line":60},"9":{"loc":{"start":{"line":69,"column":14},"end":{"line":71,"column":15}},"type":"if","locations":[{"start":{"line":69,"column":14},"end":{"line":71,"column":15}},{"start":{"line":69,"column":14},"end":{"line":71,"column":15}}],"line":69},"10":{"loc":{"start":{"line":78,"column":14},"end":{"line":80,"column":15}},"type":"if","locations":[{"start":{"line":78,"column":14},"end":{"line":80,"column":15}},{"start":{"line":78,"column":14},"end":{"line":80,"column":15}}],"line":78},"11":{"loc":{"start":{"line":78,"column":18},"end":{"line":78,"column":75}},"type":"binary-expr","locations":[{"start":{"line":78,"column":18},"end":{"line":78,"column":44}},{"start":{"line":78,"column":48},"end":{"line":78,"column":75}}],"line":78},"12":{"loc":{"start":{"line":82,"column":14},"end":{"line":84,"column":15}},"type":"if","locations":[{"start":{"line":82,"column":14},"end":{"line":84,"column":15}},{"start":{"line":82,"column":14},"end":{"line":84,"column":15}}],"line":82}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":2,"6":2,"7":2,"8":2,"9":2,"10":1,"11":1,"12":1,"13":0,"14":1,"15":6,"16":0,"17":6,"18":6,"19":6,"20":0,"21":1,"22":0,"23":1,"24":0,"25":1,"26":6,"27":6,"28":1,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":1},"f":{"0":1,"1":1,"2":6,"3":6,"4":0,"5":0,"6":1,"7":6,"8":0,"9":0,"10":0,"11":0},"b":{"0":[2,2],"1":[2,0],"2":[1,0],"3":[0,1],"4":[0,6],"5":[0,6],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"sources":["middleware.ts"],"names":["Middleware","isMiddlewareConstructor","arg","MiddlewareConsumer","middleware","middlewares","push","functionName","next","fn","Error"],"mappings":";;;;;;;;;;;;;;;IAUaA,U;;;;;;AAMb,SAASC,uBAAT,CACIC,GADJ,EAE2C;AACvC,SAAQ,OAAOA,GAAP,KAAe,UAAvB;AACH;;IAEYC,kB;;;;;;yCACkC,E;;;;;wBAEvCC,U,EAA8F;AAC9F,UAAIH,uBAAuB,CAAOG,UAAP,CAA3B,EAA+C;AAC3CA,QAAAA,UAAU,GAAG,IAAIA,UAAJ,EAAb;AACH;;AACD,WAAKC,WAAL,CAAiBC,IAAjB,CAAsBF,UAAtB;AACH;;;qCACsBG,Y,EAAgD;AAAA;;AACnE,aAAO,UAACC,IAAD,EAA0E;AAC7E,YAAIC,EAAJ;;AACA,YAAI,OAAOD,IAAP,KAAgB,WAApB,EAAiC;AAC7BC,UAAAA,EAAE,GAAG,cAAM;AACP,kBAAM,IAAIC,KAAJ,kBAAoBH,YAApB,2EAAN;AACH,WAFD;AAGH,SAJD,MAIO;AACHE,UAAAA,EAAE,GAAGD,IAAL;AACH;;AACD,YAAI,KAAI,CAACH,WAAT,EAAsB;AAAA;AAAA;AAAA;;AAAA;AAClB,iCAAyB,KAAI,CAACA,WAA9B,8HAA2C;AAAA,kBAAhCD,UAAgC;;AACvC,kBAAI,OAAOA,UAAU,CAACG,YAAD,CAAjB,KAAoC,UAAxC,EAAoD;AAChDE,gBAAAA,EAAE,GAAGL,UAAU,CAACG,YAAD,CAAV,CAAyB,KAAzB,EAA+BE,EAA/B,CAAL;AACH;AACJ;AALiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMrB;;AACD,eAAOA,EAAP;AACH,OAjBD;AAkBH","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src","sourcesContent":["type MiddlewareNextFuncNoInput<O> = () => O;\ntype MiddlewareNextFuncInput<I, O> = (input: I) => O;\nexport type MiddlewareNextFunc<I, O> = MiddlewareNextFuncInput<I, O> | MiddlewareNextFuncNoInput<O>;\nexport type MiddlewareFunc<I, O> = (next: MiddlewareNextFunc<I, O>) => MiddlewareNextFunc<I, O>;\ntype MiddlewareMainFunc<I, O> = (next?: MiddlewareNextFunc<I, O>) => MiddlewareNextFunc<I, O>;\nexport type MiddlewareMethod<I, O, ConsumerT = MiddlewareConsumer> = (consumer: ConsumerT) => MiddlewareFunc<I, O>;\n\nexport interface MiddlewareInterface<ConsumerT = MiddlewareConsumer> {\n    readonly [key: string]: MiddlewareMethod<any, any, ConsumerT>;\n}\nexport class Middleware<ConsumerT = MiddlewareConsumer> implements MiddlewareInterface<ConsumerT> {\n    readonly [key: string]: MiddlewareMethod<any, any, ConsumerT>;\n}\ninterface MiddlewareConstructor<ConsumerT = MiddlewareConsumer> {\n    new (): MiddlewareInterface<ConsumerT>;\n}\nfunction isMiddlewareConstructor<ConsumerT = MiddlewareConsumer>(\n    arg: Middleware<ConsumerT> | MiddlewareInterface<ConsumerT> | MiddlewareConstructor<ConsumerT>\n): arg is MiddlewareConstructor<ConsumerT> {\n    return (typeof arg === 'function');\n}\n\nexport class MiddlewareConsumer {\n    middlewares: MiddlewareInterface<this>[] = [];\n\n    use(middleware: Middleware<this> | MiddlewareInterface<this> | MiddlewareConstructor<this>): void {\n        if (isMiddlewareConstructor<this>(middleware)) {\n            middleware = new middleware();\n        }\n        this.middlewares.push(middleware);\n    }\n    applyMiddlewares<I, O>(functionName: string): MiddlewareMainFunc<I, O> {\n        return (next: MiddlewareNextFunc<I, O> | undefined): MiddlewareNextFunc<I, O> => {\n            let fn: MiddlewareNextFunc<I, O>;\n            if (typeof next === 'undefined') {\n                fn = () => {\n                    throw new Error(`Method ${functionName} has no fallback implementation. Did you forget to load a middleware?`);\n                };\n            } else {\n                fn = next;\n            }\n            if (this.middlewares) {\n                for (const middleware of this.middlewares) {\n                    if (typeof middleware[functionName] === 'function') {\n                        fn = middleware[functionName](this)(fn);\n                    }\n                }\n            }\n            return fn;\n        };\n    }   \n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0b5f66d7ca99a5c86b58d91c9d381a29a4257c35","contentHash":"33767518483c98a1df04cd8d6fba5b69b6fa9e89280ab70ae587bbdd374d9ade"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/key-manager.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/key-manager.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":25},"end":{"line":8,"column":65}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":51}},"4":{"start":{"line":12,"column":11},"end":{"line":12,"column":35}},"5":{"start":{"line":14,"column":15},"end":{"line":14,"column":43}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":39}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":32}},"8":{"start":{"line":20,"column":24},"end":{"line":20,"column":328}},"9":{"start":{"line":20,"column":99},"end":{"line":20,"column":154}},"10":{"start":{"line":20,"column":133},"end":{"line":20,"column":151}},"11":{"start":{"line":20,"column":164},"end":{"line":20,"column":326}},"12":{"start":{"line":20,"column":198},"end":{"line":20,"column":323}},"13":{"start":{"line":20,"column":329},"end":{"line":20,"column":349}},"14":{"start":{"line":22,"column":54},"end":{"line":22,"column":73}},"15":{"start":{"line":22,"column":75},"end":{"line":22,"column":326}},"16":{"start":{"line":22,"column":125},"end":{"line":22,"column":161}},"17":{"start":{"line":22,"column":163},"end":{"line":22,"column":292}},"18":{"start":{"line":22,"column":183},"end":{"line":22,"column":292}},"19":{"start":{"line":22,"column":225},"end":{"line":22,"column":288}},"20":{"start":{"line":22,"column":293},"end":{"line":22,"column":324}},"21":{"start":{"line":22,"column":327},"end":{"line":22,"column":339}},"22":{"start":{"line":24,"column":33},"end":{"line":24,"column":517}},"23":{"start":{"line":24,"column":46},"end":{"line":24,"column":47}},"24":{"start":{"line":24,"column":91},"end":{"line":24,"column":131}},"25":{"start":{"line":24,"column":133},"end":{"line":24,"column":515}},"26":{"start":{"line":24,"column":146},"end":{"line":24,"column":247}},"27":{"start":{"line":24,"column":201},"end":{"line":24,"column":243}},"28":{"start":{"line":24,"column":255},"end":{"line":24,"column":515}},"29":{"start":{"line":24,"column":295},"end":{"line":24,"column":369}},"30":{"start":{"line":24,"column":379},"end":{"line":24,"column":513}},"31":{"start":{"line":24,"column":428},"end":{"line":24,"column":509}},"32":{"start":{"line":24,"column":518},"end":{"line":24,"column":532}},"33":{"start":{"line":26,"column":77},"end":{"line":26,"column":175}},"34":{"start":{"line":26,"column":94},"end":{"line":26,"column":107}},"35":{"start":{"line":26,"column":121},"end":{"line":26,"column":131}},"36":{"start":{"line":26,"column":151},"end":{"line":26,"column":165}},"37":{"start":{"line":26,"column":166},"end":{"line":26,"column":173}},"38":{"start":{"line":26,"column":176},"end":{"line":26,"column":263}},"39":{"start":{"line":26,"column":193},"end":{"line":26,"column":208}},"40":{"start":{"line":26,"column":218},"end":{"line":26,"column":261}},"41":{"start":{"line":28,"column":33},"end":{"line":28,"column":387}},"42":{"start":{"line":28,"column":65},"end":{"line":28,"column":69}},"43":{"start":{"line":28,"column":78},"end":{"line":28,"column":87}},"44":{"start":{"line":28,"column":89},"end":{"line":28,"column":384}},"45":{"start":{"line":28,"column":147},"end":{"line":28,"column":167}},"46":{"start":{"line":28,"column":193},"end":{"line":28,"column":264}},"47":{"start":{"line":28,"column":290},"end":{"line":28,"column":360}},"48":{"start":{"line":28,"column":363},"end":{"line":28,"column":380}},"49":{"start":{"line":30,"column":50},"end":{"line":30,"column":151}},"50":{"start":{"line":30,"column":92},"end":{"line":30,"column":149}},"51":{"start":{"line":32,"column":44},"end":{"line":32,"column":315}},"52":{"start":{"line":32,"column":57},"end":{"line":32,"column":58}},"53":{"start":{"line":32,"column":102},"end":{"line":32,"column":110}},"54":{"start":{"line":32,"column":112},"end":{"line":32,"column":167}},"55":{"start":{"line":32,"column":168},"end":{"line":32,"column":199}},"56":{"start":{"line":32,"column":200},"end":{"line":32,"column":254}},"57":{"start":{"line":32,"column":227},"end":{"line":32,"column":254}},"58":{"start":{"line":32,"column":255},"end":{"line":32,"column":313}},"59":{"start":{"line":34,"column":62},"end":{"line":34,"column":131}},"60":{"start":{"line":34,"column":78},"end":{"line":34,"column":131}},"61":{"start":{"line":34,"column":132},"end":{"line":34,"column":193}},"62":{"start":{"line":34,"column":149},"end":{"line":34,"column":193}},"63":{"start":{"line":34,"column":194},"end":{"line":34,"column":213}},"64":{"start":{"line":36,"column":50},"end":{"line":36,"column":138}},"65":{"start":{"line":36,"column":124},"end":{"line":36,"column":136}},"66":{"start":{"line":36,"column":139},"end":{"line":36,"column":175}},"67":{"start":{"line":38,"column":30},"end":{"line":38,"column":176}},"68":{"start":{"line":38,"column":126},"end":{"line":38,"column":173}},"69":{"start":{"line":38,"column":177},"end":{"line":38,"column":203}},"70":{"start":{"line":40,"column":40},"end":{"line":40,"column":151}},"71":{"start":{"line":40,"column":63},"end":{"line":40,"column":149}},"72":{"start":{"line":40,"column":152},"end":{"line":40,"column":164}},"73":{"start":{"line":42,"column":43},"end":{"line":42,"column":182}},"74":{"start":{"line":42,"column":106},"end":{"line":42,"column":180}},"75":{"start":{"line":42,"column":183},"end":{"line":42,"column":328}},"76":{"start":{"line":42,"column":329},"end":{"line":42,"column":383}},"77":{"start":{"line":42,"column":345},"end":{"line":42,"column":383}},"78":{"start":{"line":44,"column":33},"end":{"line":44,"column":138}},"79":{"start":{"line":44,"column":109},"end":{"line":44,"column":125}},"80":{"start":{"line":44,"column":126},"end":{"line":44,"column":135}},"81":{"start":{"line":44,"column":139},"end":{"line":44,"column":168}},"82":{"start":{"line":46,"column":44},"end":{"line":46,"column":195}},"83":{"start":{"line":46,"column":62},"end":{"line":46,"column":166}},"84":{"start":{"line":46,"column":176},"end":{"line":46,"column":193}},"85":{"start":{"line":46,"column":196},"end":{"line":46,"column":207}},"86":{"start":{"line":48,"column":30},"end":{"line":48,"column":32}},"87":{"start":{"line":55,"column":0},"end":{"line":418,"column":39}},"88":{"start":{"line":56,"column":2},"end":{"line":56,"column":44}},"89":{"start":{"line":61,"column":4},"end":{"line":61,"column":38}},"90":{"start":{"line":63,"column":4},"end":{"line":63,"column":85}},"91":{"start":{"line":65,"column":4},"end":{"line":65,"column":69}},"92":{"start":{"line":67,"column":4},"end":{"line":67,"column":81}},"93":{"start":{"line":69,"column":4},"end":{"line":69,"column":79}},"94":{"start":{"line":71,"column":4},"end":{"line":71,"column":79}},"95":{"start":{"line":73,"column":4},"end":{"line":73,"column":26}},"96":{"start":{"line":74,"column":4},"end":{"line":74,"column":17}},"97":{"start":{"line":83,"column":2},"end":{"line":415,"column":6}},"98":{"start":{"line":86,"column":20},"end":{"line":86,"column":45}},"99":{"start":{"line":87,"column":16},"end":{"line":91,"column":8}},"100":{"start":{"line":92,"column":6},"end":{"line":92,"column":34}},"101":{"start":{"line":94,"column":6},"end":{"line":100,"column":7}},"102":{"start":{"line":95,"column":8},"end":{"line":95,"column":87}},"103":{"start":{"line":95,"column":36},"end":{"line":95,"column":87}},"104":{"start":{"line":96,"column":34},"end":{"line":96,"column":116}},"105":{"start":{"line":97,"column":8},"end":{"line":97,"column":71}},"106":{"start":{"line":98,"column":8},"end":{"line":98,"column":35}},"107":{"start":{"line":99,"column":8},"end":{"line":99,"column":55}},"108":{"start":{"line":102,"column":6},"end":{"line":102,"column":17}},"109":{"start":{"line":107,"column":20},"end":{"line":124,"column":8}},"110":{"start":{"line":108,"column":22},"end":{"line":108,"column":47}},"111":{"start":{"line":110,"column":8},"end":{"line":121,"column":9}},"112":{"start":{"line":111,"column":10},"end":{"line":120,"column":11}},"113":{"start":{"line":112,"column":28},"end":{"line":112,"column":84}},"114":{"start":{"line":114,"column":22},"end":{"line":114,"column":52}},"115":{"start":{"line":116,"column":12},"end":{"line":116,"column":40}},"116":{"start":{"line":117,"column":12},"end":{"line":117,"column":23}},"117":{"start":{"line":119,"column":12},"end":{"line":119,"column":72}},"118":{"start":{"line":123,"column":8},"end":{"line":123,"column":38}},"119":{"start":{"line":127,"column":8},"end":{"line":127,"column":46}},"120":{"start":{"line":130,"column":6},"end":{"line":130,"column":20}},"121":{"start":{"line":135,"column":28},"end":{"line":139,"column":8}},"122":{"start":{"line":136,"column":18},"end":{"line":136,"column":44}},"123":{"start":{"line":137,"column":8},"end":{"line":137,"column":42}},"124":{"start":{"line":138,"column":8},"end":{"line":138,"column":19}},"125":{"start":{"line":142,"column":8},"end":{"line":142,"column":54}},"126":{"start":{"line":145,"column":6},"end":{"line":145,"column":28}},"127":{"start":{"line":155,"column":23},"end":{"line":163,"column":8}},"128":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"129":{"start":{"line":157,"column":10},"end":{"line":157,"column":39}},"130":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"131":{"start":{"line":161,"column":10},"end":{"line":161,"column":73}},"132":{"start":{"line":166,"column":8},"end":{"line":166,"column":49}},"133":{"start":{"line":169,"column":6},"end":{"line":169,"column":23}},"134":{"start":{"line":180,"column":29},"end":{"line":187,"column":8}},"135":{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},"136":{"start":{"line":182,"column":10},"end":{"line":182,"column":66}},"137":{"start":{"line":185,"column":18},"end":{"line":185,"column":52}},"138":{"start":{"line":186,"column":8},"end":{"line":186,"column":48}},"139":{"start":{"line":190,"column":8},"end":{"line":190,"column":55}},"140":{"start":{"line":193,"column":6},"end":{"line":193,"column":29}},"141":{"start":{"line":198,"column":35},"end":{"line":230,"column":8}},"142":{"start":{"line":199,"column":8},"end":{"line":201,"column":9}},"143":{"start":{"line":200,"column":10},"end":{"line":200,"column":101}},"144":{"start":{"line":203,"column":8},"end":{"line":214,"column":9}},"145":{"start":{"line":204,"column":10},"end":{"line":206,"column":11}},"146":{"start":{"line":205,"column":12},"end":{"line":205,"column":84}},"147":{"start":{"line":210,"column":26},"end":{"line":210,"column":132}},"148":{"start":{"line":212,"column":10},"end":{"line":212,"column":58}},"149":{"start":{"line":213,"column":10},"end":{"line":213,"column":27}},"150":{"start":{"line":216,"column":26},"end":{"line":216,"column":52}},"151":{"start":{"line":218,"column":8},"end":{"line":218,"column":91}},"152":{"start":{"line":219,"column":21},"end":{"line":219,"column":72}},"153":{"start":{"line":221,"column":8},"end":{"line":223,"column":9}},"154":{"start":{"line":222,"column":10},"end":{"line":222,"column":156}},"155":{"start":{"line":225,"column":23},"end":{"line":225,"column":122}},"156":{"start":{"line":226,"column":8},"end":{"line":226,"column":48}},"157":{"start":{"line":228,"column":8},"end":{"line":228,"column":56}},"158":{"start":{"line":229,"column":8},"end":{"line":229,"column":24}},"159":{"start":{"line":233,"column":8},"end":{"line":233,"column":61}},"160":{"start":{"line":236,"column":6},"end":{"line":236,"column":35}},"161":{"start":{"line":247,"column":25},"end":{"line":256,"column":8}},"162":{"start":{"line":248,"column":18},"end":{"line":248,"column":91}},"163":{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},"164":{"start":{"line":251,"column":10},"end":{"line":251,"column":103}},"165":{"start":{"line":254,"column":18},"end":{"line":254,"column":52}},"166":{"start":{"line":255,"column":8},"end":{"line":255,"column":51}},"167":{"start":{"line":259,"column":8},"end":{"line":259,"column":51}},"168":{"start":{"line":262,"column":6},"end":{"line":262,"column":25}},"169":{"start":{"line":272,"column":23},"end":{"line":286,"column":8}},"170":{"start":{"line":273,"column":21},"end":{"line":273,"column":39}},"171":{"start":{"line":275,"column":8},"end":{"line":278,"column":9}},"172":{"start":{"line":276,"column":29},"end":{"line":276,"column":83}},"173":{"start":{"line":277,"column":10},"end":{"line":277,"column":91}},"174":{"start":{"line":280,"column":8},"end":{"line":282,"column":9}},"175":{"start":{"line":281,"column":10},"end":{"line":281,"column":41}},"176":{"start":{"line":284,"column":8},"end":{"line":284,"column":111}},"177":{"start":{"line":284,"column":28},"end":{"line":284,"column":111}},"178":{"start":{"line":285,"column":8},"end":{"line":285,"column":55}},"179":{"start":{"line":289,"column":8},"end":{"line":289,"column":49}},"180":{"start":{"line":292,"column":6},"end":{"line":292,"column":23}},"181":{"start":{"line":311,"column":20},"end":{"line":323,"column":8}},"182":{"start":{"line":312,"column":8},"end":{"line":312,"column":99}},"183":{"start":{"line":312,"column":36},"end":{"line":312,"column":99}},"184":{"start":{"line":313,"column":26},"end":{"line":313,"column":93}},"185":{"start":{"line":315,"column":8},"end":{"line":319,"column":9}},"186":{"start":{"line":316,"column":10},"end":{"line":316,"column":100}},"187":{"start":{"line":318,"column":10},"end":{"line":318,"column":48}},"188":{"start":{"line":321,"column":8},"end":{"line":321,"column":43}},"189":{"start":{"line":322,"column":8},"end":{"line":322,"column":34}},"190":{"start":{"line":326,"column":8},"end":{"line":326,"column":46}},"191":{"start":{"line":329,"column":6},"end":{"line":329,"column":20}},"192":{"start":{"line":340,"column":28},"end":{"line":348,"column":8}},"193":{"start":{"line":341,"column":8},"end":{"line":341,"column":99}},"194":{"start":{"line":341,"column":36},"end":{"line":341,"column":99}},"195":{"start":{"line":343,"column":26},"end":{"line":345,"column":10}},"196":{"start":{"line":346,"column":8},"end":{"line":346,"column":74}},"197":{"start":{"line":347,"column":8},"end":{"line":347,"column":38}},"198":{"start":{"line":351,"column":8},"end":{"line":351,"column":54}},"199":{"start":{"line":354,"column":6},"end":{"line":354,"column":28}},"200":{"start":{"line":363,"column":21},"end":{"line":371,"column":8}},"201":{"start":{"line":364,"column":8},"end":{"line":364,"column":99}},"202":{"start":{"line":364,"column":36},"end":{"line":364,"column":99}},"203":{"start":{"line":366,"column":8},"end":{"line":370,"column":9}},"204":{"start":{"line":367,"column":10},"end":{"line":367,"column":96}},"205":{"start":{"line":369,"column":10},"end":{"line":369,"column":23}},"206":{"start":{"line":374,"column":8},"end":{"line":374,"column":47}},"207":{"start":{"line":377,"column":6},"end":{"line":377,"column":21}},"208":{"start":{"line":386,"column":23},"end":{"line":392,"column":8}},"209":{"start":{"line":387,"column":8},"end":{"line":387,"column":26}},"210":{"start":{"line":389,"column":8},"end":{"line":391,"column":9}},"211":{"start":{"line":390,"column":10},"end":{"line":390,"column":62}},"212":{"start":{"line":395,"column":8},"end":{"line":395,"column":49}},"213":{"start":{"line":398,"column":6},"end":{"line":398,"column":23}},"214":{"start":{"line":407,"column":6},"end":{"line":407,"column":40}},"215":{"start":{"line":408,"column":6},"end":{"line":408,"column":30}},"216":{"start":{"line":413,"column":6},"end":{"line":413,"column":58}},"217":{"start":{"line":417,"column":2},"end":{"line":417,"column":20}},"218":{"start":{"line":420,"column":0},"end":{"line":420,"column":32}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":16}},"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":351}},"line":20},"1":{"name":"_typeof","decl":{"start":{"line":20,"column":118},"end":{"line":20,"column":125}},"loc":{"start":{"line":20,"column":131},"end":{"line":20,"column":153}},"line":20},"2":{"name":"_typeof","decl":{"start":{"line":20,"column":183},"end":{"line":20,"column":190}},"loc":{"start":{"line":20,"column":196},"end":{"line":20,"column":325}},"line":20},"3":{"name":"ownKeys","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":16}},"loc":{"start":{"line":22,"column":41},"end":{"line":22,"column":341}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":208},"end":{"line":22,"column":209}},"loc":{"start":{"line":22,"column":223},"end":{"line":22,"column":290}},"line":22},"5":{"name":"_objectSpread","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":22}},"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":534}},"line":24},"6":{"name":"(anonymous_6)","decl":{"start":{"line":24,"column":184},"end":{"line":24,"column":185}},"loc":{"start":{"line":24,"column":199},"end":{"line":24,"column":245}},"line":24},"7":{"name":"(anonymous_7)","decl":{"start":{"line":24,"column":411},"end":{"line":24,"column":412}},"loc":{"start":{"line":24,"column":426},"end":{"line":24,"column":511}},"line":24},"8":{"name":"asyncGeneratorStep","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":27}},"loc":{"start":{"line":26,"column":75},"end":{"line":26,"column":265}},"line":26},"9":{"name":"_asyncToGenerator","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":389}},"line":28},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":40},"end":{"line":28,"column":41}},"loc":{"start":{"line":28,"column":52},"end":{"line":28,"column":386}},"line":28},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":108},"end":{"line":28,"column":109}},"loc":{"start":{"line":28,"column":135},"end":{"line":28,"column":382}},"line":28},"12":{"name":"_next","decl":{"start":{"line":28,"column":178},"end":{"line":28,"column":183}},"loc":{"start":{"line":28,"column":191},"end":{"line":28,"column":266}},"line":28},"13":{"name":"_throw","decl":{"start":{"line":28,"column":276},"end":{"line":28,"column":282}},"loc":{"start":{"line":28,"column":288},"end":{"line":28,"column":362}},"line":28},"14":{"name":"_classCallCheck","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":153}},"line":30},"15":{"name":"_defineProperties","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":26}},"loc":{"start":{"line":32,"column":42},"end":{"line":32,"column":317}},"line":32},"16":{"name":"_createClass","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":21}},"loc":{"start":{"line":34,"column":60},"end":{"line":34,"column":215}},"line":34},"17":{"name":"_possibleConstructorReturn","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":35}},"loc":{"start":{"line":36,"column":48},"end":{"line":36,"column":177}},"line":36},"18":{"name":"_getPrototypeOf","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":28},"end":{"line":38,"column":205}},"line":38},"19":{"name":"_getPrototypeOf","decl":{"start":{"line":38,"column":105},"end":{"line":38,"column":120}},"loc":{"start":{"line":38,"column":124},"end":{"line":38,"column":175}},"line":38},"20":{"name":"_assertThisInitialized","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":31}},"loc":{"start":{"line":40,"column":38},"end":{"line":40,"column":166}},"line":40},"21":{"name":"_inherits","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":18}},"loc":{"start":{"line":42,"column":41},"end":{"line":42,"column":385}},"line":42},"22":{"name":"_setPrototypeOf","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":24}},"loc":{"start":{"line":44,"column":31},"end":{"line":44,"column":170}},"line":44},"23":{"name":"_setPrototypeOf","decl":{"start":{"line":44,"column":85},"end":{"line":44,"column":100}},"loc":{"start":{"line":44,"column":107},"end":{"line":44,"column":137}},"line":44},"24":{"name":"_defineProperty","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":24}},"loc":{"start":{"line":46,"column":42},"end":{"line":46,"column":209}},"line":46},"25":{"name":"(anonymous_25)","decl":{"start":{"line":55,"column":0},"end":{"line":55,"column":1}},"loc":{"start":{"line":55,"column":30},"end":{"line":418,"column":1}},"line":55},"26":{"name":"KeyManager","decl":{"start":{"line":58,"column":11},"end":{"line":58,"column":21}},"loc":{"start":{"line":58,"column":30},"end":{"line":75,"column":3}},"line":58},"27":{"name":"addKey","decl":{"start":{"line":85,"column":20},"end":{"line":85,"column":26}},"loc":{"start":{"line":85,"column":48},"end":{"line":103,"column":5}},"line":85},"28":{"name":"(anonymous_28)","decl":{"start":{"line":106,"column":11},"end":{"line":106,"column":12}},"loc":{"start":{"line":106,"column":23},"end":{"line":131,"column":5}},"line":106},"29":{"name":"(anonymous_29)","decl":{"start":{"line":107,"column":38},"end":{"line":107,"column":39}},"loc":{"start":{"line":107,"column":58},"end":{"line":124,"column":7}},"line":107},"30":{"name":"getKey","decl":{"start":{"line":126,"column":15},"end":{"line":126,"column":21}},"loc":{"start":{"line":126,"column":26},"end":{"line":128,"column":7}},"line":126},"31":{"name":"(anonymous_31)","decl":{"start":{"line":134,"column":11},"end":{"line":134,"column":12}},"loc":{"start":{"line":134,"column":23},"end":{"line":146,"column":5}},"line":134},"32":{"name":"(anonymous_32)","decl":{"start":{"line":135,"column":46},"end":{"line":135,"column":47}},"loc":{"start":{"line":135,"column":66},"end":{"line":139,"column":7}},"line":135},"33":{"name":"getUnlockedKey","decl":{"start":{"line":141,"column":15},"end":{"line":141,"column":29}},"loc":{"start":{"line":141,"column":35},"end":{"line":143,"column":7}},"line":141},"34":{"name":"(anonymous_34)","decl":{"start":{"line":154,"column":11},"end":{"line":154,"column":12}},"loc":{"start":{"line":154,"column":23},"end":{"line":170,"column":5}},"line":154},"35":{"name":"(anonymous_35)","decl":{"start":{"line":155,"column":41},"end":{"line":155,"column":42}},"loc":{"start":{"line":155,"column":61},"end":{"line":163,"column":7}},"line":155},"36":{"name":"removeKey","decl":{"start":{"line":165,"column":15},"end":{"line":165,"column":24}},"loc":{"start":{"line":165,"column":30},"end":{"line":167,"column":7}},"line":165},"37":{"name":"(anonymous_37)","decl":{"start":{"line":179,"column":11},"end":{"line":179,"column":12}},"loc":{"start":{"line":179,"column":23},"end":{"line":194,"column":5}},"line":179},"38":{"name":"(anonymous_38)","decl":{"start":{"line":180,"column":47},"end":{"line":180,"column":48}},"loc":{"start":{"line":180,"column":80},"end":{"line":187,"column":7}},"line":180},"39":{"name":"signTransaction","decl":{"start":{"line":189,"column":15},"end":{"line":189,"column":30}},"loc":{"start":{"line":189,"column":41},"end":{"line":191,"column":7}},"line":189},"40":{"name":"(anonymous_40)","decl":{"start":{"line":197,"column":11},"end":{"line":197,"column":12}},"loc":{"start":{"line":197,"column":23},"end":{"line":237,"column":5}},"line":197},"41":{"name":"(anonymous_41)","decl":{"start":{"line":198,"column":53},"end":{"line":198,"column":54}},"loc":{"start":{"line":198,"column":77},"end":{"line":230,"column":7}},"line":198},"42":{"name":"signTransactionLedger","decl":{"start":{"line":232,"column":15},"end":{"line":232,"column":36}},"loc":{"start":{"line":232,"column":47},"end":{"line":234,"column":7}},"line":232},"43":{"name":"(anonymous_43)","decl":{"start":{"line":246,"column":11},"end":{"line":246,"column":12}},"loc":{"start":{"line":246,"column":23},"end":{"line":263,"column":5}},"line":246},"44":{"name":"(anonymous_44)","decl":{"start":{"line":247,"column":43},"end":{"line":247,"column":44}},"loc":{"start":{"line":247,"column":72},"end":{"line":256,"column":7}},"line":247},"45":{"name":"signMessage","decl":{"start":{"line":258,"column":15},"end":{"line":258,"column":26}},"loc":{"start":{"line":258,"column":37},"end":{"line":260,"column":7}},"line":258},"46":{"name":"(anonymous_46)","decl":{"start":{"line":271,"column":11},"end":{"line":271,"column":12}},"loc":{"start":{"line":271,"column":23},"end":{"line":293,"column":5}},"line":271},"47":{"name":"(anonymous_47)","decl":{"start":{"line":272,"column":41},"end":{"line":272,"column":42}},"loc":{"start":{"line":272,"column":64},"end":{"line":286,"column":7}},"line":272},"48":{"name":"importKey","decl":{"start":{"line":288,"column":15},"end":{"line":288,"column":24}},"loc":{"start":{"line":288,"column":31},"end":{"line":290,"column":7}},"line":288},"49":{"name":"(anonymous_49)","decl":{"start":{"line":310,"column":11},"end":{"line":310,"column":12}},"loc":{"start":{"line":310,"column":23},"end":{"line":330,"column":5}},"line":310},"50":{"name":"(anonymous_50)","decl":{"start":{"line":311,"column":38},"end":{"line":311,"column":39}},"loc":{"start":{"line":311,"column":61},"end":{"line":323,"column":7}},"line":311},"51":{"name":"unlock","decl":{"start":{"line":325,"column":15},"end":{"line":325,"column":21}},"loc":{"start":{"line":325,"column":28},"end":{"line":327,"column":7}},"line":325},"52":{"name":"(anonymous_52)","decl":{"start":{"line":339,"column":11},"end":{"line":339,"column":12}},"loc":{"start":{"line":339,"column":23},"end":{"line":355,"column":5}},"line":339},"53":{"name":"(anonymous_53)","decl":{"start":{"line":340,"column":46},"end":{"line":340,"column":47}},"loc":{"start":{"line":340,"column":76},"end":{"line":348,"column":7}},"line":340},"54":{"name":"setupAndUnlock","decl":{"start":{"line":350,"column":15},"end":{"line":350,"column":29}},"loc":{"start":{"line":350,"column":42},"end":{"line":352,"column":7}},"line":350},"55":{"name":"(anonymous_55)","decl":{"start":{"line":362,"column":11},"end":{"line":362,"column":12}},"loc":{"start":{"line":362,"column":23},"end":{"line":378,"column":5}},"line":362},"56":{"name":"(anonymous_56)","decl":{"start":{"line":363,"column":39},"end":{"line":363,"column":40}},"loc":{"start":{"line":363,"column":52},"end":{"line":371,"column":7}},"line":363},"57":{"name":"isSetup","decl":{"start":{"line":373,"column":15},"end":{"line":373,"column":22}},"loc":{"start":{"line":373,"column":25},"end":{"line":375,"column":7}},"line":373},"58":{"name":"(anonymous_58)","decl":{"start":{"line":385,"column":11},"end":{"line":385,"column":12}},"loc":{"start":{"line":385,"column":23},"end":{"line":399,"column":5}},"line":385},"59":{"name":"(anonymous_59)","decl":{"start":{"line":386,"column":41},"end":{"line":386,"column":42}},"loc":{"start":{"line":386,"column":54},"end":{"line":392,"column":7}},"line":386},"60":{"name":"clearKeys","decl":{"start":{"line":394,"column":15},"end":{"line":394,"column":24}},"loc":{"start":{"line":394,"column":27},"end":{"line":396,"column":7}},"line":394},"61":{"name":"lock","decl":{"start":{"line":406,"column":20},"end":{"line":406,"column":24}},"loc":{"start":{"line":406,"column":27},"end":{"line":409,"column":5}},"line":406},"62":{"name":"get","decl":{"start":{"line":412,"column":18},"end":{"line":412,"column":21}},"loc":{"start":{"line":412,"column":24},"end":{"line":414,"column":5}},"line":412}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":24},"end":{"line":20,"column":328}},"type":"if","locations":[{"start":{"line":20,"column":24},"end":{"line":20,"column":328}},{"start":{"line":20,"column":24},"end":{"line":20,"column":328}}],"line":20},"1":{"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":95}},"type":"binary-expr","locations":[{"start":{"line":20,"column":28},"end":{"line":20,"column":56}},{"start":{"line":20,"column":60},"end":{"line":20,"column":95}}],"line":20},"2":{"loc":{"start":{"line":20,"column":205},"end":{"line":20,"column":322}},"type":"cond-expr","locations":[{"start":{"line":20,"column":301},"end":{"line":20,"column":309}},{"start":{"line":20,"column":312},"end":{"line":20,"column":322}}],"line":20},"3":{"loc":{"start":{"line":20,"column":205},"end":{"line":20,"column":298}},"type":"binary-expr","locations":[{"start":{"line":20,"column":205},"end":{"line":20,"column":208}},{"start":{"line":20,"column":212},"end":{"line":20,"column":240}},{"start":{"line":20,"column":244},"end":{"line":20,"column":270}},{"start":{"line":20,"column":274},"end":{"line":20,"column":298}}],"line":20},"4":{"loc":{"start":{"line":22,"column":75},"end":{"line":22,"column":326}},"type":"if","locations":[{"start":{"line":22,"column":75},"end":{"line":22,"column":326}},{"start":{"line":22,"column":75},"end":{"line":22,"column":326}}],"line":22},"5":{"loc":{"start":{"line":22,"column":163},"end":{"line":22,"column":292}},"type":"if","locations":[{"start":{"line":22,"column":163},"end":{"line":22,"column":292}},{"start":{"line":22,"column":163},"end":{"line":22,"column":292}}],"line":22},"6":{"loc":{"start":{"line":24,"column":91},"end":{"line":24,"column":131}},"type":"cond-expr","locations":[{"start":{"line":24,"column":114},"end":{"line":24,"column":126}},{"start":{"line":24,"column":129},"end":{"line":24,"column":131}}],"line":24},"7":{"loc":{"start":{"line":24,"column":133},"end":{"line":24,"column":515}},"type":"if","locations":[{"start":{"line":24,"column":133},"end":{"line":24,"column":515}},{"start":{"line":24,"column":133},"end":{"line":24,"column":515}}],"line":24},"8":{"loc":{"start":{"line":24,"column":255},"end":{"line":24,"column":515}},"type":"if","locations":[{"start":{"line":24,"column":255},"end":{"line":24,"column":515}},{"start":{"line":24,"column":255},"end":{"line":24,"column":515}}],"line":24},"9":{"loc":{"start":{"line":26,"column":176},"end":{"line":26,"column":263}},"type":"if","locations":[{"start":{"line":26,"column":176},"end":{"line":26,"column":263}},{"start":{"line":26,"column":176},"end":{"line":26,"column":263}}],"line":26},"10":{"loc":{"start":{"line":30,"column":50},"end":{"line":30,"column":151}},"type":"if","locations":[{"start":{"line":30,"column":50},"end":{"line":30,"column":151}},{"start":{"line":30,"column":50},"end":{"line":30,"column":151}}],"line":30},"11":{"loc":{"start":{"line":32,"column":136},"end":{"line":32,"column":166}},"type":"binary-expr","locations":[{"start":{"line":32,"column":136},"end":{"line":32,"column":157}},{"start":{"line":32,"column":161},"end":{"line":32,"column":166}}],"line":32},"12":{"loc":{"start":{"line":32,"column":200},"end":{"line":32,"column":254}},"type":"if","locations":[{"start":{"line":32,"column":200},"end":{"line":32,"column":254}},{"start":{"line":32,"column":200},"end":{"line":32,"column":254}}],"line":32},"13":{"loc":{"start":{"line":34,"column":62},"end":{"line":34,"column":131}},"type":"if","locations":[{"start":{"line":34,"column":62},"end":{"line":34,"column":131}},{"start":{"line":34,"column":62},"end":{"line":34,"column":131}}],"line":34},"14":{"loc":{"start":{"line":34,"column":132},"end":{"line":34,"column":193}},"type":"if","locations":[{"start":{"line":34,"column":132},"end":{"line":34,"column":193}},{"start":{"line":34,"column":132},"end":{"line":34,"column":193}}],"line":34},"15":{"loc":{"start":{"line":36,"column":50},"end":{"line":36,"column":138}},"type":"if","locations":[{"start":{"line":36,"column":50},"end":{"line":36,"column":138}},{"start":{"line":36,"column":50},"end":{"line":36,"column":138}}],"line":36},"16":{"loc":{"start":{"line":36,"column":54},"end":{"line":36,"column":120}},"type":"binary-expr","locations":[{"start":{"line":36,"column":54},"end":{"line":36,"column":58}},{"start":{"line":36,"column":63},"end":{"line":36,"column":89}},{"start":{"line":36,"column":93},"end":{"line":36,"column":119}}],"line":36},"17":{"loc":{"start":{"line":38,"column":48},"end":{"line":38,"column":175}},"type":"cond-expr","locations":[{"start":{"line":38,"column":72},"end":{"line":38,"column":93}},{"start":{"line":38,"column":96},"end":{"line":38,"column":175}}],"line":38},"18":{"loc":{"start":{"line":38,"column":133},"end":{"line":38,"column":172}},"type":"binary-expr","locations":[{"start":{"line":38,"column":133},"end":{"line":38,"column":144}},{"start":{"line":38,"column":148},"end":{"line":38,"column":172}}],"line":38},"19":{"loc":{"start":{"line":40,"column":40},"end":{"line":40,"column":151}},"type":"if","locations":[{"start":{"line":40,"column":40},"end":{"line":40,"column":151}},{"start":{"line":40,"column":40},"end":{"line":40,"column":151}}],"line":40},"20":{"loc":{"start":{"line":42,"column":43},"end":{"line":42,"column":182}},"type":"if","locations":[{"start":{"line":42,"column":43},"end":{"line":42,"column":182}},{"start":{"line":42,"column":43},"end":{"line":42,"column":182}}],"line":42},"21":{"loc":{"start":{"line":42,"column":47},"end":{"line":42,"column":102}},"type":"binary-expr","locations":[{"start":{"line":42,"column":47},"end":{"line":42,"column":79}},{"start":{"line":42,"column":83},"end":{"line":42,"column":102}}],"line":42},"22":{"loc":{"start":{"line":42,"column":218},"end":{"line":42,"column":252}},"type":"binary-expr","locations":[{"start":{"line":42,"column":218},"end":{"line":42,"column":228}},{"start":{"line":42,"column":232},"end":{"line":42,"column":252}}],"line":42},"23":{"loc":{"start":{"line":42,"column":329},"end":{"line":42,"column":383}},"type":"if","locations":[{"start":{"line":42,"column":329},"end":{"line":42,"column":383}},{"start":{"line":42,"column":329},"end":{"line":42,"column":383}}],"line":42},"24":{"loc":{"start":{"line":44,"column":51},"end":{"line":44,"column":137}},"type":"binary-expr","locations":[{"start":{"line":44,"column":51},"end":{"line":44,"column":72}},{"start":{"line":44,"column":76},"end":{"line":44,"column":137}}],"line":44},"25":{"loc":{"start":{"line":46,"column":44},"end":{"line":46,"column":195}},"type":"if","locations":[{"start":{"line":46,"column":44},"end":{"line":46,"column":195}},{"start":{"line":46,"column":44},"end":{"line":46,"column":195}}],"line":46},"26":{"loc":{"start":{"line":94,"column":6},"end":{"line":100,"column":7}},"type":"if","locations":[{"start":{"line":94,"column":6},"end":{"line":100,"column":7}},{"start":{"line":94,"column":6},"end":{"line":100,"column":7}}],"line":94},"27":{"loc":{"start":{"line":95,"column":8},"end":{"line":95,"column":87}},"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":95,"column":87}},{"start":{"line":95,"column":8},"end":{"line":95,"column":87}}],"line":95},"28":{"loc":{"start":{"line":110,"column":8},"end":{"line":121,"column":9}},"type":"if","locations":[{"start":{"line":110,"column":8},"end":{"line":121,"column":9}},{"start":{"line":110,"column":8},"end":{"line":121,"column":9}}],"line":110},"29":{"loc":{"start":{"line":110,"column":12},"end":{"line":110,"column":59}},"type":"binary-expr","locations":[{"start":{"line":110,"column":12},"end":{"line":110,"column":35}},{"start":{"line":110,"column":39},"end":{"line":110,"column":59}}],"line":110},"30":{"loc":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},{"start":{"line":156,"column":8},"end":{"line":158,"column":9}}],"line":156},"31":{"loc":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},{"start":{"line":160,"column":8},"end":{"line":162,"column":9}}],"line":160},"32":{"loc":{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},{"start":{"line":181,"column":8},"end":{"line":183,"column":9}}],"line":181},"33":{"loc":{"start":{"line":199,"column":8},"end":{"line":201,"column":9}},"type":"if","locations":[{"start":{"line":199,"column":8},"end":{"line":201,"column":9}},{"start":{"line":199,"column":8},"end":{"line":201,"column":9}}],"line":199},"34":{"loc":{"start":{"line":203,"column":8},"end":{"line":214,"column":9}},"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":214,"column":9}},{"start":{"line":203,"column":8},"end":{"line":214,"column":9}}],"line":203},"35":{"loc":{"start":{"line":204,"column":10},"end":{"line":206,"column":11}},"type":"if","locations":[{"start":{"line":204,"column":10},"end":{"line":206,"column":11}},{"start":{"line":204,"column":10},"end":{"line":206,"column":11}}],"line":204},"36":{"loc":{"start":{"line":221,"column":8},"end":{"line":223,"column":9}},"type":"if","locations":[{"start":{"line":221,"column":8},"end":{"line":223,"column":9}},{"start":{"line":221,"column":8},"end":{"line":223,"column":9}}],"line":221},"37":{"loc":{"start":{"line":248,"column":18},"end":{"line":248,"column":91}},"type":"cond-expr","locations":[{"start":{"line":248,"column":71},"end":{"line":248,"column":83}},{"start":{"line":248,"column":86},"end":{"line":248,"column":91}}],"line":248},"38":{"loc":{"start":{"line":248,"column":18},"end":{"line":248,"column":68}},"type":"binary-expr","locations":[{"start":{"line":248,"column":18},"end":{"line":248,"column":38}},{"start":{"line":248,"column":42},"end":{"line":248,"column":68}}],"line":248},"39":{"loc":{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},{"start":{"line":250,"column":8},"end":{"line":252,"column":9}}],"line":250},"40":{"loc":{"start":{"line":275,"column":8},"end":{"line":278,"column":9}},"type":"if","locations":[{"start":{"line":275,"column":8},"end":{"line":278,"column":9}},{"start":{"line":275,"column":8},"end":{"line":278,"column":9}}],"line":275},"41":{"loc":{"start":{"line":275,"column":12},"end":{"line":275,"column":98}},"type":"binary-expr","locations":[{"start":{"line":275,"column":12},"end":{"line":275,"column":55}},{"start":{"line":275,"column":59},"end":{"line":275,"column":98}}],"line":275},"42":{"loc":{"start":{"line":280,"column":8},"end":{"line":282,"column":9}},"type":"if","locations":[{"start":{"line":280,"column":8},"end":{"line":282,"column":9}},{"start":{"line":280,"column":8},"end":{"line":282,"column":9}}],"line":280},"43":{"loc":{"start":{"line":284,"column":8},"end":{"line":284,"column":111}},"type":"if","locations":[{"start":{"line":284,"column":8},"end":{"line":284,"column":111}},{"start":{"line":284,"column":8},"end":{"line":284,"column":111}}],"line":284},"44":{"loc":{"start":{"line":312,"column":8},"end":{"line":312,"column":99}},"type":"if","locations":[{"start":{"line":312,"column":8},"end":{"line":312,"column":99}},{"start":{"line":312,"column":8},"end":{"line":312,"column":99}}],"line":312},"45":{"loc":{"start":{"line":341,"column":8},"end":{"line":341,"column":99}},"type":"if","locations":[{"start":{"line":341,"column":8},"end":{"line":341,"column":99}},{"start":{"line":341,"column":8},"end":{"line":341,"column":99}}],"line":341},"46":{"loc":{"start":{"line":364,"column":8},"end":{"line":364,"column":99}},"type":"if","locations":[{"start":{"line":364,"column":8},"end":{"line":364,"column":99}},{"start":{"line":364,"column":8},"end":{"line":364,"column":99}}],"line":364},"47":{"loc":{"start":{"line":389,"column":8},"end":{"line":391,"column":9}},"type":"if","locations":[{"start":{"line":389,"column":8},"end":{"line":391,"column":9}},{"start":{"line":389,"column":8},"end":{"line":391,"column":9}}],"line":389}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":6,"28":0,"29":0,"30":0,"31":0,"32":1,"33":63,"34":63,"35":58,"36":5,"37":5,"38":58,"39":30,"40":28,"41":11,"42":35,"43":35,"44":35,"45":35,"46":60,"47":3,"48":35,"49":6,"50":0,"51":1,"52":1,"53":14,"54":14,"55":14,"56":14,"57":13,"58":14,"59":1,"60":1,"61":1,"62":0,"63":1,"64":6,"65":0,"66":6,"67":1,"68":0,"69":1,"70":30,"71":0,"72":30,"73":1,"74":0,"75":1,"76":1,"77":1,"78":1,"79":0,"80":0,"81":1,"82":30,"83":0,"84":30,"85":30,"86":1,"87":1,"88":1,"89":6,"90":6,"91":6,"92":6,"93":6,"94":6,"95":6,"96":6,"97":1,"98":5,"99":5,"100":5,"101":5,"102":3,"103":1,"104":2,"105":2,"106":2,"107":2,"108":4,"109":1,"110":8,"111":8,"112":1,"113":1,"114":0,"115":0,"116":0,"117":1,"118":7,"119":8,"120":1,"121":1,"122":4,"123":4,"124":3,"125":4,"126":1,"127":1,"128":2,"129":2,"130":2,"131":2,"132":2,"133":1,"134":1,"135":6,"136":2,"137":4,"138":3,"139":6,"140":1,"141":1,"142":2,"143":0,"144":2,"145":2,"146":1,"147":1,"148":1,"149":1,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":2,"160":1,"161":1,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":1,"169":1,"170":5,"171":5,"172":1,"173":1,"174":5,"175":4,"176":5,"177":0,"178":5,"179":5,"180":1,"181":1,"182":4,"183":0,"184":4,"185":4,"186":4,"187":0,"188":4,"189":4,"190":4,"191":1,"192":1,"193":2,"194":0,"195":2,"196":2,"197":2,"198":2,"199":1,"200":1,"201":2,"202":0,"203":2,"204":2,"205":1,"206":2,"207":1,"208":1,"209":0,"210":0,"211":0,"212":0,"213":1,"214":2,"215":2,"216":0,"217":1,"218":1},"f":{"0":0,"1":0,"2":0,"3":1,"4":0,"5":1,"6":6,"7":0,"8":63,"9":11,"10":35,"11":35,"12":60,"13":3,"14":6,"15":1,"16":1,"17":6,"18":1,"19":0,"20":30,"21":1,"22":1,"23":0,"24":30,"25":1,"26":6,"27":5,"28":1,"29":8,"30":8,"31":1,"32":4,"33":4,"34":1,"35":2,"36":2,"37":1,"38":6,"39":6,"40":1,"41":2,"42":2,"43":1,"44":0,"45":0,"46":1,"47":5,"48":5,"49":1,"50":4,"51":4,"52":1,"53":2,"54":2,"55":1,"56":2,"57":2,"58":1,"59":0,"60":0,"61":2,"62":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[1,0],"5":[1,0],"6":[1,0],"7":[1,0],"8":[0,0],"9":[30,28],"10":[0,6],"11":[14,14],"12":[13,1],"13":[1,0],"14":[0,1],"15":[0,6],"16":[6,0,0],"17":[1,0],"18":[0,0],"19":[0,30],"20":[0,1],"21":[1,0],"22":[1,1],"23":[1,0],"24":[1,0],"25":[0,30],"26":[3,2],"27":[1,2],"28":[1,7],"29":[8,1],"30":[2,0],"31":[2,0],"32":[2,4],"33":[0,2],"34":[2,0],"35":[1,1],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[1,4],"41":[5,1],"42":[4,1],"43":[0,5],"44":[0,4],"45":[0,2],"46":[0,2],"47":[0,0]},"inputSourceMap":{"version":3,"sources":["key-manager.ts"],"names":["TO_BE_SIGNED_EXTERNALLY","KeyManager","wallet","HashMap","account","privateKey","address","data","spec","key","Key","Array","from","privateKeyEncrypted","keys","set","keystore","masterPassphrase","Error","Uint8Array","getIndex","put","has","keyRecord","get","fromRecord","e","getKey","unlock","transaction","type","signTransactionLedger","getUnlockedKey","signTransaction","tx","txBody","ledger","useExternalLedger","signedTx","SignedTransaction","sign","presignHash","getUnsignedHash","accountManager","getAddressFromLedger","derivationPath","result","hash","signature","getHash","message","enc","signMessage","importSpec","rawKey","b58encrypted","password","encryptedKey","length","addKey","passphrase","datastore","encryptedId","value","emit","appId","EncryptedIdSetting","Buffer","Boolean","clear","undefined","TypedEventEmitter"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers","sourcesContent":["import { TypedEventEmitter } from '@elderapo/typed-event-emitter';\nimport { Wallet } from '../wallet';\nimport { Transaction, SignedTransaction } from '../models/transaction';\nimport { Key } from '../models/key';\nimport { Account } from '../models/account';\nimport { EncryptedIdSetting } from '../models/setting';\nimport {\n    decryptPrivateKey,\n    decodePrivateKey,\n    encryptPrivateKey\n} from '@herajs/crypto';\nimport { HashMap } from '../utils';\n\nexport interface Events {\n    'add': Key;\n    'update': Key;\n    'change': Key[];\n    'unlock': null;\n    'lock': null;\n}\n\n/**\n * Specification for importing private keys\n */\ninterface ImportSpec {\n    account: Account;\n    b58encrypted?: string;\n    password?: string;\n    privateKey?: Buffer;\n}\n\ntype Encoding = 'ascii' | 'utf8' | 'utf-8' | 'utf16le' | 'ucs2' | 'ucs-2' | 'base64' | 'latin1' | 'binary' | 'hex';\n\nconst TO_BE_SIGNED_EXTERNALLY = '';\n\n/**\n * KeyManager manages keys for accounts.\n */\nexport default class KeyManager extends TypedEventEmitter<Events> {\n    public wallet: Wallet;\n    private keys: HashMap<string, Key> = new HashMap();\n    private masterPassphrase?: string;\n    public useExternalLedger = false;\n\n    constructor(wallet: Wallet) {\n        super();\n        this.wallet = wallet;\n    }\n\n    /**\n     * Adds a private key for an account to the keystore\n     * @param account \n     * @param privateKey \n     */\n    addKey(account: Account, privateKey: Uint8Array | number[]): Key {\n        const address = account.data.spec.address;\n        \n        const key = new Key(address, {\n            privateKey: Array.from(privateKey),\n            address,\n            privateKeyEncrypted: null\n        });\n        this.keys.set(address, key);\n        if (this.wallet.keystore) {\n            if (!this.masterPassphrase) throw new Error('unlock wallet before adding key');\n            const privateKeyEncrypted = encryptPrivateKey(Uint8Array.from(privateKey), this.masterPassphrase);\n            key.data.privateKeyEncrypted = Array.from(privateKeyEncrypted);\n            key.data.privateKey = null;\n            this.wallet.keystore.getIndex('keys').put(key);\n        }\n        return key;\n    }\n\n    async getKey(account: Account): Promise<Key> {\n        const address = account.data.spec.address;\n        if (!this.keys.has(address) && this.wallet.keystore) {\n            try {\n                const keyRecord = await this.wallet.keystore.getIndex('keys').get(address);\n                const key = Key.fromRecord(keyRecord);\n                this.keys.set(address, key);\n                return key;\n            } catch (e) {\n                throw new Error(`missing key for account ${address}`);\n            }\n        }\n        return this.keys.get(address) as Key;\n    }\n\n    async getUnlockedKey(account: Account): Promise<Key> {\n        const key = await this.getKey(account);\n        key.unlock(this.masterPassphrase);\n        return key;\n    }\n\n    /**\n     * Removes key for address from keystore\n     * @param address \n     */\n    async removeKey(address: string): Promise<void> {\n        if (this.keys.has(address)) {\n            this.keys.delete(address);\n        }\n        if (this.wallet.keystore) {\n            await this.wallet.keystore.getIndex('keys').delete(address);\n        }\n    }\n\n    /**\n     * Signs a transaction using key or Ledger saved for account\n     * @param account \n     * @param transaction \n     */\n    async signTransaction(account: Account, transaction: Transaction): Promise<SignedTransaction> {\n        if (account.type === 'ledger') {\n            return this.signTransactionLedger(account, transaction);\n        }\n        const key = await this.getUnlockedKey(account);\n        return key.signTransaction(transaction);\n    }\n\n    async signTransactionLedger(account: Account, tx: Transaction): Promise<SignedTransaction> {\n        if (typeof tx.txBody === 'undefined') {\n            throw new Error('cannot sign transaction without txBody. Did you use prepareTransaction?');\n        }\n        if (!this.wallet.ledger) {\n            if (!this.useExternalLedger) {\n                throw new Error('call wallet.connectLedger before signing transaction');\n            }\n            // This is a bit of a hack:\n            // with this, we can use prepareTransaction but still provide signatures externally\n            const signedTx = new SignedTransaction(tx.key, tx.data, { ...tx.txBody }, TO_BE_SIGNED_EXTERNALLY);\n            signedTx.txBody.sign = TO_BE_SIGNED_EXTERNALLY;\n            return signedTx;\n        }\n        const presignHash = await tx.getUnsignedHash();\n        // need to call getAddress again to \"prime\" HW to this account\n        await this.wallet.accountManager.getAddressFromLedger(account.data.derivationPath);\n        const result = await this.wallet.ledger.signTransaction(tx.txBody);\n        if (presignHash !== result.hash) {\n            throw new Error(`presign hash returned by Ledger app does not match locally computed one (${result.hash} != ${presignHash})`);\n        }\n        const signedTx = new SignedTransaction(tx.key, tx.data, { ...tx.txBody }, result.signature);\n        signedTx.txBody.sign = result.signature;\n        // the hash returned by Ledger app is the pre-signature hash, so let's calculate our own now\n        signedTx.txBody.hash = await signedTx.getHash();\n        return signedTx;\n    }\n\n    /**\n     * Signs a message using key saved for account\n     * @param account \n     * @param transaction \n     */\n    async signMessage(account: Account, message: Buffer, enc: Encoding = 'hex'): Promise<string> {\n        if (account.type === 'ledger') {\n            throw new Error('signing arbitrary messages is currently not supported in Aergo Ledger app');\n        }\n        const key = await this.getUnlockedKey(account);\n        return await key.signMessage(message, enc);\n    }\n\n    /**\n     * Imports a raw or encrypted private key and add it to the keystore.\n     * @param importSpec \n     */\n    async importKey(importSpec: ImportSpec): Promise<Key> {\n        let rawKey = new Uint8Array([]);\n        if (typeof importSpec.b58encrypted === 'string' && typeof importSpec.password === 'string') {\n            const encryptedKey = decodePrivateKey(importSpec.b58encrypted);\n            rawKey = await decryptPrivateKey(encryptedKey, importSpec.password);\n        }\n        if (typeof importSpec.privateKey !== 'undefined') {\n            rawKey = importSpec.privateKey;\n        }\n        if (!rawKey.length) throw new Error('no key provided. Supply b58encrypted and password or privateKey');\n        return this.addKey(importSpec.account, rawKey);\n    }\n\n    /*\n    TODO\n    - export\n    */\n\n    /**\n     * True if keystore is currently unlocked, i.e. a master passphrase is saved in memory.\n     */\n    get unlocked(): boolean {\n        return typeof this.masterPassphrase !== 'undefined'; \n    }\n\n    /**\n     * Unlocks keystore by saving passphrase in memory.\n     * @param passphrase \n     */\n    async unlock(passphrase: string): Promise<void> {\n        if (!this.wallet.datastore) throw new Error('configure storage before accessing keystore');\n        const encryptedId = await this.wallet.datastore.getIndex('settings').get('encryptedId') as EncryptedIdSetting;\n        try {\n            await decryptPrivateKey(Uint8Array.from(encryptedId.data.value), passphrase);\n        } catch (e) {\n            throw new Error('invalid passphrase');\n        }\n        this.masterPassphrase = passphrase;\n        this.emit('unlock', null);\n    }\n\n    /**\n     * Sets up keystore passphrase for the first time.\n     * @param appId string to be saved encrypted with passphrase for later validity check\n     * @param passphrase \n     */\n    async setupAndUnlock(appId: string, passphrase: string): Promise<void> {\n        if (!this.wallet.datastore) throw new Error('configure storage before accessing keystore');\n        // save extension id encrypted using password for a quick check if passphrase is correct later\n        const encryptedId = new EncryptedIdSetting('encryptedId', {\n            value: Array.from(await encryptPrivateKey(Buffer.from(appId), passphrase))\n        });\n        await this.wallet.datastore.getIndex('settings').put(encryptedId);\n        await this.unlock(passphrase);\n    }\n\n    /**\n     * Checks if wallet is setup with a master passphrase\n     */\n    async isSetup(): Promise<boolean> {\n        if (!this.wallet.datastore) throw new Error('configure storage before accessing keystore');\n        try {\n            return Boolean(await this.wallet.datastore.getIndex('settings').get('encryptedId'));\n        } catch(e) {\n            return false;\n        }\n    }\n\n    /**\n     * Removes all keys stored in keystore.\n     */\n    async clearKeys(): Promise<void> {\n        this.keys.clear();\n        if (this.wallet.keystore) {\n            await this.wallet.keystore.getIndex('keys').clear();\n        }\n    }\n\n    /**\n     * Locks keystore by removing master passphrase from memory.\n     */\n    lock (): void {\n        this.masterPassphrase = undefined;\n        this.emit('lock', null);\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f600027d4fba0cef7be88579d507b518a8847f28","contentHash":"721fb0e1b652b14c25fed3a5a5cd02c43b82a81d29290d635c096e924ce9fa15"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/transaction.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/transaction.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":57}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":39}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":39}},"5":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"6":{"start":{"line":14,"column":99},"end":{"line":14,"column":154}},"7":{"start":{"line":14,"column":133},"end":{"line":14,"column":151}},"8":{"start":{"line":14,"column":164},"end":{"line":14,"column":326}},"9":{"start":{"line":14,"column":198},"end":{"line":14,"column":323}},"10":{"start":{"line":14,"column":329},"end":{"line":14,"column":349}},"11":{"start":{"line":16,"column":54},"end":{"line":16,"column":73}},"12":{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},"13":{"start":{"line":16,"column":125},"end":{"line":16,"column":161}},"14":{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},"15":{"start":{"line":16,"column":183},"end":{"line":16,"column":292}},"16":{"start":{"line":16,"column":225},"end":{"line":16,"column":288}},"17":{"start":{"line":16,"column":293},"end":{"line":16,"column":324}},"18":{"start":{"line":16,"column":327},"end":{"line":16,"column":339}},"19":{"start":{"line":18,"column":33},"end":{"line":18,"column":517}},"20":{"start":{"line":18,"column":46},"end":{"line":18,"column":47}},"21":{"start":{"line":18,"column":91},"end":{"line":18,"column":131}},"22":{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},"23":{"start":{"line":18,"column":146},"end":{"line":18,"column":247}},"24":{"start":{"line":18,"column":201},"end":{"line":18,"column":243}},"25":{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},"26":{"start":{"line":18,"column":295},"end":{"line":18,"column":369}},"27":{"start":{"line":18,"column":379},"end":{"line":18,"column":513}},"28":{"start":{"line":18,"column":428},"end":{"line":18,"column":509}},"29":{"start":{"line":18,"column":518},"end":{"line":18,"column":532}},"30":{"start":{"line":20,"column":77},"end":{"line":20,"column":175}},"31":{"start":{"line":20,"column":94},"end":{"line":20,"column":107}},"32":{"start":{"line":20,"column":121},"end":{"line":20,"column":131}},"33":{"start":{"line":20,"column":151},"end":{"line":20,"column":165}},"34":{"start":{"line":20,"column":166},"end":{"line":20,"column":173}},"35":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"36":{"start":{"line":20,"column":193},"end":{"line":20,"column":208}},"37":{"start":{"line":20,"column":218},"end":{"line":20,"column":261}},"38":{"start":{"line":22,"column":33},"end":{"line":22,"column":387}},"39":{"start":{"line":22,"column":65},"end":{"line":22,"column":69}},"40":{"start":{"line":22,"column":78},"end":{"line":22,"column":87}},"41":{"start":{"line":22,"column":89},"end":{"line":22,"column":384}},"42":{"start":{"line":22,"column":147},"end":{"line":22,"column":167}},"43":{"start":{"line":22,"column":193},"end":{"line":22,"column":264}},"44":{"start":{"line":22,"column":290},"end":{"line":22,"column":360}},"45":{"start":{"line":22,"column":363},"end":{"line":22,"column":380}},"46":{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},"47":{"start":{"line":24,"column":92},"end":{"line":24,"column":149}},"48":{"start":{"line":26,"column":44},"end":{"line":26,"column":315}},"49":{"start":{"line":26,"column":57},"end":{"line":26,"column":58}},"50":{"start":{"line":26,"column":102},"end":{"line":26,"column":110}},"51":{"start":{"line":26,"column":112},"end":{"line":26,"column":167}},"52":{"start":{"line":26,"column":168},"end":{"line":26,"column":199}},"53":{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},"54":{"start":{"line":26,"column":227},"end":{"line":26,"column":254}},"55":{"start":{"line":26,"column":255},"end":{"line":26,"column":313}},"56":{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},"57":{"start":{"line":28,"column":78},"end":{"line":28,"column":131}},"58":{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},"59":{"start":{"line":28,"column":149},"end":{"line":28,"column":193}},"60":{"start":{"line":28,"column":194},"end":{"line":28,"column":213}},"61":{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},"62":{"start":{"line":30,"column":124},"end":{"line":30,"column":136}},"63":{"start":{"line":30,"column":139},"end":{"line":30,"column":175}},"64":{"start":{"line":32,"column":30},"end":{"line":32,"column":176}},"65":{"start":{"line":32,"column":126},"end":{"line":32,"column":173}},"66":{"start":{"line":32,"column":177},"end":{"line":32,"column":203}},"67":{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},"68":{"start":{"line":34,"column":63},"end":{"line":34,"column":149}},"69":{"start":{"line":34,"column":152},"end":{"line":34,"column":164}},"70":{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},"71":{"start":{"line":36,"column":106},"end":{"line":36,"column":180}},"72":{"start":{"line":36,"column":183},"end":{"line":36,"column":328}},"73":{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},"74":{"start":{"line":36,"column":345},"end":{"line":36,"column":383}},"75":{"start":{"line":38,"column":33},"end":{"line":38,"column":138}},"76":{"start":{"line":38,"column":109},"end":{"line":38,"column":125}},"77":{"start":{"line":38,"column":126},"end":{"line":38,"column":135}},"78":{"start":{"line":38,"column":139},"end":{"line":38,"column":168}},"79":{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},"80":{"start":{"line":40,"column":62},"end":{"line":40,"column":166}},"81":{"start":{"line":40,"column":176},"end":{"line":40,"column":193}},"82":{"start":{"line":40,"column":196},"end":{"line":40,"column":207}},"83":{"start":{"line":44,"column":0},"end":{"line":49,"column":28}},"84":{"start":{"line":45,"column":2},"end":{"line":45,"column":32}},"85":{"start":{"line":46,"column":2},"end":{"line":46,"column":36}},"86":{"start":{"line":47,"column":2},"end":{"line":47,"column":28}},"87":{"start":{"line":48,"column":2},"end":{"line":48,"column":32}},"88":{"start":{"line":53,"column":0},"end":{"line":114,"column":17}},"89":{"start":{"line":54,"column":2},"end":{"line":54,"column":34}},"90":{"start":{"line":59,"column":4},"end":{"line":59,"column":39}},"91":{"start":{"line":61,"column":4},"end":{"line":61,"column":97}},"92":{"start":{"line":63,"column":4},"end":{"line":63,"column":69}},"93":{"start":{"line":65,"column":4},"end":{"line":65,"column":76}},"94":{"start":{"line":67,"column":4},"end":{"line":67,"column":26}},"95":{"start":{"line":68,"column":4},"end":{"line":68,"column":17}},"96":{"start":{"line":71,"column":2},"end":{"line":111,"column":6}},"97":{"start":{"line":78,"column":29},"end":{"line":92,"column":8}},"98":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"99":{"start":{"line":80,"column":10},"end":{"line":80,"column":60}},"100":{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},"101":{"start":{"line":84,"column":10},"end":{"line":84,"column":64}},"102":{"start":{"line":87,"column":19},"end":{"line":89,"column":21}},"103":{"start":{"line":90,"column":8},"end":{"line":90,"column":34}},"104":{"start":{"line":91,"column":8},"end":{"line":91,"column":20}},"105":{"start":{"line":95,"column":8},"end":{"line":95,"column":55}},"106":{"start":{"line":98,"column":6},"end":{"line":98,"column":29}},"107":{"start":{"line":103,"column":6},"end":{"line":103,"column":149}},"108":{"start":{"line":103,"column":53},"end":{"line":103,"column":149}},"109":{"start":{"line":104,"column":6},"end":{"line":104,"column":32}},"110":{"start":{"line":109,"column":6},"end":{"line":109,"column":50}},"111":{"start":{"line":113,"column":2},"end":{"line":113,"column":21}},"112":{"start":{"line":116,"column":0},"end":{"line":116,"column":34}},"113":{"start":{"line":118,"column":0},"end":{"line":118,"column":47}},"114":{"start":{"line":122,"column":0},"end":{"line":213,"column":14}},"115":{"start":{"line":123,"column":2},"end":{"line":123,"column":45}},"116":{"start":{"line":128,"column":4},"end":{"line":128,"column":45}},"117":{"start":{"line":130,"column":4},"end":{"line":130,"column":104}},"118":{"start":{"line":132,"column":4},"end":{"line":132,"column":75}},"119":{"start":{"line":134,"column":4},"end":{"line":134,"column":73}},"120":{"start":{"line":136,"column":4},"end":{"line":136,"column":70}},"121":{"start":{"line":138,"column":4},"end":{"line":138,"column":27}},"122":{"start":{"line":140,"column":4},"end":{"line":142,"column":5}},"123":{"start":{"line":141,"column":6},"end":{"line":141,"column":44}},"124":{"start":{"line":144,"column":4},"end":{"line":144,"column":33}},"125":{"start":{"line":145,"column":4},"end":{"line":145,"column":18}},"126":{"start":{"line":148,"column":2},"end":{"line":210,"column":6}},"127":{"start":{"line":155,"column":21},"end":{"line":165,"column":8}},"128":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"129":{"start":{"line":157,"column":10},"end":{"line":157,"column":64}},"130":{"start":{"line":160,"column":19},"end":{"line":162,"column":21}},"131":{"start":{"line":163,"column":8},"end":{"line":163,"column":32}},"132":{"start":{"line":164,"column":8},"end":{"line":164,"column":20}},"133":{"start":{"line":168,"column":8},"end":{"line":168,"column":47}},"134":{"start":{"line":171,"column":6},"end":{"line":171,"column":21}},"135":{"start":{"line":176,"column":6},"end":{"line":176,"column":30}},"136":{"start":{"line":181,"column":6},"end":{"line":181,"column":56}},"137":{"start":{"line":186,"column":6},"end":{"line":186,"column":58}},"138":{"start":{"line":191,"column":6},"end":{"line":191,"column":139}},"139":{"start":{"line":191,"column":51},"end":{"line":191,"column":139}},"140":{"start":{"line":192,"column":6},"end":{"line":192,"column":30}},"141":{"start":{"line":197,"column":6},"end":{"line":208,"column":49}},"142":{"start":{"line":212,"column":2},"end":{"line":212,"column":27}},"143":{"start":{"line":215,"column":0},"end":{"line":215,"column":46}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":351}},"line":14},"1":{"name":"_typeof","decl":{"start":{"line":14,"column":118},"end":{"line":14,"column":125}},"loc":{"start":{"line":14,"column":131},"end":{"line":14,"column":153}},"line":14},"2":{"name":"_typeof","decl":{"start":{"line":14,"column":183},"end":{"line":14,"column":190}},"loc":{"start":{"line":14,"column":196},"end":{"line":14,"column":325}},"line":14},"3":{"name":"ownKeys","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":16}},"loc":{"start":{"line":16,"column":41},"end":{"line":16,"column":341}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":16,"column":208},"end":{"line":16,"column":209}},"loc":{"start":{"line":16,"column":223},"end":{"line":16,"column":290}},"line":16},"5":{"name":"_objectSpread","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":22}},"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":534}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":184},"end":{"line":18,"column":185}},"loc":{"start":{"line":18,"column":199},"end":{"line":18,"column":245}},"line":18},"7":{"name":"(anonymous_7)","decl":{"start":{"line":18,"column":411},"end":{"line":18,"column":412}},"loc":{"start":{"line":18,"column":426},"end":{"line":18,"column":511}},"line":18},"8":{"name":"asyncGeneratorStep","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":75},"end":{"line":20,"column":265}},"line":20},"9":{"name":"_asyncToGenerator","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":389}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":40},"end":{"line":22,"column":41}},"loc":{"start":{"line":22,"column":52},"end":{"line":22,"column":386}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":22,"column":108},"end":{"line":22,"column":109}},"loc":{"start":{"line":22,"column":135},"end":{"line":22,"column":382}},"line":22},"12":{"name":"_next","decl":{"start":{"line":22,"column":178},"end":{"line":22,"column":183}},"loc":{"start":{"line":22,"column":191},"end":{"line":22,"column":266}},"line":22},"13":{"name":"_throw","decl":{"start":{"line":22,"column":276},"end":{"line":22,"column":282}},"loc":{"start":{"line":22,"column":288},"end":{"line":22,"column":362}},"line":22},"14":{"name":"_classCallCheck","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":24}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":153}},"line":24},"15":{"name":"_defineProperties","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":317}},"line":26},"16":{"name":"_createClass","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":21}},"loc":{"start":{"line":28,"column":60},"end":{"line":28,"column":215}},"line":28},"17":{"name":"_possibleConstructorReturn","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":35}},"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":177}},"line":30},"18":{"name":"_getPrototypeOf","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":24}},"loc":{"start":{"line":32,"column":28},"end":{"line":32,"column":205}},"line":32},"19":{"name":"_getPrototypeOf","decl":{"start":{"line":32,"column":105},"end":{"line":32,"column":120}},"loc":{"start":{"line":32,"column":124},"end":{"line":32,"column":175}},"line":32},"20":{"name":"_assertThisInitialized","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":31}},"loc":{"start":{"line":34,"column":38},"end":{"line":34,"column":166}},"line":34},"21":{"name":"_inherits","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":18}},"loc":{"start":{"line":36,"column":41},"end":{"line":36,"column":385}},"line":36},"22":{"name":"_setPrototypeOf","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":170}},"line":38},"23":{"name":"_setPrototypeOf","decl":{"start":{"line":38,"column":85},"end":{"line":38,"column":100}},"loc":{"start":{"line":38,"column":107},"end":{"line":38,"column":137}},"line":38},"24":{"name":"_defineProperty","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":24}},"loc":{"start":{"line":40,"column":42},"end":{"line":40,"column":209}},"line":40},"25":{"name":"(anonymous_25)","decl":{"start":{"line":44,"column":1},"end":{"line":44,"column":2}},"loc":{"start":{"line":44,"column":19},"end":{"line":49,"column":1}},"line":44},"26":{"name":"(anonymous_26)","decl":{"start":{"line":53,"column":0},"end":{"line":53,"column":1}},"loc":{"start":{"line":53,"column":19},"end":{"line":114,"column":1}},"line":53},"27":{"name":"Transaction","decl":{"start":{"line":56,"column":11},"end":{"line":56,"column":22}},"loc":{"start":{"line":56,"column":42},"end":{"line":69,"column":3}},"line":56},"28":{"name":"(anonymous_28)","decl":{"start":{"line":77,"column":11},"end":{"line":77,"column":12}},"loc":{"start":{"line":77,"column":23},"end":{"line":99,"column":5}},"line":77},"29":{"name":"(anonymous_29)","decl":{"start":{"line":78,"column":47},"end":{"line":78,"column":48}},"loc":{"start":{"line":78,"column":60},"end":{"line":92,"column":7}},"line":78},"30":{"name":"getUnsignedHash","decl":{"start":{"line":94,"column":15},"end":{"line":94,"column":30}},"loc":{"start":{"line":94,"column":33},"end":{"line":96,"column":7}},"line":94},"31":{"name":"get","decl":{"start":{"line":102,"column":18},"end":{"line":102,"column":21}},"loc":{"start":{"line":102,"column":24},"end":{"line":105,"column":5}},"line":102},"32":{"name":"get","decl":{"start":{"line":108,"column":18},"end":{"line":108,"column":21}},"loc":{"start":{"line":108,"column":24},"end":{"line":110,"column":5}},"line":108},"33":{"name":"(anonymous_33)","decl":{"start":{"line":122,"column":0},"end":{"line":122,"column":1}},"loc":{"start":{"line":122,"column":24},"end":{"line":213,"column":1}},"line":122},"34":{"name":"SignedTransaction","decl":{"start":{"line":125,"column":11},"end":{"line":125,"column":28}},"loc":{"start":{"line":125,"column":59},"end":{"line":146,"column":3}},"line":125},"35":{"name":"(anonymous_35)","decl":{"start":{"line":154,"column":11},"end":{"line":154,"column":12}},"loc":{"start":{"line":154,"column":23},"end":{"line":172,"column":5}},"line":154},"36":{"name":"(anonymous_36)","decl":{"start":{"line":155,"column":39},"end":{"line":155,"column":40}},"loc":{"start":{"line":155,"column":52},"end":{"line":165,"column":7}},"line":155},"37":{"name":"getHash","decl":{"start":{"line":167,"column":15},"end":{"line":167,"column":22}},"loc":{"start":{"line":167,"column":25},"end":{"line":169,"column":7}},"line":167},"38":{"name":"get","decl":{"start":{"line":175,"column":18},"end":{"line":175,"column":21}},"loc":{"start":{"line":175,"column":24},"end":{"line":177,"column":5}},"line":175},"39":{"name":"get","decl":{"start":{"line":180,"column":18},"end":{"line":180,"column":21}},"loc":{"start":{"line":180,"column":24},"end":{"line":182,"column":5}},"line":180},"40":{"name":"get","decl":{"start":{"line":185,"column":18},"end":{"line":185,"column":21}},"loc":{"start":{"line":185,"column":24},"end":{"line":187,"column":5}},"line":185},"41":{"name":"get","decl":{"start":{"line":190,"column":18},"end":{"line":190,"column":21}},"loc":{"start":{"line":190,"column":24},"end":{"line":193,"column":5}},"line":190},"42":{"name":"fromTxBody","decl":{"start":{"line":196,"column":20},"end":{"line":196,"column":30}},"loc":{"start":{"line":196,"column":48},"end":{"line":209,"column":5}},"line":196}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"type":"if","locations":[{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},{"start":{"line":14,"column":24},"end":{"line":14,"column":328}}],"line":14},"1":{"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":95}},"type":"binary-expr","locations":[{"start":{"line":14,"column":28},"end":{"line":14,"column":56}},{"start":{"line":14,"column":60},"end":{"line":14,"column":95}}],"line":14},"2":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":322}},"type":"cond-expr","locations":[{"start":{"line":14,"column":301},"end":{"line":14,"column":309}},{"start":{"line":14,"column":312},"end":{"line":14,"column":322}}],"line":14},"3":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":298}},"type":"binary-expr","locations":[{"start":{"line":14,"column":205},"end":{"line":14,"column":208}},{"start":{"line":14,"column":212},"end":{"line":14,"column":240}},{"start":{"line":14,"column":244},"end":{"line":14,"column":270}},{"start":{"line":14,"column":274},"end":{"line":14,"column":298}}],"line":14},"4":{"loc":{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},"type":"if","locations":[{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},{"start":{"line":16,"column":75},"end":{"line":16,"column":326}}],"line":16},"5":{"loc":{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},"type":"if","locations":[{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},{"start":{"line":16,"column":163},"end":{"line":16,"column":292}}],"line":16},"6":{"loc":{"start":{"line":18,"column":91},"end":{"line":18,"column":131}},"type":"cond-expr","locations":[{"start":{"line":18,"column":114},"end":{"line":18,"column":126}},{"start":{"line":18,"column":129},"end":{"line":18,"column":131}}],"line":18},"7":{"loc":{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},"type":"if","locations":[{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},{"start":{"line":18,"column":133},"end":{"line":18,"column":515}}],"line":18},"8":{"loc":{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},"type":"if","locations":[{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},{"start":{"line":18,"column":255},"end":{"line":18,"column":515}}],"line":18},"9":{"loc":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"type":"if","locations":[{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},{"start":{"line":20,"column":176},"end":{"line":20,"column":263}}],"line":20},"10":{"loc":{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},"type":"if","locations":[{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},{"start":{"line":24,"column":50},"end":{"line":24,"column":151}}],"line":24},"11":{"loc":{"start":{"line":26,"column":136},"end":{"line":26,"column":166}},"type":"binary-expr","locations":[{"start":{"line":26,"column":136},"end":{"line":26,"column":157}},{"start":{"line":26,"column":161},"end":{"line":26,"column":166}}],"line":26},"12":{"loc":{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},"type":"if","locations":[{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},{"start":{"line":26,"column":200},"end":{"line":26,"column":254}}],"line":26},"13":{"loc":{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},"type":"if","locations":[{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},{"start":{"line":28,"column":62},"end":{"line":28,"column":131}}],"line":28},"14":{"loc":{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},"type":"if","locations":[{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},{"start":{"line":28,"column":132},"end":{"line":28,"column":193}}],"line":28},"15":{"loc":{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},"type":"if","locations":[{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},{"start":{"line":30,"column":50},"end":{"line":30,"column":138}}],"line":30},"16":{"loc":{"start":{"line":30,"column":54},"end":{"line":30,"column":120}},"type":"binary-expr","locations":[{"start":{"line":30,"column":54},"end":{"line":30,"column":58}},{"start":{"line":30,"column":63},"end":{"line":30,"column":89}},{"start":{"line":30,"column":93},"end":{"line":30,"column":119}}],"line":30},"17":{"loc":{"start":{"line":32,"column":48},"end":{"line":32,"column":175}},"type":"cond-expr","locations":[{"start":{"line":32,"column":72},"end":{"line":32,"column":93}},{"start":{"line":32,"column":96},"end":{"line":32,"column":175}}],"line":32},"18":{"loc":{"start":{"line":32,"column":133},"end":{"line":32,"column":172}},"type":"binary-expr","locations":[{"start":{"line":32,"column":133},"end":{"line":32,"column":144}},{"start":{"line":32,"column":148},"end":{"line":32,"column":172}}],"line":32},"19":{"loc":{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},"type":"if","locations":[{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},{"start":{"line":34,"column":40},"end":{"line":34,"column":151}}],"line":34},"20":{"loc":{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},"type":"if","locations":[{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},{"start":{"line":36,"column":43},"end":{"line":36,"column":182}}],"line":36},"21":{"loc":{"start":{"line":36,"column":47},"end":{"line":36,"column":102}},"type":"binary-expr","locations":[{"start":{"line":36,"column":47},"end":{"line":36,"column":79}},{"start":{"line":36,"column":83},"end":{"line":36,"column":102}}],"line":36},"22":{"loc":{"start":{"line":36,"column":218},"end":{"line":36,"column":252}},"type":"binary-expr","locations":[{"start":{"line":36,"column":218},"end":{"line":36,"column":228}},{"start":{"line":36,"column":232},"end":{"line":36,"column":252}}],"line":36},"23":{"loc":{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},"type":"if","locations":[{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},{"start":{"line":36,"column":329},"end":{"line":36,"column":383}}],"line":36},"24":{"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":137}},"type":"binary-expr","locations":[{"start":{"line":38,"column":51},"end":{"line":38,"column":72}},{"start":{"line":38,"column":76},"end":{"line":38,"column":137}}],"line":38},"25":{"loc":{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},"type":"if","locations":[{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},{"start":{"line":40,"column":44},"end":{"line":40,"column":195}}],"line":40},"26":{"loc":{"start":{"line":49,"column":3},"end":{"line":49,"column":26}},"type":"binary-expr","locations":[{"start":{"line":49,"column":3},"end":{"line":49,"column":9}},{"start":{"line":49,"column":14},"end":{"line":49,"column":25}}],"line":49},"27":{"loc":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},{"start":{"line":79,"column":8},"end":{"line":81,"column":9}}],"line":79},"28":{"loc":{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},{"start":{"line":83,"column":8},"end":{"line":85,"column":9}}],"line":83},"29":{"loc":{"start":{"line":88,"column":17},"end":{"line":88,"column":39}},"type":"binary-expr","locations":[{"start":{"line":88,"column":17},"end":{"line":88,"column":34}},{"start":{"line":88,"column":38},"end":{"line":88,"column":39}}],"line":88},"30":{"loc":{"start":{"line":103,"column":6},"end":{"line":103,"column":149}},"type":"if","locations":[{"start":{"line":103,"column":6},"end":{"line":103,"column":149}},{"start":{"line":103,"column":6},"end":{"line":103,"column":149}}],"line":103},"31":{"loc":{"start":{"line":140,"column":4},"end":{"line":142,"column":5}},"type":"if","locations":[{"start":{"line":140,"column":4},"end":{"line":142,"column":5}},{"start":{"line":140,"column":4},"end":{"line":142,"column":5}}],"line":140},"32":{"loc":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},{"start":{"line":156,"column":8},"end":{"line":158,"column":9}}],"line":156},"33":{"loc":{"start":{"line":161,"column":17},"end":{"line":161,"column":39}},"type":"binary-expr","locations":[{"start":{"line":161,"column":17},"end":{"line":161,"column":34}},{"start":{"line":161,"column":38},"end":{"line":161,"column":39}}],"line":161},"34":{"loc":{"start":{"line":191,"column":6},"end":{"line":191,"column":139}},"type":"if","locations":[{"start":{"line":191,"column":6},"end":{"line":191,"column":139}},{"start":{"line":191,"column":6},"end":{"line":191,"column":139}}],"line":191},"35":{"loc":{"start":{"line":197,"column":35},"end":{"line":197,"column":65}},"type":"cond-expr","locations":[{"start":{"line":197,"column":49},"end":{"line":197,"column":60}},{"start":{"line":197,"column":63},"end":{"line":197,"column":65}}],"line":197},"36":{"loc":{"start":{"line":206,"column":14},"end":{"line":206,"column":43}},"type":"cond-expr","locations":[{"start":{"line":206,"column":28},"end":{"line":206,"column":39}},{"start":{"line":206,"column":42},"end":{"line":206,"column":43}}],"line":206},"37":{"loc":{"start":{"line":208,"column":17},"end":{"line":208,"column":47}},"type":"cond-expr","locations":[{"start":{"line":208,"column":31},"end":{"line":208,"column":42}},{"start":{"line":208,"column":45},"end":{"line":208,"column":47}}],"line":208}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":4,"8":0,"9":0,"10":1,"11":3,"12":3,"13":3,"14":3,"15":3,"16":0,"17":3,"18":3,"19":3,"20":3,"21":6,"22":6,"23":3,"24":21,"25":3,"26":3,"27":0,"28":0,"29":3,"30":6,"31":6,"32":6,"33":0,"34":0,"35":6,"36":3,"37":3,"38":2,"39":3,"40":3,"41":3,"42":3,"43":6,"44":0,"45":3,"46":14,"47":0,"48":3,"49":3,"50":9,"51":9,"52":9,"53":9,"54":3,"55":9,"56":2,"57":2,"58":2,"59":1,"60":2,"61":14,"62":4,"63":10,"64":1,"65":0,"66":1,"67":42,"68":0,"69":42,"70":2,"71":0,"72":2,"73":2,"74":2,"75":1,"76":0,"77":0,"78":1,"79":54,"80":4,"81":50,"82":54,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":10,"91":10,"92":10,"93":10,"94":10,"95":10,"96":1,"97":1,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":1,"112":1,"113":1,"114":1,"115":1,"116":4,"117":4,"118":4,"119":4,"120":4,"121":4,"122":4,"123":4,"124":4,"125":4,"126":1,"127":1,"128":3,"129":0,"130":3,"131":3,"132":3,"133":3,"134":1,"135":0,"136":0,"137":0,"138":1,"139":0,"140":1,"141":0,"142":1,"143":1},"f":{"0":1,"1":4,"2":0,"3":3,"4":0,"5":3,"6":21,"7":0,"8":6,"9":2,"10":3,"11":3,"12":6,"13":0,"14":14,"15":3,"16":2,"17":14,"18":1,"19":0,"20":42,"21":2,"22":1,"23":0,"24":54,"25":1,"26":1,"27":10,"28":1,"29":0,"30":0,"31":0,"32":0,"33":1,"34":4,"35":1,"36":3,"37":3,"38":0,"39":0,"40":0,"41":1,"42":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0,0,0],"4":[3,0],"5":[3,0],"6":[6,0],"7":[3,3],"8":[3,0],"9":[3,3],"10":[0,14],"11":[9,9],"12":[3,6],"13":[2,0],"14":[1,1],"15":[4,10],"16":[14,4,0],"17":[1,0],"18":[0,0],"19":[0,42],"20":[0,2],"21":[2,0],"22":[2,2],"23":[2,0],"24":[1,0],"25":[4,50],"26":[1,1],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[4,0],"32":[0,3],"33":[3,0],"34":[0,1],"35":[0,0],"36":[0,0],"37":[0,0]},"inputSourceMap":{"version":3,"sources":["transaction.ts"],"names":["Status","Transaction","key","data","txBody","Error","nonce","hash","_unsignedHash","Amount","amount","Record","SignedTransaction","signature","_signedHash","status","Pending","Confirmed","chainId","from","to","ts","blockhash","blockno","type","sign"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models","sourcesContent":["import { Record, Data } from './record';\nimport { Address, Amount } from '@herajs/common';\nimport { hashTransaction } from '@herajs/crypto';\n\nenum Status {\n    Pending = 'pending',\n    Confirmed = 'confirmed',\n    Error = 'error',\n    Timeout = 'timeout',\n}\n\ninterface TransactionData extends Data {\n    chainId: string;\n    from: string;\n    to: string | null;\n    hash: string | null;\n    ts: string;\n    blockhash: string | null;\n    blockno: number | null;\n    amount: string;\n    type: number;\n    status: Status;\n}\n\nexport interface TxBody {\n    hash?: string;\n    nonce?: number;\n    sign?: string;\n    from: string | Address;\n    to: string | Address | null;\n    amount: string | number | Amount;\n    payload?: string | Uint8Array;\n    chainIdHash: string | Uint8Array;\n    type?: number;\n    limit?: number;\n    price?: string | Amount;\n}\nexport type CompleteTxBody = TxBody & {\n    nonce: number;\n    sign: string;\n    hash: string;\n};\n\nexport class Transaction extends Record<TransactionData> {\n    static readonly Status = Status;\n    txBody?: CompleteTxBody;\n    private _unsignedHash?: string;\n\n    constructor(key: string, data: TransactionData, txBody?: CompleteTxBody) {\n        super(key, data);\n        this.txBody = txBody;\n    }\n\n    get unsignedHash(): string {\n        if (typeof this._unsignedHash === 'undefined') throw new Error('transaction is missing hash, either supply or compute with getUnsignedHash()');\n        return this._unsignedHash;\n    }\n\n    /**\n     * Calculate the hash excluding any signature\n     */\n    async getUnsignedHash(): Promise<string> {\n        if (typeof this.txBody === 'undefined') {\n            throw new Error('cannot get hash without txBody');\n        }\n        if (typeof this.txBody.nonce !== 'number') {\n            throw new Error('missing required parameter `nonce`');\n        }\n        const hash = await hashTransaction({ ...this.txBody, nonce: this.txBody.nonce || 0 }, 'base58');\n        this._unsignedHash = hash;\n        return hash;\n    }\n\n    get amount(): Amount {\n        return new Amount(this.data.amount);\n    }\n}\n\nexport class SignedTransaction extends Transaction {\n    private _signedHash?: string;\n    signature: string;\n    txBody!: CompleteTxBody;\n\n    constructor(key: string, data: TransactionData, txBody: CompleteTxBody, signature: string) {\n        super(key, data);\n        this.txBody = txBody;\n        if (this.data.hash !== null) {\n            this._signedHash = this.data.hash;\n        }\n        this.signature = signature;\n    }\n\n    get status(): string {\n        return this.data.status;\n    }\n\n    get isPending(): boolean {\n        return this.status === Transaction.Status.Pending;\n    }\n\n    get isConfirmed(): boolean {\n        return this.status === Transaction.Status.Confirmed;\n    }\n\n    get hash(): string {\n        if (typeof this._signedHash === 'undefined') throw new Error('transaction is missing hash, either supply or compute with getHash()');\n        return this._signedHash;\n    }\n\n    /**\n     * Calculate the hash, including all present body\n     */\n    async getHash(): Promise<string> {\n        if (typeof this.txBody.nonce !== 'number') {\n            throw new Error('missing required parameter `nonce`');\n        }\n        const hash = await hashTransaction({ ...this.txBody, nonce: this.txBody.nonce || 0 }, 'base58');\n        this._signedHash = hash;\n        return hash;\n    }\n\n    static fromTxBody(txBody: CompleteTxBody, chainId: string): SignedTransaction {\n        return new SignedTransaction(txBody.hash ? txBody.hash : '', {\n            chainId,\n            from: ''+txBody.from,\n            to: ''+txBody.to,\n            hash: ''+txBody.hash,\n            ts: '',\n            blockhash: null,\n            blockno: null,\n            amount: ''+txBody.amount,\n            type: txBody.type ? txBody.type : 0,\n            status: Transaction.Status.Confirmed,\n        }, txBody, txBody.sign ? txBody.sign : '');\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"987a140894a814681725890cb49899104f72ab2d","contentHash":"241689f07124596bad0e8dc5df32b7072d0dd711645c5693138f1a30b2a857a9"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/record.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/record.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":24}},"2":{"start":{"line":8,"column":50},"end":{"line":8,"column":151}},"3":{"start":{"line":8,"column":92},"end":{"line":8,"column":149}},"4":{"start":{"line":10,"column":44},"end":{"line":10,"column":195}},"5":{"start":{"line":10,"column":62},"end":{"line":10,"column":166}},"6":{"start":{"line":10,"column":176},"end":{"line":10,"column":193}},"7":{"start":{"line":10,"column":196},"end":{"line":10,"column":207}},"8":{"start":{"line":22,"column":0},"end":{"line":31,"column":1}},"9":{"start":{"line":23,"column":2},"end":{"line":23,"column":32}},"10":{"start":{"line":25,"column":2},"end":{"line":25,"column":39}},"11":{"start":{"line":27,"column":2},"end":{"line":27,"column":40}},"12":{"start":{"line":29,"column":2},"end":{"line":29,"column":17}},"13":{"start":{"line":30,"column":2},"end":{"line":30,"column":19}},"14":{"start":{"line":33,"column":0},"end":{"line":33,"column":24}}},"fnMap":{"0":{"name":"_classCallCheck","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":24}},"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":153}},"line":8},"1":{"name":"_defineProperty","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":24}},"loc":{"start":{"line":10,"column":42},"end":{"line":10,"column":209}},"line":10},"2":{"name":"Record","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":15}},"loc":{"start":{"line":22,"column":27},"end":{"line":31,"column":1}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":50},"end":{"line":8,"column":151}},"type":"if","locations":[{"start":{"line":8,"column":50},"end":{"line":8,"column":151}},{"start":{"line":8,"column":50},"end":{"line":8,"column":151}}],"line":8},"1":{"loc":{"start":{"line":10,"column":44},"end":{"line":10,"column":195}},"type":"if","locations":[{"start":{"line":10,"column":44},"end":{"line":10,"column":195}},{"start":{"line":10,"column":44},"end":{"line":10,"column":195}}],"line":10}},"s":{"0":1,"1":1,"2":26,"3":0,"4":52,"5":0,"6":52,"7":52,"8":1,"9":26,"10":26,"11":26,"12":26,"13":26,"14":1},"f":{"0":26,"1":52,"2":26},"b":{"0":[0,26],"1":[0,52]},"inputSourceMap":{"version":3,"sources":["record.ts"],"names":["Record","key","data"],"mappings":";;;;;;;;;;;AAKA;;;;;IAKaA,M;AAIT;;;;AAIA,gBAAYC,GAAZ,EAAyBC,IAAzB,EAAkC;AAAA;;AAAA;;AAAA;;AAC9B,OAAKD,GAAL,GAAWA,GAAX;AACA,OAAKC,IAAL,GAAYA,IAAZ;AACH,C","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models","sourcesContent":["export type BasicType = number | string | boolean | null;\nexport interface Data {\n    [prop: string]: BasicType | BasicType[] | Data[] | Data;\n}\n\n/**\n * A Record is a basic object that only contains a key and data as primitive types, arrays, and objects.\n * The data field is serializable and should be compatabile with any kind of storage.\n * Sub-classes can add non-serializable fields.\n */\nexport class Record<T extends {} = Data> {\n    key: string;\n    data: T;\n\n    /**\n     * @param key database key of record\n     * @param data data of record\n     */\n    constructor(key: string, data: T) {\n        this.key = key;\n        this.data = data;\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e4cf18a112a9654fc6b018366fee7e4d1ca64a2c","contentHash":"4fcd8a057dc0de780296ddb592c9b322b4caee0cd8bfb99cb5800e65a2456f4c"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/key.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/key.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":21}},"2":{"start":{"line":8,"column":19},"end":{"line":8,"column":43}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":33}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":39}},"5":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"6":{"start":{"line":14,"column":99},"end":{"line":14,"column":154}},"7":{"start":{"line":14,"column":133},"end":{"line":14,"column":151}},"8":{"start":{"line":14,"column":164},"end":{"line":14,"column":326}},"9":{"start":{"line":14,"column":198},"end":{"line":14,"column":323}},"10":{"start":{"line":14,"column":329},"end":{"line":14,"column":349}},"11":{"start":{"line":16,"column":54},"end":{"line":16,"column":73}},"12":{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},"13":{"start":{"line":16,"column":125},"end":{"line":16,"column":161}},"14":{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},"15":{"start":{"line":16,"column":183},"end":{"line":16,"column":292}},"16":{"start":{"line":16,"column":225},"end":{"line":16,"column":288}},"17":{"start":{"line":16,"column":293},"end":{"line":16,"column":324}},"18":{"start":{"line":16,"column":327},"end":{"line":16,"column":339}},"19":{"start":{"line":18,"column":33},"end":{"line":18,"column":517}},"20":{"start":{"line":18,"column":46},"end":{"line":18,"column":47}},"21":{"start":{"line":18,"column":91},"end":{"line":18,"column":131}},"22":{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},"23":{"start":{"line":18,"column":146},"end":{"line":18,"column":247}},"24":{"start":{"line":18,"column":201},"end":{"line":18,"column":243}},"25":{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},"26":{"start":{"line":18,"column":295},"end":{"line":18,"column":369}},"27":{"start":{"line":18,"column":379},"end":{"line":18,"column":513}},"28":{"start":{"line":18,"column":428},"end":{"line":18,"column":509}},"29":{"start":{"line":18,"column":518},"end":{"line":18,"column":532}},"30":{"start":{"line":20,"column":77},"end":{"line":20,"column":175}},"31":{"start":{"line":20,"column":94},"end":{"line":20,"column":107}},"32":{"start":{"line":20,"column":121},"end":{"line":20,"column":131}},"33":{"start":{"line":20,"column":151},"end":{"line":20,"column":165}},"34":{"start":{"line":20,"column":166},"end":{"line":20,"column":173}},"35":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"36":{"start":{"line":20,"column":193},"end":{"line":20,"column":208}},"37":{"start":{"line":20,"column":218},"end":{"line":20,"column":261}},"38":{"start":{"line":22,"column":33},"end":{"line":22,"column":387}},"39":{"start":{"line":22,"column":65},"end":{"line":22,"column":69}},"40":{"start":{"line":22,"column":78},"end":{"line":22,"column":87}},"41":{"start":{"line":22,"column":89},"end":{"line":22,"column":384}},"42":{"start":{"line":22,"column":147},"end":{"line":22,"column":167}},"43":{"start":{"line":22,"column":193},"end":{"line":22,"column":264}},"44":{"start":{"line":22,"column":290},"end":{"line":22,"column":360}},"45":{"start":{"line":22,"column":363},"end":{"line":22,"column":380}},"46":{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},"47":{"start":{"line":24,"column":92},"end":{"line":24,"column":149}},"48":{"start":{"line":26,"column":44},"end":{"line":26,"column":315}},"49":{"start":{"line":26,"column":57},"end":{"line":26,"column":58}},"50":{"start":{"line":26,"column":102},"end":{"line":26,"column":110}},"51":{"start":{"line":26,"column":112},"end":{"line":26,"column":167}},"52":{"start":{"line":26,"column":168},"end":{"line":26,"column":199}},"53":{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},"54":{"start":{"line":26,"column":227},"end":{"line":26,"column":254}},"55":{"start":{"line":26,"column":255},"end":{"line":26,"column":313}},"56":{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},"57":{"start":{"line":28,"column":78},"end":{"line":28,"column":131}},"58":{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},"59":{"start":{"line":28,"column":149},"end":{"line":28,"column":193}},"60":{"start":{"line":28,"column":194},"end":{"line":28,"column":213}},"61":{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},"62":{"start":{"line":30,"column":124},"end":{"line":30,"column":136}},"63":{"start":{"line":30,"column":139},"end":{"line":30,"column":175}},"64":{"start":{"line":32,"column":30},"end":{"line":32,"column":176}},"65":{"start":{"line":32,"column":126},"end":{"line":32,"column":173}},"66":{"start":{"line":32,"column":177},"end":{"line":32,"column":203}},"67":{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},"68":{"start":{"line":34,"column":63},"end":{"line":34,"column":149}},"69":{"start":{"line":34,"column":152},"end":{"line":34,"column":164}},"70":{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},"71":{"start":{"line":36,"column":106},"end":{"line":36,"column":180}},"72":{"start":{"line":36,"column":183},"end":{"line":36,"column":328}},"73":{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},"74":{"start":{"line":36,"column":345},"end":{"line":36,"column":383}},"75":{"start":{"line":38,"column":33},"end":{"line":38,"column":138}},"76":{"start":{"line":38,"column":109},"end":{"line":38,"column":125}},"77":{"start":{"line":38,"column":126},"end":{"line":38,"column":135}},"78":{"start":{"line":38,"column":139},"end":{"line":38,"column":168}},"79":{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},"80":{"start":{"line":40,"column":62},"end":{"line":40,"column":166}},"81":{"start":{"line":40,"column":176},"end":{"line":40,"column":193}},"82":{"start":{"line":40,"column":196},"end":{"line":40,"column":207}},"83":{"start":{"line":44,"column":0},"end":{"line":128,"column":17}},"84":{"start":{"line":45,"column":2},"end":{"line":45,"column":26}},"85":{"start":{"line":52,"column":4},"end":{"line":52,"column":31}},"86":{"start":{"line":54,"column":4},"end":{"line":56,"column":5}},"87":{"start":{"line":54,"column":20},"end":{"line":54,"column":36}},"88":{"start":{"line":54,"column":45},"end":{"line":54,"column":60}},"89":{"start":{"line":54,"column":69},"end":{"line":54,"column":70}},"90":{"start":{"line":55,"column":6},"end":{"line":55,"column":35}},"91":{"start":{"line":58,"column":4},"end":{"line":58,"column":138}},"92":{"start":{"line":60,"column":4},"end":{"line":60,"column":71}},"93":{"start":{"line":62,"column":4},"end":{"line":62,"column":17}},"94":{"start":{"line":65,"column":2},"end":{"line":125,"column":6}},"95":{"start":{"line":68,"column":30},"end":{"line":78,"column":8}},"96":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"97":{"start":{"line":70,"column":10},"end":{"line":70,"column":101}},"98":{"start":{"line":73,"column":24},"end":{"line":73,"column":102}},"99":{"start":{"line":74,"column":23},"end":{"line":74,"column":115}},"100":{"start":{"line":75,"column":8},"end":{"line":75,"column":41}},"101":{"start":{"line":76,"column":8},"end":{"line":76,"column":56}},"102":{"start":{"line":77,"column":8},"end":{"line":77,"column":24}},"103":{"start":{"line":81,"column":8},"end":{"line":81,"column":56}},"104":{"start":{"line":84,"column":6},"end":{"line":84,"column":29}},"105":{"start":{"line":89,"column":26},"end":{"line":92,"column":8}},"106":{"start":{"line":90,"column":18},"end":{"line":90,"column":91}},"107":{"start":{"line":91,"column":8},"end":{"line":91,"column":74}},"108":{"start":{"line":95,"column":8},"end":{"line":95,"column":52}},"109":{"start":{"line":98,"column":6},"end":{"line":98,"column":25}},"110":{"start":{"line":103,"column":6},"end":{"line":103,"column":70}},"111":{"start":{"line":103,"column":63},"end":{"line":103,"column":70}},"112":{"start":{"line":105,"column":6},"end":{"line":105,"column":73}},"113":{"start":{"line":105,"column":23},"end":{"line":105,"column":73}},"114":{"start":{"line":106,"column":6},"end":{"line":106,"column":91}},"115":{"start":{"line":106,"column":42},"end":{"line":106,"column":91}},"116":{"start":{"line":107,"column":6},"end":{"line":107,"column":132}},"117":{"start":{"line":112,"column":6},"end":{"line":116,"column":7}},"118":{"start":{"line":113,"column":8},"end":{"line":113,"column":133}},"119":{"start":{"line":113,"column":67},"end":{"line":113,"column":133}},"120":{"start":{"line":114,"column":23},"end":{"line":114,"column":97}},"121":{"start":{"line":115,"column":8},"end":{"line":115,"column":41}},"122":{"start":{"line":118,"column":6},"end":{"line":118,"column":27}},"123":{"start":{"line":123,"column":6},"end":{"line":123,"column":46}},"124":{"start":{"line":127,"column":2},"end":{"line":127,"column":13}},"125":{"start":{"line":130,"column":0},"end":{"line":130,"column":18}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":351}},"line":14},"1":{"name":"_typeof","decl":{"start":{"line":14,"column":118},"end":{"line":14,"column":125}},"loc":{"start":{"line":14,"column":131},"end":{"line":14,"column":153}},"line":14},"2":{"name":"_typeof","decl":{"start":{"line":14,"column":183},"end":{"line":14,"column":190}},"loc":{"start":{"line":14,"column":196},"end":{"line":14,"column":325}},"line":14},"3":{"name":"ownKeys","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":16}},"loc":{"start":{"line":16,"column":41},"end":{"line":16,"column":341}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":16,"column":208},"end":{"line":16,"column":209}},"loc":{"start":{"line":16,"column":223},"end":{"line":16,"column":290}},"line":16},"5":{"name":"_objectSpread","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":22}},"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":534}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":184},"end":{"line":18,"column":185}},"loc":{"start":{"line":18,"column":199},"end":{"line":18,"column":245}},"line":18},"7":{"name":"(anonymous_7)","decl":{"start":{"line":18,"column":411},"end":{"line":18,"column":412}},"loc":{"start":{"line":18,"column":426},"end":{"line":18,"column":511}},"line":18},"8":{"name":"asyncGeneratorStep","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":75},"end":{"line":20,"column":265}},"line":20},"9":{"name":"_asyncToGenerator","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":389}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":40},"end":{"line":22,"column":41}},"loc":{"start":{"line":22,"column":52},"end":{"line":22,"column":386}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":22,"column":108},"end":{"line":22,"column":109}},"loc":{"start":{"line":22,"column":135},"end":{"line":22,"column":382}},"line":22},"12":{"name":"_next","decl":{"start":{"line":22,"column":178},"end":{"line":22,"column":183}},"loc":{"start":{"line":22,"column":191},"end":{"line":22,"column":266}},"line":22},"13":{"name":"_throw","decl":{"start":{"line":22,"column":276},"end":{"line":22,"column":282}},"loc":{"start":{"line":22,"column":288},"end":{"line":22,"column":362}},"line":22},"14":{"name":"_classCallCheck","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":24}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":153}},"line":24},"15":{"name":"_defineProperties","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":317}},"line":26},"16":{"name":"_createClass","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":21}},"loc":{"start":{"line":28,"column":60},"end":{"line":28,"column":215}},"line":28},"17":{"name":"_possibleConstructorReturn","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":35}},"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":177}},"line":30},"18":{"name":"_getPrototypeOf","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":24}},"loc":{"start":{"line":32,"column":28},"end":{"line":32,"column":205}},"line":32},"19":{"name":"_getPrototypeOf","decl":{"start":{"line":32,"column":105},"end":{"line":32,"column":120}},"loc":{"start":{"line":32,"column":124},"end":{"line":32,"column":175}},"line":32},"20":{"name":"_assertThisInitialized","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":31}},"loc":{"start":{"line":34,"column":38},"end":{"line":34,"column":166}},"line":34},"21":{"name":"_inherits","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":18}},"loc":{"start":{"line":36,"column":41},"end":{"line":36,"column":385}},"line":36},"22":{"name":"_setPrototypeOf","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":170}},"line":38},"23":{"name":"_setPrototypeOf","decl":{"start":{"line":38,"column":85},"end":{"line":38,"column":100}},"loc":{"start":{"line":38,"column":107},"end":{"line":38,"column":137}},"line":38},"24":{"name":"_defineProperty","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":24}},"loc":{"start":{"line":40,"column":42},"end":{"line":40,"column":209}},"line":40},"25":{"name":"(anonymous_25)","decl":{"start":{"line":44,"column":0},"end":{"line":44,"column":1}},"loc":{"start":{"line":44,"column":19},"end":{"line":128,"column":1}},"line":44},"26":{"name":"Key","decl":{"start":{"line":47,"column":11},"end":{"line":47,"column":14}},"loc":{"start":{"line":47,"column":17},"end":{"line":63,"column":3}},"line":47},"27":{"name":"(anonymous_27)","decl":{"start":{"line":67,"column":11},"end":{"line":67,"column":12}},"loc":{"start":{"line":67,"column":23},"end":{"line":85,"column":5}},"line":67},"28":{"name":"(anonymous_28)","decl":{"start":{"line":68,"column":48},"end":{"line":68,"column":49}},"loc":{"start":{"line":68,"column":63},"end":{"line":78,"column":7}},"line":68},"29":{"name":"signTransaction","decl":{"start":{"line":80,"column":15},"end":{"line":80,"column":30}},"loc":{"start":{"line":80,"column":35},"end":{"line":82,"column":7}},"line":80},"30":{"name":"(anonymous_30)","decl":{"start":{"line":88,"column":11},"end":{"line":88,"column":12}},"loc":{"start":{"line":88,"column":23},"end":{"line":99,"column":5}},"line":88},"31":{"name":"(anonymous_31)","decl":{"start":{"line":89,"column":44},"end":{"line":89,"column":45}},"loc":{"start":{"line":89,"column":64},"end":{"line":92,"column":7}},"line":89},"32":{"name":"signMessage","decl":{"start":{"line":94,"column":15},"end":{"line":94,"column":26}},"loc":{"start":{"line":94,"column":32},"end":{"line":96,"column":7}},"line":94},"33":{"name":"unlock","decl":{"start":{"line":102,"column":20},"end":{"line":102,"column":26}},"loc":{"start":{"line":102,"column":39},"end":{"line":108,"column":5}},"line":102},"34":{"name":"get","decl":{"start":{"line":111,"column":18},"end":{"line":111,"column":21}},"loc":{"start":{"line":111,"column":24},"end":{"line":119,"column":5}},"line":111},"35":{"name":"fromRecord","decl":{"start":{"line":122,"column":20},"end":{"line":122,"column":30}},"loc":{"start":{"line":122,"column":39},"end":{"line":124,"column":5}},"line":122}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"type":"if","locations":[{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},{"start":{"line":14,"column":24},"end":{"line":14,"column":328}}],"line":14},"1":{"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":95}},"type":"binary-expr","locations":[{"start":{"line":14,"column":28},"end":{"line":14,"column":56}},{"start":{"line":14,"column":60},"end":{"line":14,"column":95}}],"line":14},"2":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":322}},"type":"cond-expr","locations":[{"start":{"line":14,"column":301},"end":{"line":14,"column":309}},{"start":{"line":14,"column":312},"end":{"line":14,"column":322}}],"line":14},"3":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":298}},"type":"binary-expr","locations":[{"start":{"line":14,"column":205},"end":{"line":14,"column":208}},{"start":{"line":14,"column":212},"end":{"line":14,"column":240}},{"start":{"line":14,"column":244},"end":{"line":14,"column":270}},{"start":{"line":14,"column":274},"end":{"line":14,"column":298}}],"line":14},"4":{"loc":{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},"type":"if","locations":[{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},{"start":{"line":16,"column":75},"end":{"line":16,"column":326}}],"line":16},"5":{"loc":{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},"type":"if","locations":[{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},{"start":{"line":16,"column":163},"end":{"line":16,"column":292}}],"line":16},"6":{"loc":{"start":{"line":18,"column":91},"end":{"line":18,"column":131}},"type":"cond-expr","locations":[{"start":{"line":18,"column":114},"end":{"line":18,"column":126}},{"start":{"line":18,"column":129},"end":{"line":18,"column":131}}],"line":18},"7":{"loc":{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},"type":"if","locations":[{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},{"start":{"line":18,"column":133},"end":{"line":18,"column":515}}],"line":18},"8":{"loc":{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},"type":"if","locations":[{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},{"start":{"line":18,"column":255},"end":{"line":18,"column":515}}],"line":18},"9":{"loc":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"type":"if","locations":[{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},{"start":{"line":20,"column":176},"end":{"line":20,"column":263}}],"line":20},"10":{"loc":{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},"type":"if","locations":[{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},{"start":{"line":24,"column":50},"end":{"line":24,"column":151}}],"line":24},"11":{"loc":{"start":{"line":26,"column":136},"end":{"line":26,"column":166}},"type":"binary-expr","locations":[{"start":{"line":26,"column":136},"end":{"line":26,"column":157}},{"start":{"line":26,"column":161},"end":{"line":26,"column":166}}],"line":26},"12":{"loc":{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},"type":"if","locations":[{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},{"start":{"line":26,"column":200},"end":{"line":26,"column":254}}],"line":26},"13":{"loc":{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},"type":"if","locations":[{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},{"start":{"line":28,"column":62},"end":{"line":28,"column":131}}],"line":28},"14":{"loc":{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},"type":"if","locations":[{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},{"start":{"line":28,"column":132},"end":{"line":28,"column":193}}],"line":28},"15":{"loc":{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},"type":"if","locations":[{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},{"start":{"line":30,"column":50},"end":{"line":30,"column":138}}],"line":30},"16":{"loc":{"start":{"line":30,"column":54},"end":{"line":30,"column":120}},"type":"binary-expr","locations":[{"start":{"line":30,"column":54},"end":{"line":30,"column":58}},{"start":{"line":30,"column":63},"end":{"line":30,"column":89}},{"start":{"line":30,"column":93},"end":{"line":30,"column":119}}],"line":30},"17":{"loc":{"start":{"line":32,"column":48},"end":{"line":32,"column":175}},"type":"cond-expr","locations":[{"start":{"line":32,"column":72},"end":{"line":32,"column":93}},{"start":{"line":32,"column":96},"end":{"line":32,"column":175}}],"line":32},"18":{"loc":{"start":{"line":32,"column":133},"end":{"line":32,"column":172}},"type":"binary-expr","locations":[{"start":{"line":32,"column":133},"end":{"line":32,"column":144}},{"start":{"line":32,"column":148},"end":{"line":32,"column":172}}],"line":32},"19":{"loc":{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},"type":"if","locations":[{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},{"start":{"line":34,"column":40},"end":{"line":34,"column":151}}],"line":34},"20":{"loc":{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},"type":"if","locations":[{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},{"start":{"line":36,"column":43},"end":{"line":36,"column":182}}],"line":36},"21":{"loc":{"start":{"line":36,"column":47},"end":{"line":36,"column":102}},"type":"binary-expr","locations":[{"start":{"line":36,"column":47},"end":{"line":36,"column":79}},{"start":{"line":36,"column":83},"end":{"line":36,"column":102}}],"line":36},"22":{"loc":{"start":{"line":36,"column":218},"end":{"line":36,"column":252}},"type":"binary-expr","locations":[{"start":{"line":36,"column":218},"end":{"line":36,"column":228}},{"start":{"line":36,"column":232},"end":{"line":36,"column":252}}],"line":36},"23":{"loc":{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},"type":"if","locations":[{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},{"start":{"line":36,"column":329},"end":{"line":36,"column":383}}],"line":36},"24":{"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":137}},"type":"binary-expr","locations":[{"start":{"line":38,"column":51},"end":{"line":38,"column":72}},{"start":{"line":38,"column":76},"end":{"line":38,"column":137}}],"line":38},"25":{"loc":{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},"type":"if","locations":[{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},{"start":{"line":40,"column":44},"end":{"line":40,"column":195}}],"line":40},"26":{"loc":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},{"start":{"line":69,"column":8},"end":{"line":71,"column":9}}],"line":69},"27":{"loc":{"start":{"line":90,"column":18},"end":{"line":90,"column":91}},"type":"cond-expr","locations":[{"start":{"line":90,"column":71},"end":{"line":90,"column":83}},{"start":{"line":90,"column":86},"end":{"line":90,"column":91}}],"line":90},"28":{"loc":{"start":{"line":90,"column":18},"end":{"line":90,"column":68}},"type":"binary-expr","locations":[{"start":{"line":90,"column":18},"end":{"line":90,"column":38}},{"start":{"line":90,"column":42},"end":{"line":90,"column":68}}],"line":90},"29":{"loc":{"start":{"line":103,"column":6},"end":{"line":103,"column":70}},"type":"if","locations":[{"start":{"line":103,"column":6},"end":{"line":103,"column":70}},{"start":{"line":103,"column":6},"end":{"line":103,"column":70}}],"line":103},"30":{"loc":{"start":{"line":103,"column":10},"end":{"line":103,"column":61}},"type":"binary-expr","locations":[{"start":{"line":103,"column":10},"end":{"line":103,"column":30}},{"start":{"line":103,"column":34},"end":{"line":103,"column":61}}],"line":103},"31":{"loc":{"start":{"line":105,"column":6},"end":{"line":105,"column":73}},"type":"if","locations":[{"start":{"line":105,"column":6},"end":{"line":105,"column":73}},{"start":{"line":105,"column":6},"end":{"line":105,"column":73}}],"line":105},"32":{"loc":{"start":{"line":106,"column":6},"end":{"line":106,"column":91}},"type":"if","locations":[{"start":{"line":106,"column":6},"end":{"line":106,"column":91}},{"start":{"line":106,"column":6},"end":{"line":106,"column":91}}],"line":106},"33":{"loc":{"start":{"line":112,"column":6},"end":{"line":116,"column":7}},"type":"if","locations":[{"start":{"line":112,"column":6},"end":{"line":116,"column":7}},{"start":{"line":112,"column":6},"end":{"line":116,"column":7}}],"line":112},"34":{"loc":{"start":{"line":113,"column":8},"end":{"line":113,"column":133}},"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":133}},{"start":{"line":113,"column":8},"end":{"line":113,"column":133}}],"line":113},"35":{"loc":{"start":{"line":113,"column":12},"end":{"line":113,"column":65}},"type":"binary-expr","locations":[{"start":{"line":113,"column":12},"end":{"line":113,"column":33}},{"start":{"line":113,"column":37},"end":{"line":113,"column":65}}],"line":113}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":6,"12":6,"13":6,"14":6,"15":6,"16":0,"17":6,"18":6,"19":6,"20":6,"21":6,"22":6,"23":6,"24":36,"25":0,"26":0,"27":0,"28":0,"29":6,"30":9,"31":9,"32":9,"33":0,"34":0,"35":9,"36":3,"37":6,"38":2,"39":3,"40":3,"41":3,"42":3,"43":9,"44":0,"45":3,"46":5,"47":0,"48":2,"49":2,"50":5,"51":5,"52":5,"53":5,"54":4,"55":5,"56":1,"57":1,"58":1,"59":1,"60":1,"61":5,"62":0,"63":5,"64":1,"65":0,"66":1,"67":10,"68":0,"69":10,"70":1,"71":0,"72":1,"73":1,"74":1,"75":1,"76":0,"77":0,"78":1,"79":41,"80":0,"81":41,"82":41,"83":1,"84":1,"85":5,"86":5,"87":5,"88":5,"89":5,"90":10,"91":5,"92":5,"93":5,"94":1,"95":1,"96":3,"97":0,"98":3,"99":3,"100":3,"101":3,"102":3,"103":3,"104":1,"105":1,"106":0,"107":0,"108":0,"109":1,"110":4,"111":2,"112":2,"113":1,"114":1,"115":0,"116":1,"117":3,"118":3,"119":0,"120":3,"121":3,"122":3,"123":0,"124":1,"125":1},"f":{"0":0,"1":0,"2":0,"3":6,"4":0,"5":6,"6":36,"7":0,"8":9,"9":2,"10":3,"11":3,"12":9,"13":0,"14":5,"15":2,"16":1,"17":5,"18":1,"19":0,"20":10,"21":1,"22":1,"23":0,"24":41,"25":1,"26":5,"27":1,"28":3,"29":3,"30":1,"31":0,"32":0,"33":4,"34":3,"35":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[6,0],"5":[6,0],"6":[6,0],"7":[6,0],"8":[0,0],"9":[3,6],"10":[0,5],"11":[5,5],"12":[4,1],"13":[1,0],"14":[1,0],"15":[0,5],"16":[5,0,0],"17":[1,0],"18":[0,0],"19":[0,10],"20":[0,1],"21":[1,0],"22":[1,1],"23":[1,0],"24":[1,0],"25":[0,41],"26":[0,3],"27":[0,0],"28":[0,0],"29":[2,2],"30":[4,2],"31":[1,1],"32":[0,1],"33":[3,0],"34":[0,3],"35":[3,3]},"inputSourceMap":{"version":3,"sources":["key.ts"],"names":["Key","tx","txBody","Error","signature","keyPair","signedTx","SignedTransaction","key","data","sign","hash","getHash","message","enc","passphrase","privateKey","length","privateKeyEncrypted","Array","from","Uint8Array","_keyPair","identity","record","Record"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAUaA,G;;;;;;;;;;;;;;;;;;;;;;;;;;2DAGaC,E,EAA6C;AAC/D,YAAI,OAAOA,EAAE,CAACC,MAAV,KAAqB,WAAzB,EAAsC;AAClC,gBAAM,IAAIC,KAAJ,CAAU,yEAAV,CAAN;AACH;;AACD,YAAMC,SAAS,SAAS,+CAAqBH,EAAE,CAACC,MAAxB,GAAkC,KAAKG,OAAvC,CAAxB;AACA,YAAMC,QAAQ,GAAG,IAAIC,8BAAJ,CAAsBN,EAAE,CAACO,GAAzB,EAA8BP,EAAE,CAACQ,IAAjC,oBAA4CR,EAAE,CAACC,MAA/C,GAAyDE,SAAzD,CAAjB;AACAE,QAAAA,QAAQ,CAACJ,MAAT,CAAgBQ,IAAhB,GAAuBN,SAAvB;AACAE,QAAAA,QAAQ,CAACJ,MAAT,CAAgBS,IAAhB,SAA6BL,QAAQ,CAACM,OAAT,EAA7B;AACA,eAAON,QAAP;AACH,O;;;;;;;;;;;uDAEiBO,O,EAAyD;AAAA,YAAxCC,GAAwC,uEAAxB,KAAwB;AACvE,qBAAa,yBAAYD,OAAZ,EAAqB,KAAKR,OAA1B,EAAmCS,GAAnC,CAAb;AACH,O;;;;;;;;;;2BAEMC,U,EAA2B;AAC9B,UAAI,KAAKN,IAAL,CAAUO,UAAV,IAAwB,KAAKP,IAAL,CAAUO,UAAV,CAAqBC,MAAjD,EAAyD,OAD3B,CACmC;;AACjE,UAAI,CAACF,UAAL,EAAiB,MAAM,IAAIZ,KAAJ,CAAU,gCAAV,CAAN;AACjB,UAAI,CAAC,KAAKM,IAAL,CAAUS,mBAAf,EAAoC,MAAM,IAAIf,KAAJ,CAAU,+BAAV,CAAN;AACpC,WAAKM,IAAL,CAAUO,UAAV,GAAuBG,KAAK,CAACC,IAAN,CAAW,+BAAkBC,UAAU,CAACD,IAAX,CAAgB,KAAKX,IAAL,CAAUS,mBAA1B,CAAlB,EAAkEH,UAAlE,CAAX,CAAvB;AACH;;;wBAEkB;AACf,UAAI,CAAC,KAAKO,QAAV,EAAoB;AAChB,YAAI,CAAC,KAAKb,IAAL,CAAUO,UAAX,IAAyB,CAAC,KAAKP,IAAL,CAAUO,UAAV,CAAqBC,MAAnD,EAA2D,MAAM,IAAId,KAAJ,CAAU,gDAAV,CAAN;AAC3D,YAAMoB,QAAQ,GAAG,oCAAuBF,UAAU,CAACD,IAAX,CAAgB,KAAKX,IAAL,CAAUO,UAA1B,CAAvB,CAAjB;AACA,aAAKM,QAAL,GAAgBC,QAAQ,CAAClB,OAAzB;AACH;;AACD,aAAO,KAAKiB,QAAZ;AACH;;;+BAEiBE,M,EAA0B;AACxC,aAAO,IAAIxB,GAAJ,CAAQwB,MAAM,CAAChB,GAAf,EAAoBgB,MAAM,CAACf,IAA3B,CAAP;AACH;;;;EApCoBgB,c","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models","sourcesContent":["import { Transaction, SignedTransaction } from './transaction';\nimport { Record, Data } from './record';\nimport { identifyFromPrivateKey, decryptPrivateKey, signTransaction, signMessage } from '@herajs/crypto';\n\ntype Encoding = 'ascii' | 'utf8' | 'utf-8' | 'utf16le' | 'ucs2' | 'ucs-2' | 'base64' | 'latin1' | 'binary' | 'hex';\n\nexport interface KeyData extends Data {\n    address: string;\n    privateKey: number[] | null;\n    privateKeyEncrypted: number[] | null;\n}\n\nexport class Key extends Record<KeyData> {\n    private _keyPair?: any;\n\n    async signTransaction(tx: Transaction): Promise<SignedTransaction> {\n        if (typeof tx.txBody === 'undefined') {\n            throw new Error('cannot sign transaction without txBody. Did you use prepareTransaction?');\n        }\n        const signature = await signTransaction({ ...tx.txBody }, this.keyPair);\n        const signedTx = new SignedTransaction(tx.key, tx.data, { ...tx.txBody }, signature);\n        signedTx.txBody.sign = signature;\n        signedTx.txBody.hash = await signedTx.getHash();\n        return signedTx;\n    }\n\n    async signMessage(message: Buffer, enc: Encoding = 'hex'): Promise<string> {\n        return await signMessage(message, this.keyPair, enc);\n    }\n\n    unlock(passphrase?: string): void {\n        if (this.data.privateKey && this.data.privateKey.length) return; // already unlocked\n        if (!passphrase) throw new Error('unlock wallet before using key');\n        if (!this.data.privateKeyEncrypted) throw new Error('missing encrypted private key');\n        this.data.privateKey = Array.from(decryptPrivateKey(Uint8Array.from(this.data.privateKeyEncrypted), passphrase));\n    }\n\n    get keyPair(): any {\n        if (!this._keyPair) {\n            if (!this.data.privateKey || !this.data.privateKey.length) throw new Error('missing private key, did you forget to unlock?');\n            const identity = identifyFromPrivateKey(Uint8Array.from(this.data.privateKey));\n            this._keyPair = identity.keyPair;\n        }\n        return this._keyPair;\n    }\n\n    static fromRecord(record: Record<any>): Key {\n        return new Key(record.key, record.data as KeyData);\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1841d7e9772e7d235ec8e4e1f53f6c590252d897","contentHash":"eb0fd9bedd3ad9be5148f6bd4fca4676dffc3515c9d4b26fc5b138838079a774"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/setting.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/setting.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":36}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":24},"end":{"line":10,"column":328}},"4":{"start":{"line":10,"column":99},"end":{"line":10,"column":154}},"5":{"start":{"line":10,"column":133},"end":{"line":10,"column":151}},"6":{"start":{"line":10,"column":164},"end":{"line":10,"column":326}},"7":{"start":{"line":10,"column":198},"end":{"line":10,"column":323}},"8":{"start":{"line":10,"column":329},"end":{"line":10,"column":349}},"9":{"start":{"line":12,"column":50},"end":{"line":12,"column":151}},"10":{"start":{"line":12,"column":92},"end":{"line":12,"column":149}},"11":{"start":{"line":14,"column":50},"end":{"line":14,"column":138}},"12":{"start":{"line":14,"column":124},"end":{"line":14,"column":136}},"13":{"start":{"line":14,"column":139},"end":{"line":14,"column":175}},"14":{"start":{"line":16,"column":40},"end":{"line":16,"column":151}},"15":{"start":{"line":16,"column":63},"end":{"line":16,"column":149}},"16":{"start":{"line":16,"column":152},"end":{"line":16,"column":164}},"17":{"start":{"line":18,"column":30},"end":{"line":18,"column":176}},"18":{"start":{"line":18,"column":126},"end":{"line":18,"column":173}},"19":{"start":{"line":18,"column":177},"end":{"line":18,"column":203}},"20":{"start":{"line":20,"column":43},"end":{"line":20,"column":182}},"21":{"start":{"line":20,"column":106},"end":{"line":20,"column":180}},"22":{"start":{"line":20,"column":183},"end":{"line":20,"column":328}},"23":{"start":{"line":20,"column":329},"end":{"line":20,"column":383}},"24":{"start":{"line":20,"column":345},"end":{"line":20,"column":383}},"25":{"start":{"line":22,"column":33},"end":{"line":22,"column":138}},"26":{"start":{"line":22,"column":109},"end":{"line":22,"column":125}},"27":{"start":{"line":22,"column":126},"end":{"line":22,"column":135}},"28":{"start":{"line":22,"column":139},"end":{"line":22,"column":168}},"29":{"start":{"line":26,"column":0},"end":{"line":36,"column":17}},"30":{"start":{"line":27,"column":2},"end":{"line":27,"column":41}},"31":{"start":{"line":30,"column":4},"end":{"line":30,"column":46}},"32":{"start":{"line":32,"column":4},"end":{"line":32,"column":104}},"33":{"start":{"line":35,"column":2},"end":{"line":35,"column":28}},"34":{"start":{"line":38,"column":0},"end":{"line":38,"column":48}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":16}},"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":351}},"line":10},"1":{"name":"_typeof","decl":{"start":{"line":10,"column":118},"end":{"line":10,"column":125}},"loc":{"start":{"line":10,"column":131},"end":{"line":10,"column":153}},"line":10},"2":{"name":"_typeof","decl":{"start":{"line":10,"column":183},"end":{"line":10,"column":190}},"loc":{"start":{"line":10,"column":196},"end":{"line":10,"column":325}},"line":10},"3":{"name":"_classCallCheck","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":24}},"loc":{"start":{"line":12,"column":48},"end":{"line":12,"column":153}},"line":12},"4":{"name":"_possibleConstructorReturn","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":35}},"loc":{"start":{"line":14,"column":48},"end":{"line":14,"column":177}},"line":14},"5":{"name":"_assertThisInitialized","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":38},"end":{"line":16,"column":166}},"line":16},"6":{"name":"_getPrototypeOf","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":24}},"loc":{"start":{"line":18,"column":28},"end":{"line":18,"column":205}},"line":18},"7":{"name":"_getPrototypeOf","decl":{"start":{"line":18,"column":105},"end":{"line":18,"column":120}},"loc":{"start":{"line":18,"column":124},"end":{"line":18,"column":175}},"line":18},"8":{"name":"_inherits","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":18}},"loc":{"start":{"line":20,"column":41},"end":{"line":20,"column":385}},"line":20},"9":{"name":"_setPrototypeOf","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":24}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":170}},"line":22},"10":{"name":"_setPrototypeOf","decl":{"start":{"line":22,"column":85},"end":{"line":22,"column":100}},"loc":{"start":{"line":22,"column":107},"end":{"line":22,"column":137}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":0},"end":{"line":26,"column":1}},"loc":{"start":{"line":26,"column":19},"end":{"line":36,"column":1}},"line":26},"12":{"name":"EncryptedIdSetting","decl":{"start":{"line":29,"column":11},"end":{"line":29,"column":29}},"loc":{"start":{"line":29,"column":32},"end":{"line":33,"column":3}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":24},"end":{"line":10,"column":328}},"type":"if","locations":[{"start":{"line":10,"column":24},"end":{"line":10,"column":328}},{"start":{"line":10,"column":24},"end":{"line":10,"column":328}}],"line":10},"1":{"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":95}},"type":"binary-expr","locations":[{"start":{"line":10,"column":28},"end":{"line":10,"column":56}},{"start":{"line":10,"column":60},"end":{"line":10,"column":95}}],"line":10},"2":{"loc":{"start":{"line":10,"column":205},"end":{"line":10,"column":322}},"type":"cond-expr","locations":[{"start":{"line":10,"column":301},"end":{"line":10,"column":309}},{"start":{"line":10,"column":312},"end":{"line":10,"column":322}}],"line":10},"3":{"loc":{"start":{"line":10,"column":205},"end":{"line":10,"column":298}},"type":"binary-expr","locations":[{"start":{"line":10,"column":205},"end":{"line":10,"column":208}},{"start":{"line":10,"column":212},"end":{"line":10,"column":240}},{"start":{"line":10,"column":244},"end":{"line":10,"column":270}},{"start":{"line":10,"column":274},"end":{"line":10,"column":298}}],"line":10},"4":{"loc":{"start":{"line":12,"column":50},"end":{"line":12,"column":151}},"type":"if","locations":[{"start":{"line":12,"column":50},"end":{"line":12,"column":151}},{"start":{"line":12,"column":50},"end":{"line":12,"column":151}}],"line":12},"5":{"loc":{"start":{"line":14,"column":50},"end":{"line":14,"column":138}},"type":"if","locations":[{"start":{"line":14,"column":50},"end":{"line":14,"column":138}},{"start":{"line":14,"column":50},"end":{"line":14,"column":138}}],"line":14},"6":{"loc":{"start":{"line":14,"column":54},"end":{"line":14,"column":120}},"type":"binary-expr","locations":[{"start":{"line":14,"column":54},"end":{"line":14,"column":58}},{"start":{"line":14,"column":63},"end":{"line":14,"column":89}},{"start":{"line":14,"column":93},"end":{"line":14,"column":119}}],"line":14},"7":{"loc":{"start":{"line":16,"column":40},"end":{"line":16,"column":151}},"type":"if","locations":[{"start":{"line":16,"column":40},"end":{"line":16,"column":151}},{"start":{"line":16,"column":40},"end":{"line":16,"column":151}}],"line":16},"8":{"loc":{"start":{"line":18,"column":48},"end":{"line":18,"column":175}},"type":"cond-expr","locations":[{"start":{"line":18,"column":72},"end":{"line":18,"column":93}},{"start":{"line":18,"column":96},"end":{"line":18,"column":175}}],"line":18},"9":{"loc":{"start":{"line":18,"column":133},"end":{"line":18,"column":172}},"type":"binary-expr","locations":[{"start":{"line":18,"column":133},"end":{"line":18,"column":144}},{"start":{"line":18,"column":148},"end":{"line":18,"column":172}}],"line":18},"10":{"loc":{"start":{"line":20,"column":43},"end":{"line":20,"column":182}},"type":"if","locations":[{"start":{"line":20,"column":43},"end":{"line":20,"column":182}},{"start":{"line":20,"column":43},"end":{"line":20,"column":182}}],"line":20},"11":{"loc":{"start":{"line":20,"column":47},"end":{"line":20,"column":102}},"type":"binary-expr","locations":[{"start":{"line":20,"column":47},"end":{"line":20,"column":79}},{"start":{"line":20,"column":83},"end":{"line":20,"column":102}}],"line":20},"12":{"loc":{"start":{"line":20,"column":218},"end":{"line":20,"column":252}},"type":"binary-expr","locations":[{"start":{"line":20,"column":218},"end":{"line":20,"column":228}},{"start":{"line":20,"column":232},"end":{"line":20,"column":252}}],"line":20},"13":{"loc":{"start":{"line":20,"column":329},"end":{"line":20,"column":383}},"type":"if","locations":[{"start":{"line":20,"column":329},"end":{"line":20,"column":383}},{"start":{"line":20,"column":329},"end":{"line":20,"column":383}}],"line":20},"14":{"loc":{"start":{"line":22,"column":51},"end":{"line":22,"column":137}},"type":"binary-expr","locations":[{"start":{"line":22,"column":51},"end":{"line":22,"column":72}},{"start":{"line":22,"column":76},"end":{"line":22,"column":137}}],"line":22}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":2,"10":0,"11":2,"12":0,"13":2,"14":2,"15":0,"16":2,"17":1,"18":0,"19":1,"20":1,"21":0,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":1,"31":2,"32":2,"33":1,"34":1},"f":{"0":0,"1":0,"2":0,"3":2,"4":2,"5":2,"6":1,"7":0,"8":1,"9":1,"10":0,"11":1,"12":2},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[0,2],"5":[0,2],"6":[2,0,0],"7":[0,2],"8":[1,0],"9":[0,0],"10":[0,1],"11":[1,0],"12":[1,1],"13":[1,0],"14":[1,0]},"inputSourceMap":{"version":3,"sources":["setting.ts"],"names":["EncryptedIdSetting","Record"],"mappings":";;;;;;;AACA;;;;;;;;;;;;;;;;IAMaA,kB;;;;;;;;;;;;EAA2BC,c","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models","sourcesContent":["\nimport { Record, Data } from './record';\n\nexport interface EncryptedIdData extends Data {\n    value: number[];\n}\n\nexport class EncryptedIdSetting extends Record<EncryptedIdData> {\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c47212e8e8e328c8d8c04e477ca120406666f35f","contentHash":"18e95ff6f36342f9872bad355b0d707fadf61972857acdf3b250a80397fef170"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/utils.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/utils.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":50}},"2":{"start":{"line":7,"column":0},"end":{"line":7,"column":52}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":46}},"4":{"start":{"line":9,"column":0},"end":{"line":9,"column":56}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":50}},"6":{"start":{"line":11,"column":0},"end":{"line":11,"column":38}},"7":{"start":{"line":12,"column":0},"end":{"line":12,"column":28}},"8":{"start":{"line":13,"column":0},"end":{"line":13,"column":61}},"9":{"start":{"line":15,"column":25},"end":{"line":15,"column":65}},"10":{"start":{"line":17,"column":24},"end":{"line":17,"column":328}},"11":{"start":{"line":17,"column":99},"end":{"line":17,"column":154}},"12":{"start":{"line":17,"column":133},"end":{"line":17,"column":151}},"13":{"start":{"line":17,"column":164},"end":{"line":17,"column":326}},"14":{"start":{"line":17,"column":198},"end":{"line":17,"column":323}},"15":{"start":{"line":17,"column":329},"end":{"line":17,"column":349}},"16":{"start":{"line":19,"column":50},"end":{"line":19,"column":138}},"17":{"start":{"line":19,"column":124},"end":{"line":19,"column":136}},"18":{"start":{"line":19,"column":139},"end":{"line":19,"column":175}},"19":{"start":{"line":21,"column":30},"end":{"line":21,"column":176}},"20":{"start":{"line":21,"column":126},"end":{"line":21,"column":173}},"21":{"start":{"line":21,"column":177},"end":{"line":21,"column":203}},"22":{"start":{"line":23,"column":40},"end":{"line":23,"column":151}},"23":{"start":{"line":23,"column":63},"end":{"line":23,"column":149}},"24":{"start":{"line":23,"column":152},"end":{"line":23,"column":164}},"25":{"start":{"line":25,"column":43},"end":{"line":25,"column":182}},"26":{"start":{"line":25,"column":106},"end":{"line":25,"column":180}},"27":{"start":{"line":25,"column":183},"end":{"line":25,"column":328}},"28":{"start":{"line":25,"column":329},"end":{"line":25,"column":383}},"29":{"start":{"line":25,"column":345},"end":{"line":25,"column":383}},"30":{"start":{"line":27,"column":33},"end":{"line":27,"column":138}},"31":{"start":{"line":27,"column":109},"end":{"line":27,"column":125}},"32":{"start":{"line":27,"column":126},"end":{"line":27,"column":135}},"33":{"start":{"line":27,"column":139},"end":{"line":27,"column":168}},"34":{"start":{"line":29,"column":50},"end":{"line":29,"column":151}},"35":{"start":{"line":29,"column":92},"end":{"line":29,"column":149}},"36":{"start":{"line":31,"column":44},"end":{"line":31,"column":315}},"37":{"start":{"line":31,"column":57},"end":{"line":31,"column":58}},"38":{"start":{"line":31,"column":102},"end":{"line":31,"column":110}},"39":{"start":{"line":31,"column":112},"end":{"line":31,"column":167}},"40":{"start":{"line":31,"column":168},"end":{"line":31,"column":199}},"41":{"start":{"line":31,"column":200},"end":{"line":31,"column":254}},"42":{"start":{"line":31,"column":227},"end":{"line":31,"column":254}},"43":{"start":{"line":31,"column":255},"end":{"line":31,"column":313}},"44":{"start":{"line":33,"column":62},"end":{"line":33,"column":131}},"45":{"start":{"line":33,"column":78},"end":{"line":33,"column":131}},"46":{"start":{"line":33,"column":132},"end":{"line":33,"column":193}},"47":{"start":{"line":33,"column":149},"end":{"line":33,"column":193}},"48":{"start":{"line":33,"column":194},"end":{"line":33,"column":213}},"49":{"start":{"line":35,"column":44},"end":{"line":35,"column":195}},"50":{"start":{"line":35,"column":62},"end":{"line":35,"column":166}},"51":{"start":{"line":35,"column":176},"end":{"line":35,"column":193}},"52":{"start":{"line":35,"column":196},"end":{"line":35,"column":207}},"53":{"start":{"line":47,"column":19},"end":{"line":47,"column":91}},"54":{"start":{"line":48,"column":2},"end":{"line":48,"column":53}},"55":{"start":{"line":57,"column":16},"end":{"line":57,"column":85}},"56":{"start":{"line":58,"column":2},"end":{"line":58,"column":61}},"57":{"start":{"line":67,"column":16},"end":{"line":67,"column":79}},"58":{"start":{"line":68,"column":2},"end":{"line":68,"column":55}},"59":{"start":{"line":78,"column":14},"end":{"line":78,"column":35}},"60":{"start":{"line":80,"column":2},"end":{"line":84,"column":3}},"61":{"start":{"line":81,"column":4},"end":{"line":83,"column":6}},"62":{"start":{"line":86,"column":2},"end":{"line":90,"column":3}},"63":{"start":{"line":87,"column":4},"end":{"line":89,"column":6}},"64":{"start":{"line":92,"column":2},"end":{"line":95,"column":4}},"65":{"start":{"line":105,"column":20},"end":{"line":105,"column":54}},"66":{"start":{"line":106,"column":2},"end":{"line":109,"column":4}},"67":{"start":{"line":119,"column":0},"end":{"line":175,"column":3}},"68":{"start":{"line":121,"column":4},"end":{"line":121,"column":35}},"69":{"start":{"line":123,"column":4},"end":{"line":123,"column":44}},"70":{"start":{"line":126,"column":2},"end":{"line":172,"column":6}},"71":{"start":{"line":129,"column":6},"end":{"line":129,"column":65}},"72":{"start":{"line":134,"column":6},"end":{"line":134,"column":42}},"73":{"start":{"line":135,"column":6},"end":{"line":135,"column":18}},"74":{"start":{"line":140,"column":6},"end":{"line":140,"column":42}},"75":{"start":{"line":145,"column":6},"end":{"line":145,"column":42}},"76":{"start":{"line":150,"column":6},"end":{"line":150,"column":48}},"77":{"start":{"line":155,"column":6},"end":{"line":155,"column":23}},"78":{"start":{"line":160,"column":6},"end":{"line":160,"column":31}},"79":{"start":{"line":165,"column":6},"end":{"line":165,"column":29}},"80":{"start":{"line":170,"column":6},"end":{"line":170,"column":27}},"81":{"start":{"line":174,"column":2},"end":{"line":174,"column":17}},"82":{"start":{"line":177,"column":0},"end":{"line":177,"column":26}},"83":{"start":{"line":181,"column":0},"end":{"line":217,"column":39}},"84":{"start":{"line":182,"column":2},"end":{"line":182,"column":59}},"85":{"start":{"line":189,"column":4},"end":{"line":189,"column":53}},"86":{"start":{"line":191,"column":4},"end":{"line":193,"column":5}},"87":{"start":{"line":191,"column":20},"end":{"line":191,"column":36}},"88":{"start":{"line":191,"column":45},"end":{"line":191,"column":60}},"89":{"start":{"line":191,"column":69},"end":{"line":191,"column":70}},"90":{"start":{"line":192,"column":6},"end":{"line":192,"column":35}},"91":{"start":{"line":195,"column":4},"end":{"line":195,"column":160}},"92":{"start":{"line":197,"column":4},"end":{"line":197,"column":67}},"93":{"start":{"line":199,"column":4},"end":{"line":199,"column":17}},"94":{"start":{"line":202,"column":2},"end":{"line":214,"column":6}},"95":{"start":{"line":205,"column":6},"end":{"line":205,"column":31}},"96":{"start":{"line":205,"column":24},"end":{"line":205,"column":31}},"97":{"start":{"line":206,"column":6},"end":{"line":206,"column":26}},"98":{"start":{"line":211,"column":6},"end":{"line":211,"column":30}},"99":{"start":{"line":211,"column":23},"end":{"line":211,"column":30}},"100":{"start":{"line":212,"column":6},"end":{"line":212,"column":25}},"101":{"start":{"line":216,"column":2},"end":{"line":216,"column":35}},"102":{"start":{"line":219,"column":0},"end":{"line":219,"column":62}},"103":{"start":{"line":222,"column":2},"end":{"line":222,"column":35}},"104":{"start":{"line":233,"column":2},"end":{"line":233,"column":51}},"105":{"start":{"line":233,"column":34},"end":{"line":233,"column":51}},"106":{"start":{"line":234,"column":17},"end":{"line":234,"column":34}},"107":{"start":{"line":236,"column":2},"end":{"line":242,"column":3}},"108":{"start":{"line":237,"column":4},"end":{"line":237,"column":52}},"109":{"start":{"line":237,"column":35},"end":{"line":237,"column":52}},"110":{"start":{"line":238,"column":15},"end":{"line":238,"column":66}},"111":{"start":{"line":239,"column":23},"end":{"line":239,"column":30}},"112":{"start":{"line":240,"column":15},"end":{"line":240,"column":22}},"113":{"start":{"line":241,"column":4},"end":{"line":241,"column":45}},"114":{"start":{"line":244,"column":2},"end":{"line":244,"column":19}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":16}},"loc":{"start":{"line":17,"column":22},"end":{"line":17,"column":351}},"line":17},"1":{"name":"_typeof","decl":{"start":{"line":17,"column":118},"end":{"line":17,"column":125}},"loc":{"start":{"line":17,"column":131},"end":{"line":17,"column":153}},"line":17},"2":{"name":"_typeof","decl":{"start":{"line":17,"column":183},"end":{"line":17,"column":190}},"loc":{"start":{"line":17,"column":196},"end":{"line":17,"column":325}},"line":17},"3":{"name":"_possibleConstructorReturn","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":35}},"loc":{"start":{"line":19,"column":48},"end":{"line":19,"column":177}},"line":19},"4":{"name":"_getPrototypeOf","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":24}},"loc":{"start":{"line":21,"column":28},"end":{"line":21,"column":205}},"line":21},"5":{"name":"_getPrototypeOf","decl":{"start":{"line":21,"column":105},"end":{"line":21,"column":120}},"loc":{"start":{"line":21,"column":124},"end":{"line":21,"column":175}},"line":21},"6":{"name":"_assertThisInitialized","decl":{"start":{"line":23,"column":9},"end":{"line":23,"column":31}},"loc":{"start":{"line":23,"column":38},"end":{"line":23,"column":166}},"line":23},"7":{"name":"_inherits","decl":{"start":{"line":25,"column":9},"end":{"line":25,"column":18}},"loc":{"start":{"line":25,"column":41},"end":{"line":25,"column":385}},"line":25},"8":{"name":"_setPrototypeOf","decl":{"start":{"line":27,"column":9},"end":{"line":27,"column":24}},"loc":{"start":{"line":27,"column":31},"end":{"line":27,"column":170}},"line":27},"9":{"name":"_setPrototypeOf","decl":{"start":{"line":27,"column":85},"end":{"line":27,"column":100}},"loc":{"start":{"line":27,"column":107},"end":{"line":27,"column":137}},"line":27},"10":{"name":"_classCallCheck","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":24}},"loc":{"start":{"line":29,"column":48},"end":{"line":29,"column":153}},"line":29},"11":{"name":"_defineProperties","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":26}},"loc":{"start":{"line":31,"column":42},"end":{"line":31,"column":317}},"line":31},"12":{"name":"_createClass","decl":{"start":{"line":33,"column":9},"end":{"line":33,"column":21}},"loc":{"start":{"line":33,"column":60},"end":{"line":33,"column":215}},"line":33},"13":{"name":"_defineProperty","decl":{"start":{"line":35,"column":9},"end":{"line":35,"column":24}},"loc":{"start":{"line":35,"column":42},"end":{"line":35,"column":209}},"line":35},"14":{"name":"backoffIntervalStep","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":28}},"loc":{"start":{"line":46,"column":32},"end":{"line":49,"column":1}},"line":46},"15":{"name":"serializeAccountSpec","decl":{"start":{"line":56,"column":9},"end":{"line":56,"column":29}},"loc":{"start":{"line":56,"column":43},"end":{"line":59,"column":1}},"line":56},"16":{"name":"serializeNameSpec","decl":{"start":{"line":66,"column":9},"end":{"line":66,"column":26}},"loc":{"start":{"line":66,"column":37},"end":{"line":69,"column":1}},"line":66},"17":{"name":"deserializeAccountSpec","decl":{"start":{"line":77,"column":9},"end":{"line":77,"column":31}},"loc":{"start":{"line":77,"column":44},"end":{"line":96,"column":1}},"line":77},"18":{"name":"deserializeNameSpec","decl":{"start":{"line":104,"column":9},"end":{"line":104,"column":28}},"loc":{"start":{"line":104,"column":41},"end":{"line":110,"column":1}},"line":104},"19":{"name":"(anonymous_19)","decl":{"start":{"line":119,"column":0},"end":{"line":119,"column":1}},"loc":{"start":{"line":119,"column":12},"end":{"line":175,"column":1}},"line":119},"20":{"name":"HashMap","decl":{"start":{"line":120,"column":11},"end":{"line":120,"column":18}},"loc":{"start":{"line":120,"column":21},"end":{"line":124,"column":3}},"line":120},"21":{"name":"hash","decl":{"start":{"line":128,"column":20},"end":{"line":128,"column":24}},"loc":{"start":{"line":128,"column":30},"end":{"line":130,"column":5}},"line":128},"22":{"name":"set","decl":{"start":{"line":133,"column":20},"end":{"line":133,"column":23}},"loc":{"start":{"line":133,"column":36},"end":{"line":136,"column":5}},"line":133},"23":{"name":"get","decl":{"start":{"line":139,"column":20},"end":{"line":139,"column":23}},"loc":{"start":{"line":139,"column":29},"end":{"line":141,"column":5}},"line":139},"24":{"name":"has","decl":{"start":{"line":144,"column":20},"end":{"line":144,"column":23}},"loc":{"start":{"line":144,"column":29},"end":{"line":146,"column":5}},"line":144},"25":{"name":"_delete","decl":{"start":{"line":149,"column":20},"end":{"line":149,"column":27}},"loc":{"start":{"line":149,"column":33},"end":{"line":151,"column":5}},"line":149},"26":{"name":"clear","decl":{"start":{"line":154,"column":20},"end":{"line":154,"column":25}},"loc":{"start":{"line":154,"column":28},"end":{"line":156,"column":5}},"line":154},"27":{"name":"values","decl":{"start":{"line":159,"column":20},"end":{"line":159,"column":26}},"loc":{"start":{"line":159,"column":29},"end":{"line":161,"column":5}},"line":159},"28":{"name":"keys","decl":{"start":{"line":164,"column":20},"end":{"line":164,"column":24}},"loc":{"start":{"line":164,"column":27},"end":{"line":166,"column":5}},"line":164},"29":{"name":"get","decl":{"start":{"line":169,"column":18},"end":{"line":169,"column":21}},"loc":{"start":{"line":169,"column":24},"end":{"line":171,"column":5}},"line":169},"30":{"name":"(anonymous_30)","decl":{"start":{"line":181,"column":0},"end":{"line":181,"column":1}},"loc":{"start":{"line":181,"column":30},"end":{"line":217,"column":1}},"line":181},"31":{"name":"PausableTypedEventEmitter","decl":{"start":{"line":184,"column":11},"end":{"line":184,"column":36}},"loc":{"start":{"line":184,"column":39},"end":{"line":200,"column":3}},"line":184},"32":{"name":"resume","decl":{"start":{"line":204,"column":20},"end":{"line":204,"column":26}},"loc":{"start":{"line":204,"column":29},"end":{"line":207,"column":5}},"line":204},"33":{"name":"pause","decl":{"start":{"line":210,"column":20},"end":{"line":210,"column":25}},"loc":{"start":{"line":210,"column":28},"end":{"line":213,"column":5}},"line":210},"34":{"name":"isConstructor","decl":{"start":{"line":221,"column":9},"end":{"line":221,"column":22}},"loc":{"start":{"line":221,"column":28},"end":{"line":223,"column":1}},"line":221},"35":{"name":"propPath","decl":{"start":{"line":232,"column":9},"end":{"line":232,"column":17}},"loc":{"start":{"line":232,"column":29},"end":{"line":245,"column":1}},"line":232}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":24},"end":{"line":17,"column":328}},"type":"if","locations":[{"start":{"line":17,"column":24},"end":{"line":17,"column":328}},{"start":{"line":17,"column":24},"end":{"line":17,"column":328}}],"line":17},"1":{"loc":{"start":{"line":17,"column":28},"end":{"line":17,"column":95}},"type":"binary-expr","locations":[{"start":{"line":17,"column":28},"end":{"line":17,"column":56}},{"start":{"line":17,"column":60},"end":{"line":17,"column":95}}],"line":17},"2":{"loc":{"start":{"line":17,"column":205},"end":{"line":17,"column":322}},"type":"cond-expr","locations":[{"start":{"line":17,"column":301},"end":{"line":17,"column":309}},{"start":{"line":17,"column":312},"end":{"line":17,"column":322}}],"line":17},"3":{"loc":{"start":{"line":17,"column":205},"end":{"line":17,"column":298}},"type":"binary-expr","locations":[{"start":{"line":17,"column":205},"end":{"line":17,"column":208}},{"start":{"line":17,"column":212},"end":{"line":17,"column":240}},{"start":{"line":17,"column":244},"end":{"line":17,"column":270}},{"start":{"line":17,"column":274},"end":{"line":17,"column":298}}],"line":17},"4":{"loc":{"start":{"line":19,"column":50},"end":{"line":19,"column":138}},"type":"if","locations":[{"start":{"line":19,"column":50},"end":{"line":19,"column":138}},{"start":{"line":19,"column":50},"end":{"line":19,"column":138}}],"line":19},"5":{"loc":{"start":{"line":19,"column":54},"end":{"line":19,"column":120}},"type":"binary-expr","locations":[{"start":{"line":19,"column":54},"end":{"line":19,"column":58}},{"start":{"line":19,"column":63},"end":{"line":19,"column":89}},{"start":{"line":19,"column":93},"end":{"line":19,"column":119}}],"line":19},"6":{"loc":{"start":{"line":21,"column":48},"end":{"line":21,"column":175}},"type":"cond-expr","locations":[{"start":{"line":21,"column":72},"end":{"line":21,"column":93}},{"start":{"line":21,"column":96},"end":{"line":21,"column":175}}],"line":21},"7":{"loc":{"start":{"line":21,"column":133},"end":{"line":21,"column":172}},"type":"binary-expr","locations":[{"start":{"line":21,"column":133},"end":{"line":21,"column":144}},{"start":{"line":21,"column":148},"end":{"line":21,"column":172}}],"line":21},"8":{"loc":{"start":{"line":23,"column":40},"end":{"line":23,"column":151}},"type":"if","locations":[{"start":{"line":23,"column":40},"end":{"line":23,"column":151}},{"start":{"line":23,"column":40},"end":{"line":23,"column":151}}],"line":23},"9":{"loc":{"start":{"line":25,"column":43},"end":{"line":25,"column":182}},"type":"if","locations":[{"start":{"line":25,"column":43},"end":{"line":25,"column":182}},{"start":{"line":25,"column":43},"end":{"line":25,"column":182}}],"line":25},"10":{"loc":{"start":{"line":25,"column":47},"end":{"line":25,"column":102}},"type":"binary-expr","locations":[{"start":{"line":25,"column":47},"end":{"line":25,"column":79}},{"start":{"line":25,"column":83},"end":{"line":25,"column":102}}],"line":25},"11":{"loc":{"start":{"line":25,"column":218},"end":{"line":25,"column":252}},"type":"binary-expr","locations":[{"start":{"line":25,"column":218},"end":{"line":25,"column":228}},{"start":{"line":25,"column":232},"end":{"line":25,"column":252}}],"line":25},"12":{"loc":{"start":{"line":25,"column":329},"end":{"line":25,"column":383}},"type":"if","locations":[{"start":{"line":25,"column":329},"end":{"line":25,"column":383}},{"start":{"line":25,"column":329},"end":{"line":25,"column":383}}],"line":25},"13":{"loc":{"start":{"line":27,"column":51},"end":{"line":27,"column":137}},"type":"binary-expr","locations":[{"start":{"line":27,"column":51},"end":{"line":27,"column":72}},{"start":{"line":27,"column":76},"end":{"line":27,"column":137}}],"line":27},"14":{"loc":{"start":{"line":29,"column":50},"end":{"line":29,"column":151}},"type":"if","locations":[{"start":{"line":29,"column":50},"end":{"line":29,"column":151}},{"start":{"line":29,"column":50},"end":{"line":29,"column":151}}],"line":29},"15":{"loc":{"start":{"line":31,"column":136},"end":{"line":31,"column":166}},"type":"binary-expr","locations":[{"start":{"line":31,"column":136},"end":{"line":31,"column":157}},{"start":{"line":31,"column":161},"end":{"line":31,"column":166}}],"line":31},"16":{"loc":{"start":{"line":31,"column":200},"end":{"line":31,"column":254}},"type":"if","locations":[{"start":{"line":31,"column":200},"end":{"line":31,"column":254}},{"start":{"line":31,"column":200},"end":{"line":31,"column":254}}],"line":31},"17":{"loc":{"start":{"line":33,"column":62},"end":{"line":33,"column":131}},"type":"if","locations":[{"start":{"line":33,"column":62},"end":{"line":33,"column":131}},{"start":{"line":33,"column":62},"end":{"line":33,"column":131}}],"line":33},"18":{"loc":{"start":{"line":33,"column":132},"end":{"line":33,"column":193}},"type":"if","locations":[{"start":{"line":33,"column":132},"end":{"line":33,"column":193}},{"start":{"line":33,"column":132},"end":{"line":33,"column":193}}],"line":33},"19":{"loc":{"start":{"line":35,"column":44},"end":{"line":35,"column":195}},"type":"if","locations":[{"start":{"line":35,"column":44},"end":{"line":35,"column":195}},{"start":{"line":35,"column":44},"end":{"line":35,"column":195}}],"line":35},"20":{"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":91}},"type":"cond-expr","locations":[{"start":{"line":47,"column":72},"end":{"line":47,"column":84}},{"start":{"line":47,"column":87},"end":{"line":47,"column":91}}],"line":47},"21":{"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":69}},"type":"binary-expr","locations":[{"start":{"line":47,"column":19},"end":{"line":47,"column":39}},{"start":{"line":47,"column":43},"end":{"line":47,"column":69}}],"line":47},"22":{"loc":{"start":{"line":57,"column":16},"end":{"line":57,"column":85}},"type":"cond-expr","locations":[{"start":{"line":57,"column":61},"end":{"line":57,"column":63}},{"start":{"line":57,"column":66},"end":{"line":57,"column":85}}],"line":57},"23":{"loc":{"start":{"line":67,"column":16},"end":{"line":67,"column":79}},"type":"cond-expr","locations":[{"start":{"line":67,"column":58},"end":{"line":67,"column":60}},{"start":{"line":67,"column":63},"end":{"line":67,"column":79}}],"line":67},"24":{"loc":{"start":{"line":80,"column":2},"end":{"line":84,"column":3}},"type":"if","locations":[{"start":{"line":80,"column":2},"end":{"line":84,"column":3}},{"start":{"line":80,"column":2},"end":{"line":84,"column":3}}],"line":80},"25":{"loc":{"start":{"line":86,"column":2},"end":{"line":90,"column":3}},"type":"if","locations":[{"start":{"line":86,"column":2},"end":{"line":90,"column":3}},{"start":{"line":86,"column":2},"end":{"line":90,"column":3}}],"line":86},"26":{"loc":{"start":{"line":86,"column":6},"end":{"line":86,"column":43}},"type":"binary-expr","locations":[{"start":{"line":86,"column":6},"end":{"line":86,"column":24}},{"start":{"line":86,"column":28},"end":{"line":86,"column":43}}],"line":86},"27":{"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":64}},"type":"cond-expr","locations":[{"start":{"line":129,"column":39},"end":{"line":129,"column":42}},{"start":{"line":129,"column":45},"end":{"line":129,"column":64}}],"line":129},"28":{"loc":{"start":{"line":205,"column":6},"end":{"line":205,"column":31}},"type":"if","locations":[{"start":{"line":205,"column":6},"end":{"line":205,"column":31}},{"start":{"line":205,"column":6},"end":{"line":205,"column":31}}],"line":205},"29":{"loc":{"start":{"line":211,"column":6},"end":{"line":211,"column":30}},"type":"if","locations":[{"start":{"line":211,"column":6},"end":{"line":211,"column":30}},{"start":{"line":211,"column":6},"end":{"line":211,"column":30}}],"line":211},"30":{"loc":{"start":{"line":233,"column":2},"end":{"line":233,"column":51}},"type":"if","locations":[{"start":{"line":233,"column":2},"end":{"line":233,"column":51}},{"start":{"line":233,"column":2},"end":{"line":233,"column":51}}],"line":233},"31":{"loc":{"start":{"line":236,"column":2},"end":{"line":242,"column":3}},"type":"if","locations":[{"start":{"line":236,"column":2},"end":{"line":242,"column":3}},{"start":{"line":236,"column":2},"end":{"line":242,"column":3}}],"line":236},"32":{"loc":{"start":{"line":237,"column":4},"end":{"line":237,"column":52}},"type":"if","locations":[{"start":{"line":237,"column":4},"end":{"line":237,"column":52}},{"start":{"line":237,"column":4},"end":{"line":237,"column":52}}],"line":237}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":1,"16":23,"17":0,"18":23,"19":1,"20":0,"21":1,"22":46,"23":0,"24":46,"25":1,"26":0,"27":1,"28":1,"29":1,"30":1,"31":0,"32":0,"33":1,"34":65,"35":0,"36":2,"37":2,"38":11,"39":11,"40":11,"41":11,"42":10,"43":11,"44":2,"45":2,"46":2,"47":0,"48":2,"49":65,"50":0,"51":65,"52":65,"53":4,"54":4,"55":16,"56":16,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":42,"69":42,"70":1,"71":97,"72":22,"73":22,"74":24,"75":46,"76":5,"77":0,"78":3,"79":0,"80":7,"81":1,"82":1,"83":1,"84":1,"85":23,"86":23,"87":23,"88":23,"89":23,"90":0,"91":23,"92":23,"93":23,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":1,"103":6,"104":2,"105":0,"106":2,"107":2,"108":1,"109":0,"110":1,"111":1,"112":1,"113":1,"114":1},"f":{"0":1,"1":1,"2":0,"3":23,"4":1,"5":0,"6":46,"7":1,"8":1,"9":0,"10":65,"11":2,"12":2,"13":65,"14":4,"15":16,"16":0,"17":0,"18":0,"19":1,"20":42,"21":97,"22":22,"23":24,"24":46,"25":5,"26":0,"27":3,"28":0,"29":7,"30":1,"31":23,"32":0,"33":0,"34":6,"35":2},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0,0,0],"4":[0,23],"5":[23,0,0],"6":[1,0],"7":[0,0],"8":[0,46],"9":[0,1],"10":[1,0],"11":[1,1],"12":[1,0],"13":[1,0],"14":[0,65],"15":[11,11],"16":[10,1],"17":[2,0],"18":[0,2],"19":[0,65],"20":[0,4],"21":[4,0],"22":[0,16],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[69,28],"28":[0,0],"29":[0,0],"30":[0,2],"31":[1,1],"32":[0,1]},"inputSourceMap":{"version":3,"sources":["utils.ts"],"names":["backoffIntervalStep","n","multiplier","Math","floor","serializeAccountSpec","accountSpec","chainId","address","serializeNameSpec","nameSpec","name","deserializeAccountSpec","serialized","parts","split","length","deserializeNameSpec","HashMap","Map","key","JSON","stringify","value","map","set","hash","get","has","clear","values","keys","size","PausableTypedEventEmitter","paused","TypedEventEmitter","isConstructor","arg","propPath","obj","path","undefined","dotIndex","indexOf","slice","firstSegment","rest"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src","sourcesContent":["import { AccountSpec } from './models/account';\nimport { NameSpec } from './models/name';\nimport { TypedEventEmitter } from '@elderapo/typed-event-emitter';\n\n/**\n * Returns the next interval to use for exponential backoff.\n * This curve yields every value 4 times before doubling in the next step.\n * The function is :code:`multiplier * 2**Math.floor(n/4)`.\n * By default (multiplier = 1s), the intervals reach ca. 1 minute (total time elapsed ca. 4 minutes) after step 24,\n * so it is advised to declare a timeout after a certain number of steps.\n * @param n step on the interval curve\n * @param multiplier multiplier, default 1000 (1s)\n */\nexport function backoffIntervalStep(n: number, multiplier = 1000): number {\n    return multiplier * 2**Math.floor(n/4);\n}\n\n/**\n * Serializes accountSpec, e.g. { chainId: 'foo', address: 'bar' } => foo/bar\n * @param accountSpec \n */\nexport function serializeAccountSpec(accountSpec: AccountSpec): string {\n    const chainId = typeof accountSpec.chainId === 'undefined' ? '' : accountSpec.chainId;\n    return `${chainId}/${accountSpec.address}`;\n}\n\n/**\n * Serializes nameSpec, e.g. { chainId: 'foo', name: 'bar' } => foo/bar\n * @param nameSpec \n */\nexport function serializeNameSpec(nameSpec: NameSpec): string {\n    const chainId = typeof nameSpec.chainId === 'undefined' ? '' : nameSpec.chainId;\n    return `${chainId}/${nameSpec.name}`;\n}\n\n/**\n * Deserializes accountSpec, e.g. foo/bar => { chainId: 'foo', address: 'bar' }.\n * If string has no /, uses whole string as address with empty chainId.\n * @param accountSpec \n */\nexport function deserializeAccountSpec(serialized: string): AccountSpec {\n    const parts = serialized.split('/');\n    if (parts.length === 1) {\n        return {\n            address: serialized\n        };\n    }\n    if (parts.length === 2 && parts[0] === '') {\n        return {\n            address: parts[1]\n        };\n    }\n    return {\n        chainId: parts[0],\n        address: parts[1],\n    };\n}\n\n/**\n * Deserializes nameSpec, e.g. foo/bar => { chainId: 'foo', name: 'bar' }.\n * If string has no /, uses whole string as name with empty chainId.\n * @param nameSpec \n */\nexport function deserializeNameSpec(serialized: string): NameSpec {\n    const accountSpec = deserializeAccountSpec(serialized);\n    return {\n        chainId: accountSpec.chainId,\n        name: accountSpec.address as string,\n    };\n}\n\n/**\n * A simple extension of the native Map using stringified objects as keys.\n * The order of object properties matters.\n */\nexport class HashMap<K, V> {\n    private map: Map<string, V> = new Map();\n\n    private hash(key: K): string {\n        return typeof key === 'string' ? key : JSON.stringify(key);\n    }\n\n    set(key: K, value: V): this {\n        this.map.set(this.hash(key), value);\n        return this;\n    }\n\n    get(key: K): V | undefined {\n        return this.map.get(this.hash(key));\n    }\n\n    has(key: K): boolean {\n        return this.map.has(this.hash(key));\n    }\n\n    delete(key: K): boolean {\n        return this.map.delete(this.hash(key));\n    }\n\n    clear(): void {\n        this.map.clear();\n    }\n\n    values(): IterableIterator<V> {\n        return this.map.values();\n    }\n\n    keys(): IterableIterator<string> {\n        return this.map.keys();\n    }\n\n    get size(): number {\n        return this.map.size;\n    }\n}\n\nexport class PausableTypedEventEmitter<T> extends TypedEventEmitter<T> {\n    paused = true;\n\n    resume(): void {\n        if (!this.paused) return;\n        this.paused = false;\n    }\n\n    pause(): void {\n        if (this.paused) return;\n        this.paused = true;\n    }\n}\n\nexport interface Constructor<T> {\n    new (...args: any[]): T;\n}\n\nexport function isConstructor<T>(arg: T | Constructor<T>): arg is Constructor<T> {\n    return (typeof arg === 'function');\n}\n\n/**\n * Access a property using dot syntax\n * Example: propPath({ a: { b: 1 }}, 'a.b') => 1\n * @param obj \n * @param path \n */\nexport function propPath(obj: any, path: string): any {\n    if (typeof obj === 'undefined') return undefined;\n    const dotIndex = path.indexOf('.');\n    if (dotIndex !== -1) {\n        if (typeof obj !== 'object') return undefined;\n        const [firstSegment, rest] = [path.slice(0, dotIndex), path.slice(dotIndex + 1)];\n        return propPath(obj[firstSegment], rest);\n    }\n    return obj[path];\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"de774a9c66ad14af40d5bc693dcd7b4896a345f7","contentHash":"4f7227b11bd104234b438abfa45dd49da4af2ba32ca19fbd489710cef3b2b33c"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/account-manager.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/account-manager.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":43}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":51}},"4":{"start":{"line":12,"column":13},"end":{"line":12,"column":32}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":39}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":38}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":39}},"8":{"start":{"line":20,"column":54},"end":{"line":20,"column":73}},"9":{"start":{"line":20,"column":75},"end":{"line":20,"column":326}},"10":{"start":{"line":20,"column":125},"end":{"line":20,"column":161}},"11":{"start":{"line":20,"column":163},"end":{"line":20,"column":292}},"12":{"start":{"line":20,"column":183},"end":{"line":20,"column":292}},"13":{"start":{"line":20,"column":225},"end":{"line":20,"column":288}},"14":{"start":{"line":20,"column":293},"end":{"line":20,"column":324}},"15":{"start":{"line":20,"column":327},"end":{"line":20,"column":339}},"16":{"start":{"line":22,"column":33},"end":{"line":22,"column":517}},"17":{"start":{"line":22,"column":46},"end":{"line":22,"column":47}},"18":{"start":{"line":22,"column":91},"end":{"line":22,"column":131}},"19":{"start":{"line":22,"column":133},"end":{"line":22,"column":515}},"20":{"start":{"line":22,"column":146},"end":{"line":22,"column":247}},"21":{"start":{"line":22,"column":201},"end":{"line":22,"column":243}},"22":{"start":{"line":22,"column":255},"end":{"line":22,"column":515}},"23":{"start":{"line":22,"column":295},"end":{"line":22,"column":369}},"24":{"start":{"line":22,"column":379},"end":{"line":22,"column":513}},"25":{"start":{"line":22,"column":428},"end":{"line":22,"column":509}},"26":{"start":{"line":22,"column":518},"end":{"line":22,"column":532}},"27":{"start":{"line":24,"column":24},"end":{"line":24,"column":328}},"28":{"start":{"line":24,"column":99},"end":{"line":24,"column":154}},"29":{"start":{"line":24,"column":133},"end":{"line":24,"column":151}},"30":{"start":{"line":24,"column":164},"end":{"line":24,"column":326}},"31":{"start":{"line":24,"column":198},"end":{"line":24,"column":323}},"32":{"start":{"line":24,"column":329},"end":{"line":24,"column":349}},"33":{"start":{"line":26,"column":77},"end":{"line":26,"column":175}},"34":{"start":{"line":26,"column":94},"end":{"line":26,"column":107}},"35":{"start":{"line":26,"column":121},"end":{"line":26,"column":131}},"36":{"start":{"line":26,"column":151},"end":{"line":26,"column":165}},"37":{"start":{"line":26,"column":166},"end":{"line":26,"column":173}},"38":{"start":{"line":26,"column":176},"end":{"line":26,"column":263}},"39":{"start":{"line":26,"column":193},"end":{"line":26,"column":208}},"40":{"start":{"line":26,"column":218},"end":{"line":26,"column":261}},"41":{"start":{"line":28,"column":33},"end":{"line":28,"column":387}},"42":{"start":{"line":28,"column":65},"end":{"line":28,"column":69}},"43":{"start":{"line":28,"column":78},"end":{"line":28,"column":87}},"44":{"start":{"line":28,"column":89},"end":{"line":28,"column":384}},"45":{"start":{"line":28,"column":147},"end":{"line":28,"column":167}},"46":{"start":{"line":28,"column":193},"end":{"line":28,"column":264}},"47":{"start":{"line":28,"column":290},"end":{"line":28,"column":360}},"48":{"start":{"line":28,"column":363},"end":{"line":28,"column":380}},"49":{"start":{"line":30,"column":50},"end":{"line":30,"column":151}},"50":{"start":{"line":30,"column":92},"end":{"line":30,"column":149}},"51":{"start":{"line":32,"column":44},"end":{"line":32,"column":315}},"52":{"start":{"line":32,"column":57},"end":{"line":32,"column":58}},"53":{"start":{"line":32,"column":102},"end":{"line":32,"column":110}},"54":{"start":{"line":32,"column":112},"end":{"line":32,"column":167}},"55":{"start":{"line":32,"column":168},"end":{"line":32,"column":199}},"56":{"start":{"line":32,"column":200},"end":{"line":32,"column":254}},"57":{"start":{"line":32,"column":227},"end":{"line":32,"column":254}},"58":{"start":{"line":32,"column":255},"end":{"line":32,"column":313}},"59":{"start":{"line":34,"column":62},"end":{"line":34,"column":131}},"60":{"start":{"line":34,"column":78},"end":{"line":34,"column":131}},"61":{"start":{"line":34,"column":132},"end":{"line":34,"column":193}},"62":{"start":{"line":34,"column":149},"end":{"line":34,"column":193}},"63":{"start":{"line":34,"column":194},"end":{"line":34,"column":213}},"64":{"start":{"line":36,"column":50},"end":{"line":36,"column":138}},"65":{"start":{"line":36,"column":124},"end":{"line":36,"column":136}},"66":{"start":{"line":36,"column":139},"end":{"line":36,"column":175}},"67":{"start":{"line":38,"column":30},"end":{"line":38,"column":176}},"68":{"start":{"line":38,"column":126},"end":{"line":38,"column":173}},"69":{"start":{"line":38,"column":177},"end":{"line":38,"column":203}},"70":{"start":{"line":40,"column":40},"end":{"line":40,"column":151}},"71":{"start":{"line":40,"column":63},"end":{"line":40,"column":149}},"72":{"start":{"line":40,"column":152},"end":{"line":40,"column":164}},"73":{"start":{"line":42,"column":43},"end":{"line":42,"column":182}},"74":{"start":{"line":42,"column":106},"end":{"line":42,"column":180}},"75":{"start":{"line":42,"column":183},"end":{"line":42,"column":328}},"76":{"start":{"line":42,"column":329},"end":{"line":42,"column":383}},"77":{"start":{"line":42,"column":345},"end":{"line":42,"column":383}},"78":{"start":{"line":44,"column":33},"end":{"line":44,"column":138}},"79":{"start":{"line":44,"column":109},"end":{"line":44,"column":125}},"80":{"start":{"line":44,"column":126},"end":{"line":44,"column":135}},"81":{"start":{"line":44,"column":139},"end":{"line":44,"column":168}},"82":{"start":{"line":46,"column":44},"end":{"line":46,"column":195}},"83":{"start":{"line":46,"column":62},"end":{"line":46,"column":166}},"84":{"start":{"line":46,"column":176},"end":{"line":46,"column":193}},"85":{"start":{"line":46,"column":196},"end":{"line":46,"column":207}},"86":{"start":{"line":50,"column":0},"end":{"line":115,"column":35}},"87":{"start":{"line":51,"column":2},"end":{"line":51,"column":51}},"88":{"start":{"line":56,"column":4},"end":{"line":56,"column":42}},"89":{"start":{"line":58,"column":4},"end":{"line":58,"column":89}},"90":{"start":{"line":60,"column":4},"end":{"line":60,"column":70}},"91":{"start":{"line":62,"column":4},"end":{"line":62,"column":73}},"92":{"start":{"line":64,"column":4},"end":{"line":64,"column":70}},"93":{"start":{"line":66,"column":4},"end":{"line":66,"column":28}},"94":{"start":{"line":67,"column":4},"end":{"line":67,"column":28}},"95":{"start":{"line":68,"column":4},"end":{"line":68,"column":17}},"96":{"start":{"line":71,"column":2},"end":{"line":112,"column":6}},"97":{"start":{"line":74,"column":18},"end":{"line":86,"column":8}},"98":{"start":{"line":75,"column":21},"end":{"line":75,"column":82}},"99":{"start":{"line":76,"column":20},"end":{"line":76,"column":73}},"100":{"start":{"line":78,"column":8},"end":{"line":83,"column":9}},"101":{"start":{"line":79,"column":10},"end":{"line":79,"column":63}},"102":{"start":{"line":80,"column":10},"end":{"line":80,"column":48}},"103":{"start":{"line":81,"column":10},"end":{"line":81,"column":44}},"104":{"start":{"line":82,"column":10},"end":{"line":82,"column":112}},"105":{"start":{"line":85,"column":8},"end":{"line":85,"column":28}},"106":{"start":{"line":89,"column":8},"end":{"line":89,"column":44}},"107":{"start":{"line":92,"column":6},"end":{"line":92,"column":18}},"108":{"start":{"line":97,"column":19},"end":{"line":97,"column":23}},"109":{"start":{"line":99,"column":6},"end":{"line":99,"column":18}},"110":{"start":{"line":100,"column":6},"end":{"line":100,"column":19}},"111":{"start":{"line":101,"column":6},"end":{"line":103,"column":44}},"112":{"start":{"line":102,"column":8},"end":{"line":102,"column":22}},"113":{"start":{"line":108,"column":6},"end":{"line":110,"column":7}},"114":{"start":{"line":109,"column":8},"end":{"line":109,"column":39}},"115":{"start":{"line":114,"column":2},"end":{"line":114,"column":24}},"116":{"start":{"line":123,"column":0},"end":{"line":642,"column":35}},"117":{"start":{"line":124,"column":2},"end":{"line":124,"column":52}},"118":{"start":{"line":129,"column":4},"end":{"line":129,"column":42}},"119":{"start":{"line":131,"column":4},"end":{"line":131,"column":90}},"120":{"start":{"line":133,"column":4},"end":{"line":133,"column":70}},"121":{"start":{"line":135,"column":4},"end":{"line":135,"column":86}},"122":{"start":{"line":137,"column":4},"end":{"line":137,"column":86}},"123":{"start":{"line":139,"column":4},"end":{"line":139,"column":78}},"124":{"start":{"line":141,"column":4},"end":{"line":141,"column":27}},"125":{"start":{"line":142,"column":4},"end":{"line":142,"column":18}},"126":{"start":{"line":149,"column":2},"end":{"line":639,"column":6}},"127":{"start":{"line":152,"column":6},"end":{"line":152,"column":31}},"128":{"start":{"line":152,"column":24},"end":{"line":152,"column":31}},"129":{"start":{"line":153,"column":6},"end":{"line":153,"column":26}},"130":{"start":{"line":154,"column":38},"end":{"line":154,"column":42}},"131":{"start":{"line":155,"column":30},"end":{"line":155,"column":35}},"132":{"start":{"line":156,"column":27},"end":{"line":156,"column":36}},"133":{"start":{"line":158,"column":6},"end":{"line":176,"column":7}},"134":{"start":{"line":159,"column":8},"end":{"line":162,"column":9}},"135":{"start":{"line":159,"column":29},"end":{"line":159,"column":70}},"136":{"start":{"line":160,"column":24},"end":{"line":160,"column":35}},"137":{"start":{"line":161,"column":10},"end":{"line":161,"column":27}},"138":{"start":{"line":164,"column":8},"end":{"line":164,"column":33}},"139":{"start":{"line":165,"column":8},"end":{"line":165,"column":29}},"140":{"start":{"line":167,"column":8},"end":{"line":175,"column":9}},"141":{"start":{"line":168,"column":10},"end":{"line":170,"column":11}},"142":{"start":{"line":169,"column":12},"end":{"line":169,"column":34}},"143":{"start":{"line":172,"column":10},"end":{"line":174,"column":11}},"144":{"start":{"line":173,"column":12},"end":{"line":173,"column":33}},"145":{"start":{"line":185,"column":6},"end":{"line":185,"column":30}},"146":{"start":{"line":185,"column":23},"end":{"line":185,"column":30}},"147":{"start":{"line":186,"column":6},"end":{"line":186,"column":25}},"148":{"start":{"line":187,"column":39},"end":{"line":187,"column":43}},"149":{"start":{"line":188,"column":31},"end":{"line":188,"column":36}},"150":{"start":{"line":189,"column":28},"end":{"line":189,"column":37}},"151":{"start":{"line":191,"column":6},"end":{"line":209,"column":7}},"152":{"start":{"line":192,"column":8},"end":{"line":195,"column":9}},"153":{"start":{"line":192,"column":30},"end":{"line":192,"column":71}},"154":{"start":{"line":193,"column":24},"end":{"line":193,"column":36}},"155":{"start":{"line":194,"column":10},"end":{"line":194,"column":26}},"156":{"start":{"line":197,"column":8},"end":{"line":197,"column":34}},"157":{"start":{"line":198,"column":8},"end":{"line":198,"column":30}},"158":{"start":{"line":200,"column":8},"end":{"line":208,"column":9}},"159":{"start":{"line":201,"column":10},"end":{"line":203,"column":11}},"160":{"start":{"line":202,"column":12},"end":{"line":202,"column":35}},"161":{"start":{"line":205,"column":10},"end":{"line":207,"column":11}},"162":{"start":{"line":206,"column":12},"end":{"line":206,"column":34}},"163":{"start":{"line":219,"column":20},"end":{"line":219,"column":113}},"164":{"start":{"line":220,"column":6},"end":{"line":223,"column":8}},"165":{"start":{"line":232,"column":19},"end":{"line":232,"column":23}},"166":{"start":{"line":234,"column":32},"end":{"line":234,"column":72}},"167":{"start":{"line":236,"column":6},"end":{"line":238,"column":7}},"168":{"start":{"line":237,"column":8},"end":{"line":237,"column":59}},"169":{"start":{"line":241,"column":27},"end":{"line":241,"column":75}},"170":{"start":{"line":242,"column":6},"end":{"line":242,"column":61}},"171":{"start":{"line":243,"column":6},"end":{"line":247,"column":9}},"172":{"start":{"line":244,"column":8},"end":{"line":244,"column":36}},"173":{"start":{"line":246,"column":8},"end":{"line":246,"column":93}},"174":{"start":{"line":248,"column":6},"end":{"line":248,"column":28}},"175":{"start":{"line":258,"column":27},"end":{"line":282,"column":8}},"176":{"start":{"line":259,"column":34},"end":{"line":259,"column":74}},"177":{"start":{"line":261,"column":8},"end":{"line":264,"column":9}},"178":{"start":{"line":263,"column":10},"end":{"line":263,"column":55}},"179":{"start":{"line":266,"column":8},"end":{"line":279,"column":9}},"180":{"start":{"line":268,"column":22},"end":{"line":268,"column":64}},"181":{"start":{"line":269,"column":10},"end":{"line":269,"column":87}},"182":{"start":{"line":271,"column":10},"end":{"line":278,"column":11}},"183":{"start":{"line":273,"column":36},"end":{"line":273,"column":124}},"184":{"start":{"line":275,"column":12},"end":{"line":277,"column":13}},"185":{"start":{"line":276,"column":14},"end":{"line":276,"column":93}},"186":{"start":{"line":281,"column":8},"end":{"line":281,"column":49}},"187":{"start":{"line":285,"column":8},"end":{"line":285,"column":53}},"188":{"start":{"line":288,"column":6},"end":{"line":288,"column":27}},"189":{"start":{"line":298,"column":27},"end":{"line":304,"column":8}},"190":{"start":{"line":299,"column":8},"end":{"line":299,"column":30}},"191":{"start":{"line":301,"column":8},"end":{"line":303,"column":9}},"192":{"start":{"line":302,"column":10},"end":{"line":302,"column":67}},"193":{"start":{"line":307,"column":8},"end":{"line":307,"column":53}},"194":{"start":{"line":310,"column":6},"end":{"line":310,"column":27}},"195":{"start":{"line":321,"column":27},"end":{"line":324,"column":8}},"196":{"start":{"line":322,"column":23},"end":{"line":322,"column":52}},"197":{"start":{"line":323,"column":8},"end":{"line":323,"column":71}},"198":{"start":{"line":327,"column":8},"end":{"line":327,"column":53}},"199":{"start":{"line":330,"column":6},"end":{"line":330,"column":27}},"200":{"start":{"line":341,"column":27},"end":{"line":344,"column":8}},"201":{"start":{"line":342,"column":23},"end":{"line":342,"column":70}},"202":{"start":{"line":343,"column":8},"end":{"line":343,"column":71}},"203":{"start":{"line":347,"column":8},"end":{"line":347,"column":53}},"204":{"start":{"line":350,"column":6},"end":{"line":350,"column":27}},"205":{"start":{"line":355,"column":34},"end":{"line":377,"column":8}},"206":{"start":{"line":356,"column":22},"end":{"line":356,"column":38}},"207":{"start":{"line":357,"column":22},"end":{"line":360,"column":21}},"208":{"start":{"line":362,"column":8},"end":{"line":374,"column":9}},"209":{"start":{"line":363,"column":10},"end":{"line":366,"column":13}},"210":{"start":{"line":369,"column":10},"end":{"line":372,"column":13}},"211":{"start":{"line":373,"column":10},"end":{"line":373,"column":18}},"212":{"start":{"line":376,"column":8},"end":{"line":376,"column":23}},"213":{"start":{"line":380,"column":8},"end":{"line":380,"column":60}},"214":{"start":{"line":383,"column":6},"end":{"line":383,"column":34}},"215":{"start":{"line":392,"column":25},"end":{"line":428,"column":8}},"216":{"start":{"line":393,"column":8},"end":{"line":424,"column":9}},"217":{"start":{"line":394,"column":24},"end":{"line":394,"column":95}},"218":{"start":{"line":395,"column":25},"end":{"line":397,"column":12}},"219":{"start":{"line":396,"column":12},"end":{"line":396,"column":65}},"220":{"start":{"line":398,"column":43},"end":{"line":398,"column":47}},"221":{"start":{"line":399,"column":35},"end":{"line":399,"column":40}},"222":{"start":{"line":400,"column":32},"end":{"line":400,"column":41}},"223":{"start":{"line":402,"column":10},"end":{"line":420,"column":11}},"224":{"start":{"line":403,"column":12},"end":{"line":406,"column":13}},"225":{"start":{"line":403,"column":34},"end":{"line":403,"column":61}},"226":{"start":{"line":404,"column":28},"end":{"line":404,"column":40}},"227":{"start":{"line":405,"column":14},"end":{"line":405,"column":106}},"228":{"start":{"line":408,"column":12},"end":{"line":408,"column":38}},"229":{"start":{"line":409,"column":12},"end":{"line":409,"column":34}},"230":{"start":{"line":411,"column":12},"end":{"line":419,"column":13}},"231":{"start":{"line":412,"column":14},"end":{"line":414,"column":15}},"232":{"start":{"line":413,"column":16},"end":{"line":413,"column":39}},"233":{"start":{"line":416,"column":14},"end":{"line":418,"column":15}},"234":{"start":{"line":417,"column":16},"end":{"line":417,"column":38}},"235":{"start":{"line":422,"column":10},"end":{"line":422,"column":38}},"236":{"start":{"line":423,"column":10},"end":{"line":423,"column":26}},"237":{"start":{"line":426,"column":23},"end":{"line":426,"column":51}},"238":{"start":{"line":427,"column":8},"end":{"line":427,"column":37}},"239":{"start":{"line":431,"column":8},"end":{"line":431,"column":51}},"240":{"start":{"line":434,"column":6},"end":{"line":434,"column":25}},"241":{"start":{"line":444,"column":29},"end":{"line":455,"column":8}},"242":{"start":{"line":445,"column":34},"end":{"line":445,"column":74}},"243":{"start":{"line":448,"column":8},"end":{"line":452,"column":9}},"244":{"start":{"line":449,"column":10},"end":{"line":449,"column":74}},"245":{"start":{"line":451,"column":10},"end":{"line":451,"column":65}},"246":{"start":{"line":454,"column":8},"end":{"line":454,"column":23}},"247":{"start":{"line":458,"column":8},"end":{"line":458,"column":55}},"248":{"start":{"line":461,"column":6},"end":{"line":461,"column":29}},"249":{"start":{"line":470,"column":26},"end":{"line":490,"column":8}},"250":{"start":{"line":473,"column":8},"end":{"line":477,"column":9}},"251":{"start":{"line":474,"column":10},"end":{"line":474,"column":73}},"252":{"start":{"line":476,"column":10},"end":{"line":476,"column":34}},"253":{"start":{"line":479,"column":8},"end":{"line":479,"column":22}},"254":{"start":{"line":481,"column":8},"end":{"line":483,"column":9}},"255":{"start":{"line":482,"column":10},"end":{"line":482,"column":54}},"256":{"start":{"line":486,"column":22},"end":{"line":486,"column":55}},"257":{"start":{"line":487,"column":8},"end":{"line":487,"column":25}},"258":{"start":{"line":488,"column":8},"end":{"line":488,"column":54}},"259":{"start":{"line":489,"column":8},"end":{"line":489,"column":23}},"260":{"start":{"line":493,"column":8},"end":{"line":493,"column":52}},"261":{"start":{"line":496,"column":6},"end":{"line":496,"column":26}},"262":{"start":{"line":505,"column":25},"end":{"line":520,"column":8}},"263":{"start":{"line":506,"column":8},"end":{"line":512,"column":9}},"264":{"start":{"line":507,"column":10},"end":{"line":511,"column":11}},"265":{"start":{"line":508,"column":25},"end":{"line":508,"column":124}},"266":{"start":{"line":509,"column":12},"end":{"line":509,"column":65}},"267":{"start":{"line":514,"column":8},"end":{"line":519,"column":24}},"268":{"start":{"line":523,"column":8},"end":{"line":523,"column":51}},"269":{"start":{"line":526,"column":6},"end":{"line":526,"column":25}},"270":{"start":{"line":537,"column":32},"end":{"line":541,"column":8}},"271":{"start":{"line":539,"column":21},"end":{"line":539,"column":69}},"272":{"start":{"line":540,"column":8},"end":{"line":540,"column":70}},"273":{"start":{"line":544,"column":8},"end":{"line":544,"column":58}},"274":{"start":{"line":547,"column":6},"end":{"line":547,"column":32}},"275":{"start":{"line":552,"column":38},"end":{"line":554,"column":8}},"276":{"start":{"line":553,"column":8},"end":{"line":553,"column":95}},"277":{"start":{"line":557,"column":8},"end":{"line":557,"column":64}},"278":{"start":{"line":560,"column":6},"end":{"line":560,"column":38}},"279":{"start":{"line":571,"column":32},"end":{"line":611,"column":8}},"280":{"start":{"line":572,"column":8},"end":{"line":572,"column":105}},"281":{"start":{"line":572,"column":22},"end":{"line":572,"column":105}},"282":{"start":{"line":573,"column":8},"end":{"line":573,"column":155}},"283":{"start":{"line":573,"column":76},"end":{"line":573,"column":155}},"284":{"start":{"line":574,"column":8},"end":{"line":574,"column":139}},"285":{"start":{"line":574,"column":42},"end":{"line":574,"column":139}},"286":{"start":{"line":575,"column":8},"end":{"line":575,"column":111}},"287":{"start":{"line":575,"column":46},"end":{"line":575,"column":111}},"288":{"start":{"line":576,"column":8},"end":{"line":576,"column":75}},"289":{"start":{"line":578,"column":8},"end":{"line":582,"column":9}},"290":{"start":{"line":579,"column":10},"end":{"line":579,"column":64}},"291":{"start":{"line":581,"column":10},"end":{"line":581,"column":57}},"292":{"start":{"line":584,"column":8},"end":{"line":587,"column":9}},"293":{"start":{"line":586,"column":10},"end":{"line":586,"column":60}},"294":{"start":{"line":589,"column":8},"end":{"line":592,"column":9}},"295":{"start":{"line":591,"column":10},"end":{"line":591,"column":72}},"296":{"start":{"line":594,"column":8},"end":{"line":597,"column":9}},"297":{"start":{"line":596,"column":10},"end":{"line":596,"column":46}},"298":{"start":{"line":599,"column":8},"end":{"line":610,"column":15}},"299":{"start":{"line":614,"column":8},"end":{"line":614,"column":58}},"300":{"start":{"line":617,"column":6},"end":{"line":617,"column":32}},"301":{"start":{"line":627,"column":34},"end":{"line":631,"column":8}},"302":{"start":{"line":628,"column":8},"end":{"line":628,"column":104}},"303":{"start":{"line":628,"column":33},"end":{"line":628,"column":104}},"304":{"start":{"line":629,"column":22},"end":{"line":629,"column":79}},"305":{"start":{"line":630,"column":8},"end":{"line":630,"column":34}},"306":{"start":{"line":634,"column":8},"end":{"line":634,"column":60}},"307":{"start":{"line":637,"column":6},"end":{"line":637,"column":34}},"308":{"start":{"line":641,"column":2},"end":{"line":641,"column":24}},"309":{"start":{"line":644,"column":0},"end":{"line":644,"column":36}}},"fnMap":{"0":{"name":"ownKeys","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":16}},"loc":{"start":{"line":20,"column":41},"end":{"line":20,"column":341}},"line":20},"1":{"name":"(anonymous_1)","decl":{"start":{"line":20,"column":208},"end":{"line":20,"column":209}},"loc":{"start":{"line":20,"column":223},"end":{"line":20,"column":290}},"line":20},"2":{"name":"_objectSpread","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":22}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":534}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":184},"end":{"line":22,"column":185}},"loc":{"start":{"line":22,"column":199},"end":{"line":22,"column":245}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":411},"end":{"line":22,"column":412}},"loc":{"start":{"line":22,"column":426},"end":{"line":22,"column":511}},"line":22},"5":{"name":"_typeof","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":16}},"loc":{"start":{"line":24,"column":22},"end":{"line":24,"column":351}},"line":24},"6":{"name":"_typeof","decl":{"start":{"line":24,"column":118},"end":{"line":24,"column":125}},"loc":{"start":{"line":24,"column":131},"end":{"line":24,"column":153}},"line":24},"7":{"name":"_typeof","decl":{"start":{"line":24,"column":183},"end":{"line":24,"column":190}},"loc":{"start":{"line":24,"column":196},"end":{"line":24,"column":325}},"line":24},"8":{"name":"asyncGeneratorStep","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":27}},"loc":{"start":{"line":26,"column":75},"end":{"line":26,"column":265}},"line":26},"9":{"name":"_asyncToGenerator","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":389}},"line":28},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":40},"end":{"line":28,"column":41}},"loc":{"start":{"line":28,"column":52},"end":{"line":28,"column":386}},"line":28},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":108},"end":{"line":28,"column":109}},"loc":{"start":{"line":28,"column":135},"end":{"line":28,"column":382}},"line":28},"12":{"name":"_next","decl":{"start":{"line":28,"column":178},"end":{"line":28,"column":183}},"loc":{"start":{"line":28,"column":191},"end":{"line":28,"column":266}},"line":28},"13":{"name":"_throw","decl":{"start":{"line":28,"column":276},"end":{"line":28,"column":282}},"loc":{"start":{"line":28,"column":288},"end":{"line":28,"column":362}},"line":28},"14":{"name":"_classCallCheck","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":153}},"line":30},"15":{"name":"_defineProperties","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":26}},"loc":{"start":{"line":32,"column":42},"end":{"line":32,"column":317}},"line":32},"16":{"name":"_createClass","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":21}},"loc":{"start":{"line":34,"column":60},"end":{"line":34,"column":215}},"line":34},"17":{"name":"_possibleConstructorReturn","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":35}},"loc":{"start":{"line":36,"column":48},"end":{"line":36,"column":177}},"line":36},"18":{"name":"_getPrototypeOf","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":28},"end":{"line":38,"column":205}},"line":38},"19":{"name":"_getPrototypeOf","decl":{"start":{"line":38,"column":105},"end":{"line":38,"column":120}},"loc":{"start":{"line":38,"column":124},"end":{"line":38,"column":175}},"line":38},"20":{"name":"_assertThisInitialized","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":31}},"loc":{"start":{"line":40,"column":38},"end":{"line":40,"column":166}},"line":40},"21":{"name":"_inherits","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":18}},"loc":{"start":{"line":42,"column":41},"end":{"line":42,"column":385}},"line":42},"22":{"name":"_setPrototypeOf","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":24}},"loc":{"start":{"line":44,"column":31},"end":{"line":44,"column":170}},"line":44},"23":{"name":"_setPrototypeOf","decl":{"start":{"line":44,"column":85},"end":{"line":44,"column":100}},"loc":{"start":{"line":44,"column":107},"end":{"line":44,"column":137}},"line":44},"24":{"name":"_defineProperty","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":24}},"loc":{"start":{"line":46,"column":42},"end":{"line":46,"column":209}},"line":46},"25":{"name":"(anonymous_25)","decl":{"start":{"line":50,"column":0},"end":{"line":50,"column":1}},"loc":{"start":{"line":50,"column":33},"end":{"line":115,"column":1}},"line":50},"26":{"name":"AccountTracker","decl":{"start":{"line":53,"column":11},"end":{"line":53,"column":25}},"loc":{"start":{"line":53,"column":44},"end":{"line":69,"column":3}},"line":53},"27":{"name":"(anonymous_27)","decl":{"start":{"line":73,"column":11},"end":{"line":73,"column":12}},"loc":{"start":{"line":73,"column":23},"end":{"line":93,"column":5}},"line":73},"28":{"name":"(anonymous_28)","decl":{"start":{"line":74,"column":36},"end":{"line":74,"column":37}},"loc":{"start":{"line":74,"column":49},"end":{"line":86,"column":7}},"line":74},"29":{"name":"load","decl":{"start":{"line":88,"column":15},"end":{"line":88,"column":19}},"loc":{"start":{"line":88,"column":22},"end":{"line":90,"column":7}},"line":88},"30":{"name":"resume","decl":{"start":{"line":96,"column":20},"end":{"line":96,"column":26}},"loc":{"start":{"line":96,"column":29},"end":{"line":104,"column":5}},"line":96},"31":{"name":"(anonymous_31)","decl":{"start":{"line":101,"column":36},"end":{"line":101,"column":37}},"loc":{"start":{"line":101,"column":48},"end":{"line":103,"column":7}},"line":101},"32":{"name":"pause","decl":{"start":{"line":107,"column":20},"end":{"line":107,"column":25}},"loc":{"start":{"line":107,"column":28},"end":{"line":111,"column":5}},"line":107},"33":{"name":"(anonymous_33)","decl":{"start":{"line":123,"column":0},"end":{"line":123,"column":1}},"loc":{"start":{"line":123,"column":34},"end":{"line":642,"column":1}},"line":123},"34":{"name":"AccountManager","decl":{"start":{"line":126,"column":11},"end":{"line":126,"column":25}},"loc":{"start":{"line":126,"column":34},"end":{"line":143,"column":3}},"line":126},"35":{"name":"resume","decl":{"start":{"line":151,"column":20},"end":{"line":151,"column":26}},"loc":{"start":{"line":151,"column":29},"end":{"line":177,"column":5}},"line":151},"36":{"name":"pause","decl":{"start":{"line":184,"column":20},"end":{"line":184,"column":25}},"loc":{"start":{"line":184,"column":28},"end":{"line":210,"column":5}},"line":184},"37":{"name":"getCompleteAccountSpec","decl":{"start":{"line":218,"column":20},"end":{"line":218,"column":42}},"loc":{"start":{"line":218,"column":56},"end":{"line":224,"column":5}},"line":218},"38":{"name":"addAccount","decl":{"start":{"line":231,"column":20},"end":{"line":231,"column":30}},"loc":{"start":{"line":231,"column":55},"end":{"line":249,"column":5}},"line":231},"39":{"name":"(anonymous_39)","decl":{"start":{"line":243,"column":26},"end":{"line":243,"column":27}},"loc":{"start":{"line":243,"column":45},"end":{"line":247,"column":7}},"line":243},"40":{"name":"(anonymous_40)","decl":{"start":{"line":257,"column":11},"end":{"line":257,"column":12}},"loc":{"start":{"line":257,"column":23},"end":{"line":289,"column":5}},"line":257},"41":{"name":"(anonymous_41)","decl":{"start":{"line":258,"column":45},"end":{"line":258,"column":46}},"loc":{"start":{"line":258,"column":69},"end":{"line":282,"column":7}},"line":258},"42":{"name":"removeAccount","decl":{"start":{"line":284,"column":15},"end":{"line":284,"column":28}},"loc":{"start":{"line":284,"column":33},"end":{"line":286,"column":7}},"line":284},"43":{"name":"(anonymous_43)","decl":{"start":{"line":297,"column":11},"end":{"line":297,"column":12}},"loc":{"start":{"line":297,"column":23},"end":{"line":311,"column":5}},"line":297},"44":{"name":"(anonymous_44)","decl":{"start":{"line":298,"column":45},"end":{"line":298,"column":46}},"loc":{"start":{"line":298,"column":58},"end":{"line":304,"column":7}},"line":298},"45":{"name":"clearAccounts","decl":{"start":{"line":306,"column":15},"end":{"line":306,"column":28}},"loc":{"start":{"line":306,"column":31},"end":{"line":308,"column":7}},"line":306},"46":{"name":"(anonymous_46)","decl":{"start":{"line":320,"column":11},"end":{"line":320,"column":12}},"loc":{"start":{"line":320,"column":23},"end":{"line":331,"column":5}},"line":320},"47":{"name":"(anonymous_47)","decl":{"start":{"line":321,"column":45},"end":{"line":321,"column":46}},"loc":{"start":{"line":321,"column":76},"end":{"line":324,"column":7}},"line":321},"48":{"name":"createAccount","decl":{"start":{"line":326,"column":15},"end":{"line":326,"column":28}},"loc":{"start":{"line":326,"column":39},"end":{"line":328,"column":7}},"line":326},"49":{"name":"(anonymous_49)","decl":{"start":{"line":340,"column":11},"end":{"line":340,"column":12}},"loc":{"start":{"line":340,"column":23},"end":{"line":351,"column":5}},"line":340},"50":{"name":"(anonymous_50)","decl":{"start":{"line":341,"column":45},"end":{"line":341,"column":46}},"loc":{"start":{"line":341,"column":88},"end":{"line":344,"column":7}},"line":341},"51":{"name":"importAccount","decl":{"start":{"line":346,"column":15},"end":{"line":346,"column":28}},"loc":{"start":{"line":346,"column":44},"end":{"line":348,"column":7}},"line":346},"52":{"name":"(anonymous_52)","decl":{"start":{"line":354,"column":11},"end":{"line":354,"column":12}},"loc":{"start":{"line":354,"column":23},"end":{"line":384,"column":5}},"line":354},"53":{"name":"(anonymous_53)","decl":{"start":{"line":355,"column":52},"end":{"line":355,"column":53}},"loc":{"start":{"line":355,"column":93},"end":{"line":377,"column":7}},"line":355},"54":{"name":"importAndAddIdentity","decl":{"start":{"line":379,"column":15},"end":{"line":379,"column":35}},"loc":{"start":{"line":379,"column":51},"end":{"line":381,"column":7}},"line":379},"55":{"name":"(anonymous_55)","decl":{"start":{"line":391,"column":11},"end":{"line":391,"column":12}},"loc":{"start":{"line":391,"column":23},"end":{"line":435,"column":5}},"line":391},"56":{"name":"(anonymous_56)","decl":{"start":{"line":392,"column":43},"end":{"line":392,"column":44}},"loc":{"start":{"line":392,"column":56},"end":{"line":428,"column":7}},"line":392},"57":{"name":"(anonymous_57)","decl":{"start":{"line":395,"column":37},"end":{"line":395,"column":38}},"loc":{"start":{"line":395,"column":55},"end":{"line":397,"column":11}},"line":395},"58":{"name":"getAccounts","decl":{"start":{"line":430,"column":15},"end":{"line":430,"column":26}},"loc":{"start":{"line":430,"column":29},"end":{"line":432,"column":7}},"line":430},"59":{"name":"(anonymous_59)","decl":{"start":{"line":443,"column":11},"end":{"line":443,"column":12}},"loc":{"start":{"line":443,"column":23},"end":{"line":462,"column":5}},"line":443},"60":{"name":"(anonymous_60)","decl":{"start":{"line":444,"column":47},"end":{"line":444,"column":48}},"loc":{"start":{"line":444,"column":82},"end":{"line":455,"column":7}},"line":444},"61":{"name":"getOrAddAccount","decl":{"start":{"line":457,"column":15},"end":{"line":457,"column":30}},"loc":{"start":{"line":457,"column":43},"end":{"line":459,"column":7}},"line":457},"62":{"name":"(anonymous_62)","decl":{"start":{"line":469,"column":11},"end":{"line":469,"column":12}},"loc":{"start":{"line":469,"column":23},"end":{"line":497,"column":5}},"line":469},"63":{"name":"(anonymous_63)","decl":{"start":{"line":470,"column":44},"end":{"line":470,"column":45}},"loc":{"start":{"line":470,"column":81},"end":{"line":490,"column":7}},"line":470},"64":{"name":"trackAccount","decl":{"start":{"line":492,"column":15},"end":{"line":492,"column":27}},"loc":{"start":{"line":492,"column":40},"end":{"line":494,"column":7}},"line":492},"65":{"name":"(anonymous_65)","decl":{"start":{"line":504,"column":11},"end":{"line":504,"column":12}},"loc":{"start":{"line":504,"column":23},"end":{"line":527,"column":5}},"line":504},"66":{"name":"(anonymous_66)","decl":{"start":{"line":505,"column":43},"end":{"line":505,"column":44}},"loc":{"start":{"line":505,"column":78},"end":{"line":520,"column":7}},"line":505},"67":{"name":"loadAccount","decl":{"start":{"line":522,"column":15},"end":{"line":522,"column":26}},"loc":{"start":{"line":522,"column":39},"end":{"line":524,"column":7}},"line":522},"68":{"name":"(anonymous_68)","decl":{"start":{"line":536,"column":11},"end":{"line":536,"column":12}},"loc":{"start":{"line":536,"column":23},"end":{"line":548,"column":5}},"line":536},"69":{"name":"(anonymous_69)","decl":{"start":{"line":537,"column":50},"end":{"line":537,"column":51}},"loc":{"start":{"line":537,"column":70},"end":{"line":541,"column":7}},"line":537},"70":{"name":"getNonceForAccount","decl":{"start":{"line":543,"column":15},"end":{"line":543,"column":33}},"loc":{"start":{"line":543,"column":40},"end":{"line":545,"column":7}},"line":543},"71":{"name":"(anonymous_71)","decl":{"start":{"line":551,"column":11},"end":{"line":551,"column":12}},"loc":{"start":{"line":551,"column":23},"end":{"line":561,"column":5}},"line":551},"72":{"name":"(anonymous_72)","decl":{"start":{"line":552,"column":56},"end":{"line":552,"column":57}},"loc":{"start":{"line":552,"column":76},"end":{"line":554,"column":7}},"line":552},"73":{"name":"getChainIdHashForAccount","decl":{"start":{"line":556,"column":15},"end":{"line":556,"column":39}},"loc":{"start":{"line":556,"column":46},"end":{"line":558,"column":7}},"line":556},"74":{"name":"(anonymous_74)","decl":{"start":{"line":570,"column":11},"end":{"line":570,"column":12}},"loc":{"start":{"line":570,"column":23},"end":{"line":618,"column":5}},"line":570},"75":{"name":"(anonymous_75)","decl":{"start":{"line":571,"column":50},"end":{"line":571,"column":51}},"loc":{"start":{"line":571,"column":74},"end":{"line":611,"column":7}},"line":571},"76":{"name":"prepareTransaction","decl":{"start":{"line":613,"column":15},"end":{"line":613,"column":33}},"loc":{"start":{"line":613,"column":46},"end":{"line":615,"column":7}},"line":613},"77":{"name":"(anonymous_77)","decl":{"start":{"line":626,"column":11},"end":{"line":626,"column":12}},"loc":{"start":{"line":626,"column":23},"end":{"line":638,"column":5}},"line":626},"78":{"name":"(anonymous_78)","decl":{"start":{"line":627,"column":52},"end":{"line":627,"column":53}},"loc":{"start":{"line":627,"column":79},"end":{"line":631,"column":7}},"line":627},"79":{"name":"getAddressFromLedger","decl":{"start":{"line":633,"column":15},"end":{"line":633,"column":35}},"loc":{"start":{"line":633,"column":42},"end":{"line":635,"column":7}},"line":633}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":75},"end":{"line":20,"column":326}},"type":"if","locations":[{"start":{"line":20,"column":75},"end":{"line":20,"column":326}},{"start":{"line":20,"column":75},"end":{"line":20,"column":326}}],"line":20},"1":{"loc":{"start":{"line":20,"column":163},"end":{"line":20,"column":292}},"type":"if","locations":[{"start":{"line":20,"column":163},"end":{"line":20,"column":292}},{"start":{"line":20,"column":163},"end":{"line":20,"column":292}}],"line":20},"2":{"loc":{"start":{"line":22,"column":91},"end":{"line":22,"column":131}},"type":"cond-expr","locations":[{"start":{"line":22,"column":114},"end":{"line":22,"column":126}},{"start":{"line":22,"column":129},"end":{"line":22,"column":131}}],"line":22},"3":{"loc":{"start":{"line":22,"column":133},"end":{"line":22,"column":515}},"type":"if","locations":[{"start":{"line":22,"column":133},"end":{"line":22,"column":515}},{"start":{"line":22,"column":133},"end":{"line":22,"column":515}}],"line":22},"4":{"loc":{"start":{"line":22,"column":255},"end":{"line":22,"column":515}},"type":"if","locations":[{"start":{"line":22,"column":255},"end":{"line":22,"column":515}},{"start":{"line":22,"column":255},"end":{"line":22,"column":515}}],"line":22},"5":{"loc":{"start":{"line":24,"column":24},"end":{"line":24,"column":328}},"type":"if","locations":[{"start":{"line":24,"column":24},"end":{"line":24,"column":328}},{"start":{"line":24,"column":24},"end":{"line":24,"column":328}}],"line":24},"6":{"loc":{"start":{"line":24,"column":28},"end":{"line":24,"column":95}},"type":"binary-expr","locations":[{"start":{"line":24,"column":28},"end":{"line":24,"column":56}},{"start":{"line":24,"column":60},"end":{"line":24,"column":95}}],"line":24},"7":{"loc":{"start":{"line":24,"column":205},"end":{"line":24,"column":322}},"type":"cond-expr","locations":[{"start":{"line":24,"column":301},"end":{"line":24,"column":309}},{"start":{"line":24,"column":312},"end":{"line":24,"column":322}}],"line":24},"8":{"loc":{"start":{"line":24,"column":205},"end":{"line":24,"column":298}},"type":"binary-expr","locations":[{"start":{"line":24,"column":205},"end":{"line":24,"column":208}},{"start":{"line":24,"column":212},"end":{"line":24,"column":240}},{"start":{"line":24,"column":244},"end":{"line":24,"column":270}},{"start":{"line":24,"column":274},"end":{"line":24,"column":298}}],"line":24},"9":{"loc":{"start":{"line":26,"column":176},"end":{"line":26,"column":263}},"type":"if","locations":[{"start":{"line":26,"column":176},"end":{"line":26,"column":263}},{"start":{"line":26,"column":176},"end":{"line":26,"column":263}}],"line":26},"10":{"loc":{"start":{"line":30,"column":50},"end":{"line":30,"column":151}},"type":"if","locations":[{"start":{"line":30,"column":50},"end":{"line":30,"column":151}},{"start":{"line":30,"column":50},"end":{"line":30,"column":151}}],"line":30},"11":{"loc":{"start":{"line":32,"column":136},"end":{"line":32,"column":166}},"type":"binary-expr","locations":[{"start":{"line":32,"column":136},"end":{"line":32,"column":157}},{"start":{"line":32,"column":161},"end":{"line":32,"column":166}}],"line":32},"12":{"loc":{"start":{"line":32,"column":200},"end":{"line":32,"column":254}},"type":"if","locations":[{"start":{"line":32,"column":200},"end":{"line":32,"column":254}},{"start":{"line":32,"column":200},"end":{"line":32,"column":254}}],"line":32},"13":{"loc":{"start":{"line":34,"column":62},"end":{"line":34,"column":131}},"type":"if","locations":[{"start":{"line":34,"column":62},"end":{"line":34,"column":131}},{"start":{"line":34,"column":62},"end":{"line":34,"column":131}}],"line":34},"14":{"loc":{"start":{"line":34,"column":132},"end":{"line":34,"column":193}},"type":"if","locations":[{"start":{"line":34,"column":132},"end":{"line":34,"column":193}},{"start":{"line":34,"column":132},"end":{"line":34,"column":193}}],"line":34},"15":{"loc":{"start":{"line":36,"column":50},"end":{"line":36,"column":138}},"type":"if","locations":[{"start":{"line":36,"column":50},"end":{"line":36,"column":138}},{"start":{"line":36,"column":50},"end":{"line":36,"column":138}}],"line":36},"16":{"loc":{"start":{"line":36,"column":54},"end":{"line":36,"column":120}},"type":"binary-expr","locations":[{"start":{"line":36,"column":54},"end":{"line":36,"column":58}},{"start":{"line":36,"column":63},"end":{"line":36,"column":89}},{"start":{"line":36,"column":93},"end":{"line":36,"column":119}}],"line":36},"17":{"loc":{"start":{"line":38,"column":48},"end":{"line":38,"column":175}},"type":"cond-expr","locations":[{"start":{"line":38,"column":72},"end":{"line":38,"column":93}},{"start":{"line":38,"column":96},"end":{"line":38,"column":175}}],"line":38},"18":{"loc":{"start":{"line":38,"column":133},"end":{"line":38,"column":172}},"type":"binary-expr","locations":[{"start":{"line":38,"column":133},"end":{"line":38,"column":144}},{"start":{"line":38,"column":148},"end":{"line":38,"column":172}}],"line":38},"19":{"loc":{"start":{"line":40,"column":40},"end":{"line":40,"column":151}},"type":"if","locations":[{"start":{"line":40,"column":40},"end":{"line":40,"column":151}},{"start":{"line":40,"column":40},"end":{"line":40,"column":151}}],"line":40},"20":{"loc":{"start":{"line":42,"column":43},"end":{"line":42,"column":182}},"type":"if","locations":[{"start":{"line":42,"column":43},"end":{"line":42,"column":182}},{"start":{"line":42,"column":43},"end":{"line":42,"column":182}}],"line":42},"21":{"loc":{"start":{"line":42,"column":47},"end":{"line":42,"column":102}},"type":"binary-expr","locations":[{"start":{"line":42,"column":47},"end":{"line":42,"column":79}},{"start":{"line":42,"column":83},"end":{"line":42,"column":102}}],"line":42},"22":{"loc":{"start":{"line":42,"column":218},"end":{"line":42,"column":252}},"type":"binary-expr","locations":[{"start":{"line":42,"column":218},"end":{"line":42,"column":228}},{"start":{"line":42,"column":232},"end":{"line":42,"column":252}}],"line":42},"23":{"loc":{"start":{"line":42,"column":329},"end":{"line":42,"column":383}},"type":"if","locations":[{"start":{"line":42,"column":329},"end":{"line":42,"column":383}},{"start":{"line":42,"column":329},"end":{"line":42,"column":383}}],"line":42},"24":{"loc":{"start":{"line":44,"column":51},"end":{"line":44,"column":137}},"type":"binary-expr","locations":[{"start":{"line":44,"column":51},"end":{"line":44,"column":72}},{"start":{"line":44,"column":76},"end":{"line":44,"column":137}}],"line":44},"25":{"loc":{"start":{"line":46,"column":44},"end":{"line":46,"column":195}},"type":"if","locations":[{"start":{"line":46,"column":44},"end":{"line":46,"column":195}},{"start":{"line":46,"column":44},"end":{"line":46,"column":195}}],"line":46},"26":{"loc":{"start":{"line":78,"column":8},"end":{"line":83,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":83,"column":9}},{"start":{"line":78,"column":8},"end":{"line":83,"column":9}}],"line":78},"27":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":109}},"type":"binary-expr","locations":[{"start":{"line":78,"column":12},"end":{"line":78,"column":66}},{"start":{"line":78,"column":70},"end":{"line":78,"column":109}}],"line":78},"28":{"loc":{"start":{"line":82,"column":10},"end":{"line":82,"column":111}},"type":"binary-expr","locations":[{"start":{"line":82,"column":10},"end":{"line":82,"column":39}},{"start":{"line":82,"column":43},"end":{"line":82,"column":111}}],"line":82},"29":{"loc":{"start":{"line":108,"column":6},"end":{"line":110,"column":7}},"type":"if","locations":[{"start":{"line":108,"column":6},"end":{"line":110,"column":7}},{"start":{"line":108,"column":6},"end":{"line":110,"column":7}}],"line":108},"30":{"loc":{"start":{"line":152,"column":6},"end":{"line":152,"column":31}},"type":"if","locations":[{"start":{"line":152,"column":6},"end":{"line":152,"column":31}},{"start":{"line":152,"column":6},"end":{"line":152,"column":31}}],"line":152},"31":{"loc":{"start":{"line":168,"column":10},"end":{"line":170,"column":11}},"type":"if","locations":[{"start":{"line":168,"column":10},"end":{"line":170,"column":11}},{"start":{"line":168,"column":10},"end":{"line":170,"column":11}}],"line":168},"32":{"loc":{"start":{"line":168,"column":14},"end":{"line":168,"column":71}},"type":"binary-expr","locations":[{"start":{"line":168,"column":14},"end":{"line":168,"column":40}},{"start":{"line":168,"column":44},"end":{"line":168,"column":71}}],"line":168},"33":{"loc":{"start":{"line":172,"column":10},"end":{"line":174,"column":11}},"type":"if","locations":[{"start":{"line":172,"column":10},"end":{"line":174,"column":11}},{"start":{"line":172,"column":10},"end":{"line":174,"column":11}}],"line":172},"34":{"loc":{"start":{"line":185,"column":6},"end":{"line":185,"column":30}},"type":"if","locations":[{"start":{"line":185,"column":6},"end":{"line":185,"column":30}},{"start":{"line":185,"column":6},"end":{"line":185,"column":30}}],"line":185},"35":{"loc":{"start":{"line":201,"column":10},"end":{"line":203,"column":11}},"type":"if","locations":[{"start":{"line":201,"column":10},"end":{"line":203,"column":11}},{"start":{"line":201,"column":10},"end":{"line":203,"column":11}}],"line":201},"36":{"loc":{"start":{"line":201,"column":14},"end":{"line":201,"column":73}},"type":"binary-expr","locations":[{"start":{"line":201,"column":14},"end":{"line":201,"column":41}},{"start":{"line":201,"column":45},"end":{"line":201,"column":73}}],"line":201},"37":{"loc":{"start":{"line":205,"column":10},"end":{"line":207,"column":11}},"type":"if","locations":[{"start":{"line":205,"column":10},"end":{"line":207,"column":11}},{"start":{"line":205,"column":10},"end":{"line":207,"column":11}}],"line":205},"38":{"loc":{"start":{"line":219,"column":20},"end":{"line":219,"column":113}},"type":"cond-expr","locations":[{"start":{"line":219,"column":65},"end":{"line":219,"column":84}},{"start":{"line":219,"column":87},"end":{"line":219,"column":113}}],"line":219},"39":{"loc":{"start":{"line":236,"column":6},"end":{"line":238,"column":7}},"type":"if","locations":[{"start":{"line":236,"column":6},"end":{"line":238,"column":7}},{"start":{"line":236,"column":6},"end":{"line":238,"column":7}}],"line":236},"40":{"loc":{"start":{"line":246,"column":8},"end":{"line":246,"column":92}},"type":"binary-expr","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":31}},{"start":{"line":246,"column":35},"end":{"line":246,"column":92}}],"line":246},"41":{"loc":{"start":{"line":261,"column":8},"end":{"line":264,"column":9}},"type":"if","locations":[{"start":{"line":261,"column":8},"end":{"line":264,"column":9}},{"start":{"line":261,"column":8},"end":{"line":264,"column":9}}],"line":261},"42":{"loc":{"start":{"line":266,"column":8},"end":{"line":279,"column":9}},"type":"if","locations":[{"start":{"line":266,"column":8},"end":{"line":279,"column":9}},{"start":{"line":266,"column":8},"end":{"line":279,"column":9}}],"line":266},"43":{"loc":{"start":{"line":271,"column":10},"end":{"line":278,"column":11}},"type":"if","locations":[{"start":{"line":271,"column":10},"end":{"line":278,"column":11}},{"start":{"line":271,"column":10},"end":{"line":278,"column":11}}],"line":271},"44":{"loc":{"start":{"line":275,"column":12},"end":{"line":277,"column":13}},"type":"if","locations":[{"start":{"line":275,"column":12},"end":{"line":277,"column":13}},{"start":{"line":275,"column":12},"end":{"line":277,"column":13}}],"line":275},"45":{"loc":{"start":{"line":301,"column":8},"end":{"line":303,"column":9}},"type":"if","locations":[{"start":{"line":301,"column":8},"end":{"line":303,"column":9}},{"start":{"line":301,"column":8},"end":{"line":303,"column":9}}],"line":301},"46":{"loc":{"start":{"line":393,"column":8},"end":{"line":424,"column":9}},"type":"if","locations":[{"start":{"line":393,"column":8},"end":{"line":424,"column":9}},{"start":{"line":393,"column":8},"end":{"line":424,"column":9}}],"line":393},"47":{"loc":{"start":{"line":393,"column":12},"end":{"line":393,"column":58}},"type":"binary-expr","locations":[{"start":{"line":393,"column":12},"end":{"line":393,"column":33}},{"start":{"line":393,"column":37},"end":{"line":393,"column":58}}],"line":393},"48":{"loc":{"start":{"line":412,"column":14},"end":{"line":414,"column":15}},"type":"if","locations":[{"start":{"line":412,"column":14},"end":{"line":414,"column":15}},{"start":{"line":412,"column":14},"end":{"line":414,"column":15}}],"line":412},"49":{"loc":{"start":{"line":412,"column":18},"end":{"line":412,"column":77}},"type":"binary-expr","locations":[{"start":{"line":412,"column":18},"end":{"line":412,"column":45}},{"start":{"line":412,"column":49},"end":{"line":412,"column":77}}],"line":412},"50":{"loc":{"start":{"line":416,"column":14},"end":{"line":418,"column":15}},"type":"if","locations":[{"start":{"line":416,"column":14},"end":{"line":418,"column":15}},{"start":{"line":416,"column":14},"end":{"line":418,"column":15}}],"line":416},"51":{"loc":{"start":{"line":448,"column":8},"end":{"line":452,"column":9}},"type":"if","locations":[{"start":{"line":448,"column":8},"end":{"line":452,"column":9}},{"start":{"line":448,"column":8},"end":{"line":452,"column":9}}],"line":448},"52":{"loc":{"start":{"line":473,"column":8},"end":{"line":477,"column":9}},"type":"if","locations":[{"start":{"line":473,"column":8},"end":{"line":477,"column":9}},{"start":{"line":473,"column":8},"end":{"line":477,"column":9}}],"line":473},"53":{"loc":{"start":{"line":481,"column":8},"end":{"line":483,"column":9}},"type":"if","locations":[{"start":{"line":481,"column":8},"end":{"line":483,"column":9}},{"start":{"line":481,"column":8},"end":{"line":483,"column":9}}],"line":481},"54":{"loc":{"start":{"line":506,"column":8},"end":{"line":512,"column":9}},"type":"if","locations":[{"start":{"line":506,"column":8},"end":{"line":512,"column":9}},{"start":{"line":506,"column":8},"end":{"line":512,"column":9}}],"line":506},"55":{"loc":{"start":{"line":572,"column":8},"end":{"line":572,"column":105}},"type":"if","locations":[{"start":{"line":572,"column":8},"end":{"line":572,"column":105}},{"start":{"line":572,"column":8},"end":{"line":572,"column":105}}],"line":572},"56":{"loc":{"start":{"line":573,"column":8},"end":{"line":573,"column":155}},"type":"if","locations":[{"start":{"line":573,"column":8},"end":{"line":573,"column":155}},{"start":{"line":573,"column":8},"end":{"line":573,"column":155}}],"line":573},"57":{"loc":{"start":{"line":574,"column":8},"end":{"line":574,"column":139}},"type":"if","locations":[{"start":{"line":574,"column":8},"end":{"line":574,"column":139}},{"start":{"line":574,"column":8},"end":{"line":574,"column":139}}],"line":574},"58":{"loc":{"start":{"line":575,"column":8},"end":{"line":575,"column":111}},"type":"if","locations":[{"start":{"line":575,"column":8},"end":{"line":575,"column":111}},{"start":{"line":575,"column":8},"end":{"line":575,"column":111}}],"line":575},"59":{"loc":{"start":{"line":578,"column":8},"end":{"line":582,"column":9}},"type":"if","locations":[{"start":{"line":578,"column":8},"end":{"line":582,"column":9}},{"start":{"line":578,"column":8},"end":{"line":582,"column":9}}],"line":578},"60":{"loc":{"start":{"line":581,"column":39},"end":{"line":581,"column":55}},"type":"binary-expr","locations":[{"start":{"line":581,"column":39},"end":{"line":581,"column":49}},{"start":{"line":581,"column":53},"end":{"line":581,"column":55}}],"line":581},"61":{"loc":{"start":{"line":584,"column":8},"end":{"line":587,"column":9}},"type":"if","locations":[{"start":{"line":584,"column":8},"end":{"line":587,"column":9}},{"start":{"line":584,"column":8},"end":{"line":587,"column":9}}],"line":584},"62":{"loc":{"start":{"line":589,"column":8},"end":{"line":592,"column":9}},"type":"if","locations":[{"start":{"line":589,"column":8},"end":{"line":592,"column":9}},{"start":{"line":589,"column":8},"end":{"line":592,"column":9}}],"line":589},"63":{"loc":{"start":{"line":594,"column":8},"end":{"line":597,"column":9}},"type":"if","locations":[{"start":{"line":594,"column":8},"end":{"line":597,"column":9}},{"start":{"line":594,"column":8},"end":{"line":597,"column":9}}],"line":594},"64":{"loc":{"start":{"line":594,"column":12},"end":{"line":594,"column":71}},"type":"binary-expr","locations":[{"start":{"line":594,"column":12},"end":{"line":594,"column":43}},{"start":{"line":594,"column":47},"end":{"line":594,"column":71}}],"line":594},"65":{"loc":{"start":{"line":602,"column":14},"end":{"line":602,"column":43}},"type":"cond-expr","locations":[{"start":{"line":602,"column":22},"end":{"line":602,"column":38}},{"start":{"line":602,"column":41},"end":{"line":602,"column":43}}],"line":602},"66":{"loc":{"start":{"line":608,"column":16},"end":{"line":608,"column":28}},"type":"binary-expr","locations":[{"start":{"line":608,"column":16},"end":{"line":608,"column":23}},{"start":{"line":608,"column":27},"end":{"line":608,"column":28}}],"line":608},"67":{"loc":{"start":{"line":628,"column":8},"end":{"line":628,"column":104}},"type":"if","locations":[{"start":{"line":628,"column":8},"end":{"line":628,"column":104}},{"start":{"line":628,"column":8},"end":{"line":628,"column":104}}],"line":628}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":8,"9":8,"10":8,"11":8,"12":8,"13":0,"14":8,"15":8,"16":8,"17":8,"18":8,"19":8,"20":8,"21":2,"22":0,"23":0,"24":0,"25":0,"26":8,"27":1,"28":1,"29":7,"30":0,"31":0,"32":1,"33":83,"34":83,"35":82,"36":1,"37":1,"38":82,"39":38,"40":44,"41":14,"42":39,"43":39,"44":39,"45":39,"46":77,"47":6,"48":39,"49":7,"50":0,"51":2,"52":2,"53":20,"54":20,"55":20,"56":20,"57":20,"58":20,"59":2,"60":2,"61":2,"62":0,"63":2,"64":7,"65":7,"66":0,"67":1,"68":0,"69":1,"70":27,"71":0,"72":27,"73":2,"74":0,"75":2,"76":2,"77":2,"78":1,"79":0,"80":0,"81":1,"82":29,"83":0,"84":29,"85":29,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":0,"113":2,"114":1,"115":1,"116":1,"117":1,"118":6,"119":6,"120":6,"121":6,"122":6,"123":6,"124":6,"125":6,"126":1,"127":1,"128":0,"129":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"136":0,"137":0,"138":0,"139":0,"140":1,"141":1,"142":0,"143":1,"144":0,"145":1,"146":0,"147":1,"148":1,"149":1,"150":1,"151":1,"152":1,"153":1,"154":1,"155":1,"156":0,"157":0,"158":1,"159":1,"160":0,"161":1,"162":0,"163":14,"164":14,"165":8,"166":8,"167":8,"168":0,"169":8,"170":8,"171":8,"172":8,"173":8,"174":8,"175":1,"176":3,"177":3,"178":3,"179":3,"180":3,"181":3,"182":3,"183":3,"184":3,"185":2,"186":3,"187":3,"188":1,"189":1,"190":0,"191":0,"192":0,"193":0,"194":1,"195":1,"196":4,"197":4,"198":4,"199":1,"200":1,"201":0,"202":0,"203":0,"204":1,"205":1,"206":4,"207":4,"208":4,"209":4,"210":1,"211":1,"212":3,"213":4,"214":1,"215":1,"216":2,"217":1,"218":1,"219":1,"220":1,"221":1,"222":1,"223":1,"224":1,"225":1,"226":1,"227":1,"228":0,"229":0,"230":1,"231":1,"232":0,"233":1,"234":0,"235":1,"236":1,"237":1,"238":1,"239":2,"240":1,"241":1,"242":2,"243":2,"244":1,"245":1,"246":2,"247":2,"248":1,"249":1,"250":1,"251":1,"252":0,"253":1,"254":1,"255":0,"256":1,"257":1,"258":1,"259":1,"260":1,"261":1,"262":1,"263":8,"264":5,"265":5,"266":0,"267":8,"268":8,"269":1,"270":1,"271":4,"272":4,"273":4,"274":1,"275":1,"276":4,"277":4,"278":1,"279":1,"280":6,"281":0,"282":6,"283":0,"284":6,"285":0,"286":6,"287":0,"288":6,"289":6,"290":0,"291":6,"292":6,"293":4,"294":6,"295":4,"296":6,"297":0,"298":6,"299":6,"300":1,"301":1,"302":0,"303":0,"304":0,"305":0,"306":0,"307":1,"308":1,"309":1},"f":{"0":8,"1":0,"2":8,"3":2,"4":0,"5":1,"6":7,"7":0,"8":83,"9":14,"10":39,"11":39,"12":77,"13":6,"14":7,"15":2,"16":2,"17":7,"18":1,"19":0,"20":27,"21":2,"22":1,"23":0,"24":29,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":0,"32":2,"33":1,"34":6,"35":1,"36":1,"37":14,"38":8,"39":8,"40":1,"41":3,"42":3,"43":1,"44":0,"45":0,"46":1,"47":4,"48":4,"49":1,"50":0,"51":0,"52":1,"53":4,"54":4,"55":1,"56":2,"57":1,"58":2,"59":1,"60":2,"61":2,"62":1,"63":1,"64":1,"65":1,"66":8,"67":8,"68":1,"69":4,"70":4,"71":1,"72":4,"73":4,"74":1,"75":6,"76":6,"77":1,"78":0,"79":0},"b":{"0":[8,0],"1":[8,0],"2":[1,7],"3":[8,0],"4":[0,0],"5":[1,0],"6":[1,1],"7":[0,0],"8":[0,0,0,0],"9":[38,44],"10":[0,7],"11":[20,20],"12":[20,0],"13":[2,0],"14":[0,2],"15":[7,0],"16":[7,7,0],"17":[1,0],"18":[0,0],"19":[0,27],"20":[0,2],"21":[2,0],"22":[2,2],"23":[2,0],"24":[1,0],"25":[0,29],"26":[1,0],"27":[1,0],"28":[1,0],"29":[1,1],"30":[0,1],"31":[0,1],"32":[1,0],"33":[0,1],"34":[0,1],"35":[0,1],"36":[1,0],"37":[0,1],"38":[6,8],"39":[0,8],"40":[8,5],"41":[3,0],"42":[3,0],"43":[3,0],"44":[2,1],"45":[0,0],"46":[1,1],"47":[2,2],"48":[0,1],"49":[1,0],"50":[0,1],"51":[1,1],"52":[1,0],"53":[0,1],"54":[5,3],"55":[0,6],"56":[0,6],"57":[0,6],"58":[0,6],"59":[0,6],"60":[6,3],"61":[4,2],"62":[4,2],"63":[0,6],"64":[6,6],"65":[5,1],"66":[6,6],"67":[0,0]},"inputSourceMap":{"version":3,"sources":["account-manager.ts"],"names":["AccountTracker","manager","account","client","wallet","getClient","data","spec","chainId","state","getState","address","balance","toString","nonce","emit","datastore","getIndex","put","load","pause","intervalId","setInterval","ACCOUNT_UPDATE_INTERVAL","clearInterval","PausableTypedEventEmitter","AccountManager","HashMap","paused","trackers","values","tracker","resume","accountSpec","defaultChainId","extraData","completeAccountSpec","getCompleteAccountSpec","accounts","has","Error","accountPromise","loadAccount","set","then","index","keystore","remainingAccounts","Array","from","getAll","length","keyManager","removeKey","clear","identity","importAndAddIdentity","privateKey","addAccount","importKey","e","removeAccount","loadedFromStore","records","map","record","Account","key","Promise","resolve","promises","all","get","accountOrSpec","getOrAddAccount","getDefaultData","getNonce","getChainIdHash","tx","Address","equal","to","amount","Amount","toUnit","payload","Uint8Array","Buffer","getNonceForAccount","chainIdHash","getChainIdHashForAccount","limit","defaultLimit","Transaction","hash","ts","Date","toISOString","blockhash","blockno","type","status","Status","Pending","derivationPath","ledger","getWalletAddress"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers","sourcesContent":["import { Wallet } from '../wallet';\nimport { Account, AccountSpec, AccountData, CompleteAccountSpec } from '../models/account';\nimport { Transaction, TxBody, CompleteTxBody } from '../models/transaction';\nimport { serializeAccountSpec, HashMap } from '../utils';\nimport { Amount, Address } from '@herajs/common';\nimport { ACCOUNT_UPDATE_INTERVAL } from '../defaults';\nimport { PausableTypedEventEmitter } from '../utils';\nimport { createIdentity, identifyFromPrivateKey } from '@herajs/crypto';\nimport { Identity } from '@herajs/crypto/dist/types/keys';\n\nexport interface Events {\n    'add': Account;\n    'update': Account;\n    'remove': AccountSpec;\n    'change': Account[];\n}\n\nexport interface TrackerEvents {\n    'update': Account;\n}\n\nclass AccountTracker extends PausableTypedEventEmitter<TrackerEvents> {\n    private manager: AccountManager;\n    private intervalId?: NodeJS.Timeout;\n    private account: Account;\n\n    constructor(manager: AccountManager, account: Account) {\n        super();\n        this.manager = manager;\n        this.account = account;\n    }\n\n    async load(): Promise<Account> {\n        const client = this.manager.wallet.getClient(this.account.data.spec.chainId);\n        const state = await client.getState(this.account.data.spec.address);\n        if (this.account.data.balance !== state.balance.toString() || this.account.data.nonce !== state.nonce) {\n            this.account.data.balance = state.balance.toString();\n            this.account.data.nonce = state.nonce;\n            this.emit('update', this.account);\n            this.manager.wallet.datastore && this.manager.wallet.datastore.getIndex('accounts').put(this.account);\n        }\n        return this.account;\n    }\n\n    resume(): void {\n        this.load();\n        this.pause();\n        this.intervalId = setInterval(() => {\n            this.load();\n        }, ACCOUNT_UPDATE_INTERVAL);\n    }\n\n    pause(): void {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n        }\n    }\n}\n\n/**\n * AccountManager manages and tracks single accounts\n */\nexport default class AccountManager extends PausableTypedEventEmitter<Events> {\n    public wallet: Wallet;\n    private accounts: HashMap<CompleteAccountSpec, Promise<Account>> = new HashMap();\n    private trackers: HashMap<CompleteAccountSpec, AccountTracker> = new HashMap();\n    private loadedFromStore = false;\n\n    constructor(wallet: Wallet) {\n        super();\n        this.wallet = wallet;\n    }\n\n    /**\n     * Resume all existing account trackers.\n     */\n    resume(): void {\n        if (!this.paused) return;\n        this.paused = false;\n        for (const tracker of this.trackers.values()) {\n            tracker.resume();\n        }\n    }\n\n    /**\n     * Pause all existing account trackers.\n     */\n    pause(): void {\n        if (this.paused) return;\n        this.paused = true;\n        for (const tracker of this.trackers.values()) {\n            tracker.pause();\n        }\n    }\n\n    /**\n     * Completes accountSpec with chainId in case chainId is undefined.\n     * @param accountSpec completed account spec\n     */\n    getCompleteAccountSpec(accountSpec: AccountSpec): CompleteAccountSpec {\n        const chainId = typeof accountSpec.chainId !== 'undefined' ? accountSpec.chainId : this.wallet.defaultChainId;\n        return {\n            address: accountSpec.address,\n            chainId\n        };\n    }\n\n    /**\n     * Adds account to manager and datastore.\n     */\n    addAccount(accountSpec: AccountSpec, extraData?: Partial<AccountData>): Promise<Account> {\n        const completeAccountSpec = this.getCompleteAccountSpec(accountSpec);\n        if (this.accounts.has(completeAccountSpec)) {\n            throw new Error('Account has already been added.');\n        }\n        // console.log('addAccount', completeAccountSpec);\n        const accountPromise = this.loadAccount(completeAccountSpec, extraData);\n        this.accounts.set(completeAccountSpec, accountPromise);\n        accountPromise.then(account => {\n            this.emit('add', account);\n            this.wallet.datastore && this.wallet.datastore.getIndex('accounts').put(account);\n        });\n        return accountPromise;\n    }\n\n    /**\n     * Removes account from manager and datastore.\n     * Also removes account's key from keystore if no other account uses it.\n     */\n    async removeAccount(accountSpec: AccountSpec): Promise<void> {\n        const completeAccountSpec = this.getCompleteAccountSpec(accountSpec);\n        if (this.accounts.has(completeAccountSpec)) {\n            // Remove account from local cache\n            this.accounts.delete(completeAccountSpec);\n        }\n        if (this.wallet.datastore) {\n            // Remove account from store\n            const index = this.wallet.datastore.getIndex('accounts');\n            await index.delete(serializeAccountSpec(completeAccountSpec));\n            if (this.wallet.keystore) {\n                // Also remove key if there's no other account with this address\n                const remainingAccounts = Array.from(await index.getAll(completeAccountSpec.address.toString(), 'spec.address'));\n                if (remainingAccounts.length === 0) {\n                    await this.wallet.keyManager.removeKey(completeAccountSpec.address.toString());\n                }\n            }\n        }\n        this.emit('remove', completeAccountSpec);\n    }\n\n    /**\n     * Remove all accounts from manager and datastore.\n     * Does not delete keys, call keyManager.clearKeys() for that.\n     */\n    async clearAccounts(): Promise<void> {\n        this.accounts.clear();\n        if (this.wallet.datastore) {\n            await this.wallet.datastore.getIndex('accounts').clear();\n        }\n    }\n\n    /**\n     * Generates a new account and private key.\n     * @param chainId optional, uses default chainId if undefined\n     * @param extraData optional, extra data to be saved with account\n     */\n    async createAccount(chainId?: string, extraData?: Partial<AccountData>): Promise<Account> {\n        const identity = createIdentity();\n        return this.importAndAddIdentity(identity, chainId, extraData);\n    }\n\n    /**\n     * Import an account by private key.\n     * @param chainId optional, uses default chainId if undefined\n     * @param extraData optional, extra data to be saved with account\n     */\n    async importAccount(privateKey: Buffer|Uint8Array, chainId?: string, extraData?: Partial<AccountData>): Promise<Account> {\n        const identity = identifyFromPrivateKey(privateKey);\n        return this.importAndAddIdentity(identity, chainId, extraData);\n    }\n\n    private async importAndAddIdentity(identity: Identity, chainId?: string, extraData?: Partial<AccountData>): Promise<Account> {\n        const address = identity.address;\n        const account = await this.addAccount({ address, chainId }, extraData);\n        try {\n            await this.wallet.keyManager.importKey({\n                account: account,\n                privateKey: identity.privateKey,\n            });\n        } catch (e) {\n            // Rollback\n            await this.removeAccount({ address, chainId });\n            throw e;\n        }\n        return account;\n    }\n\n    /**\n     * Returns list of all accounts. Loads data persisted in datastore.\n     */\n    async getAccounts(): Promise<Account[]> {\n        if (!this.loadedFromStore && this.wallet.datastore) {\n            const records = Array.from(await this.wallet.datastore.getIndex('accounts').getAll());\n            const accounts = records.map(record => new Account(record.key, record.data as AccountData));\n            for (const account of accounts) {\n                this.accounts.set(this.getCompleteAccountSpec(account.data.spec), Promise.resolve(account));\n            }\n            this.loadedFromStore = true;\n            return accounts;\n        }\n        const promises = await this.accounts.values();\n        return Promise.all(promises);\n    }\n\n    /**\n     * Gets an account and adds it to the manager if not existing.\n     * @param accountSpec \n     */\n    async getOrAddAccount(accountSpec: CompleteAccountSpec | AccountSpec, extraData?: Partial<AccountData>): Promise<Account> {\n        const completeAccountSpec = this.getCompleteAccountSpec(accountSpec);\n        let account: Account;\n        if (!this.accounts.has(completeAccountSpec)) {\n            account = await this.addAccount(completeAccountSpec, extraData);\n        } else {\n            account = await this.accounts.get(completeAccountSpec) as Account;\n        }\n        return account;\n    }\n\n    /**\n     * Returns an account tracker.\n     */\n    async trackAccount(accountOrSpec: AccountSpec | Account, extraData?: Partial<AccountData>): Promise<AccountTracker> {  \n        let account: Account;\n        if (!(accountOrSpec as Account).data) {\n            account = await this.getOrAddAccount(accountOrSpec as AccountSpec, extraData);\n        } else {\n            account = accountOrSpec as Account;\n        }\n        this.resume();\n        if (this.trackers.has(account.data.spec)) {\n            return this.trackers.get(account.data.spec) as AccountTracker;\n        }\n        //console.log('[accountManager] track account', account.data.spec);\n        const tracker = new AccountTracker(this, account);\n        tracker.resume();\n        this.trackers.set(account.data.spec, tracker);\n        return tracker;\n    }\n\n    /**\n     * Initializes account from datastore or with initial values.\n     */\n    async loadAccount(accountSpec: CompleteAccountSpec, extraData?: Partial<AccountData>): Promise<Account> {\n        if (this.wallet.datastore) {\n            try {\n                const record = await this.wallet.datastore.getIndex('accounts').get(serializeAccountSpec(accountSpec));\n                return new Account(record.key, record.data as AccountData);\n            } catch (e) {\n                // not found\n            }\n        }\n        return new Account(serializeAccountSpec(accountSpec), Account.getDefaultData({\n            spec: {\n                chainId: accountSpec.chainId,\n                address: accountSpec.address.toString()\n            },\n            ...extraData,\n        }));\n    }\n\n    /**\n     * Returns next usable nonce for account.\n     * This uses the Aergo client to determine the nonce from the server.\n     * @param account \n     */\n    async getNonceForAccount(account: Account): Promise<number> {\n        // TODO: smart caching of last used nonce so we can create multiple transactions at once\n        const client = this.wallet.getClient(account.data.spec.chainId);\n        return 1 + await client.getNonce(account.data.spec.address);\n    }\n\n    private async getChainIdHashForAccount(account: Account): Promise<string> {\n        return await this.wallet.getClient(account.data.spec.chainId).getChainIdHash('base58') as string;\n    }\n\n    /**\n     * Calculates nonce and converts transaction body into tx ready for signing\n     * @param account \n     * @param tx \n     */\n    async prepareTransaction(account: Account, tx: Partial<TxBody>): Promise<Transaction> {\n        if (!tx.from) throw new Error('missing required transaction parameter `from` (address or name)');\n        if (!new Address(account.data.spec.address).equal(tx.from)) throw new Error('transaction parameter `from` does not match account address');\n        if (typeof tx.to === 'undefined') throw new Error('missing required transaction parameter `to` (address, name, or explicit null)');\n        if (typeof tx.amount === 'undefined') throw new Error('missing required transaction parameter amount');\n        tx.amount = new Amount(tx.amount).toUnit('aer').toString();\n        if (typeof tx.payload === 'string') {\n            tx.payload = Uint8Array.from(Buffer.from(tx.payload));\n        } else {\n            tx.payload = Uint8Array.from(tx.payload || []);\n        }\n        if (typeof tx.nonce === 'undefined') {\n            // eslint-disable-next-line require-atomic-updates\n            tx.nonce = await this.getNonceForAccount(account);\n        }\n        if (typeof tx.chainIdHash === 'undefined') {\n            // eslint-disable-next-line require-atomic-updates\n            tx.chainIdHash = await this.getChainIdHashForAccount(account);\n        }\n        if (typeof tx.limit === 'undefined' && this.wallet.defaultLimit) {\n            // eslint-disable-next-line require-atomic-updates\n            tx.limit = this.wallet.defaultLimit;\n        }\n        return new Transaction('', {\n            chainId: account.data.spec.chainId,\n            from: tx.from.toString(),\n            to: tx.to ? tx.to.toString() : '',\n            hash: '',\n            ts: new Date().toISOString(),\n            blockhash: null,\n            blockno: null,\n            amount: new Amount(tx.amount).toString(),\n            type: tx.type || 0,\n            status: Transaction.Status.Pending,\n        }, tx as CompleteTxBody);\n    }\n\n    /**\n     * Obtain an address from a connected Ledger harware wallet\n     * @param derivationPath BIP39 derivation path, e.g. m/44'/441'/0'/0/1\n     */\n    async getAddressFromLedger(derivationPath: string): Promise<string> {\n        if (!this.wallet.ledger) throw new Error('call wallet.connectLedger before requesting address');\n        const address = await this.wallet.ledger.getWalletAddress(derivationPath);\n        return `${address}`;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f7315095cb56903763903807fc644888ff884c40","contentHash":"cd33fc1a4393d3271d7cd2d3748fc0627759663c2c599b0a270a6b434999db87"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/account.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/account.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":39}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":33}},"4":{"start":{"line":12,"column":24},"end":{"line":12,"column":328}},"5":{"start":{"line":12,"column":99},"end":{"line":12,"column":154}},"6":{"start":{"line":12,"column":133},"end":{"line":12,"column":151}},"7":{"start":{"line":12,"column":164},"end":{"line":12,"column":326}},"8":{"start":{"line":12,"column":198},"end":{"line":12,"column":323}},"9":{"start":{"line":12,"column":329},"end":{"line":12,"column":349}},"10":{"start":{"line":14,"column":54},"end":{"line":14,"column":73}},"11":{"start":{"line":14,"column":75},"end":{"line":14,"column":326}},"12":{"start":{"line":14,"column":125},"end":{"line":14,"column":161}},"13":{"start":{"line":14,"column":163},"end":{"line":14,"column":292}},"14":{"start":{"line":14,"column":183},"end":{"line":14,"column":292}},"15":{"start":{"line":14,"column":225},"end":{"line":14,"column":288}},"16":{"start":{"line":14,"column":293},"end":{"line":14,"column":324}},"17":{"start":{"line":14,"column":327},"end":{"line":14,"column":339}},"18":{"start":{"line":16,"column":33},"end":{"line":16,"column":517}},"19":{"start":{"line":16,"column":46},"end":{"line":16,"column":47}},"20":{"start":{"line":16,"column":91},"end":{"line":16,"column":131}},"21":{"start":{"line":16,"column":133},"end":{"line":16,"column":515}},"22":{"start":{"line":16,"column":146},"end":{"line":16,"column":247}},"23":{"start":{"line":16,"column":201},"end":{"line":16,"column":243}},"24":{"start":{"line":16,"column":255},"end":{"line":16,"column":515}},"25":{"start":{"line":16,"column":295},"end":{"line":16,"column":369}},"26":{"start":{"line":16,"column":379},"end":{"line":16,"column":513}},"27":{"start":{"line":16,"column":428},"end":{"line":16,"column":509}},"28":{"start":{"line":16,"column":518},"end":{"line":16,"column":532}},"29":{"start":{"line":18,"column":44},"end":{"line":18,"column":195}},"30":{"start":{"line":18,"column":62},"end":{"line":18,"column":166}},"31":{"start":{"line":18,"column":176},"end":{"line":18,"column":193}},"32":{"start":{"line":18,"column":196},"end":{"line":18,"column":207}},"33":{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},"34":{"start":{"line":20,"column":92},"end":{"line":20,"column":149}},"35":{"start":{"line":22,"column":44},"end":{"line":22,"column":315}},"36":{"start":{"line":22,"column":57},"end":{"line":22,"column":58}},"37":{"start":{"line":22,"column":102},"end":{"line":22,"column":110}},"38":{"start":{"line":22,"column":112},"end":{"line":22,"column":167}},"39":{"start":{"line":22,"column":168},"end":{"line":22,"column":199}},"40":{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},"41":{"start":{"line":22,"column":227},"end":{"line":22,"column":254}},"42":{"start":{"line":22,"column":255},"end":{"line":22,"column":313}},"43":{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},"44":{"start":{"line":24,"column":78},"end":{"line":24,"column":131}},"45":{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},"46":{"start":{"line":24,"column":149},"end":{"line":24,"column":193}},"47":{"start":{"line":24,"column":194},"end":{"line":24,"column":213}},"48":{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},"49":{"start":{"line":26,"column":124},"end":{"line":26,"column":136}},"50":{"start":{"line":26,"column":139},"end":{"line":26,"column":175}},"51":{"start":{"line":28,"column":40},"end":{"line":28,"column":151}},"52":{"start":{"line":28,"column":63},"end":{"line":28,"column":149}},"53":{"start":{"line":28,"column":152},"end":{"line":28,"column":164}},"54":{"start":{"line":30,"column":30},"end":{"line":30,"column":176}},"55":{"start":{"line":30,"column":126},"end":{"line":30,"column":173}},"56":{"start":{"line":30,"column":177},"end":{"line":30,"column":203}},"57":{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},"58":{"start":{"line":32,"column":106},"end":{"line":32,"column":180}},"59":{"start":{"line":32,"column":183},"end":{"line":32,"column":328}},"60":{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},"61":{"start":{"line":32,"column":345},"end":{"line":32,"column":383}},"62":{"start":{"line":34,"column":33},"end":{"line":34,"column":138}},"63":{"start":{"line":34,"column":109},"end":{"line":34,"column":125}},"64":{"start":{"line":34,"column":126},"end":{"line":34,"column":135}},"65":{"start":{"line":34,"column":139},"end":{"line":34,"column":168}},"66":{"start":{"line":38,"column":0},"end":{"line":89,"column":17}},"67":{"start":{"line":39,"column":2},"end":{"line":39,"column":30}},"68":{"start":{"line":42,"column":4},"end":{"line":42,"column":35}},"69":{"start":{"line":44,"column":4},"end":{"line":44,"column":93}},"70":{"start":{"line":47,"column":2},"end":{"line":86,"column":6}},"71":{"start":{"line":50,"column":6},"end":{"line":50,"column":51}},"72":{"start":{"line":55,"column":6},"end":{"line":55,"column":29}},"73":{"start":{"line":60,"column":6},"end":{"line":60,"column":57}},"74":{"start":{"line":65,"column":6},"end":{"line":65,"column":34}},"75":{"start":{"line":70,"column":6},"end":{"line":84,"column":20}},"76":{"start":{"line":88,"column":2},"end":{"line":88,"column":17}},"77":{"start":{"line":91,"column":0},"end":{"line":91,"column":26}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":16}},"loc":{"start":{"line":12,"column":22},"end":{"line":12,"column":351}},"line":12},"1":{"name":"_typeof","decl":{"start":{"line":12,"column":118},"end":{"line":12,"column":125}},"loc":{"start":{"line":12,"column":131},"end":{"line":12,"column":153}},"line":12},"2":{"name":"_typeof","decl":{"start":{"line":12,"column":183},"end":{"line":12,"column":190}},"loc":{"start":{"line":12,"column":196},"end":{"line":12,"column":325}},"line":12},"3":{"name":"ownKeys","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":41},"end":{"line":14,"column":341}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":14,"column":208},"end":{"line":14,"column":209}},"loc":{"start":{"line":14,"column":223},"end":{"line":14,"column":290}},"line":14},"5":{"name":"_objectSpread","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":22}},"loc":{"start":{"line":16,"column":31},"end":{"line":16,"column":534}},"line":16},"6":{"name":"(anonymous_6)","decl":{"start":{"line":16,"column":184},"end":{"line":16,"column":185}},"loc":{"start":{"line":16,"column":199},"end":{"line":16,"column":245}},"line":16},"7":{"name":"(anonymous_7)","decl":{"start":{"line":16,"column":411},"end":{"line":16,"column":412}},"loc":{"start":{"line":16,"column":426},"end":{"line":16,"column":511}},"line":16},"8":{"name":"_defineProperty","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":24}},"loc":{"start":{"line":18,"column":42},"end":{"line":18,"column":209}},"line":18},"9":{"name":"_classCallCheck","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":24}},"loc":{"start":{"line":20,"column":48},"end":{"line":20,"column":153}},"line":20},"10":{"name":"_defineProperties","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":317}},"line":22},"11":{"name":"_createClass","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":21}},"loc":{"start":{"line":24,"column":60},"end":{"line":24,"column":215}},"line":24},"12":{"name":"_possibleConstructorReturn","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":35}},"loc":{"start":{"line":26,"column":48},"end":{"line":26,"column":177}},"line":26},"13":{"name":"_assertThisInitialized","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":31}},"loc":{"start":{"line":28,"column":38},"end":{"line":28,"column":166}},"line":28},"14":{"name":"_getPrototypeOf","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":205}},"line":30},"15":{"name":"_getPrototypeOf","decl":{"start":{"line":30,"column":105},"end":{"line":30,"column":120}},"loc":{"start":{"line":30,"column":124},"end":{"line":30,"column":175}},"line":30},"16":{"name":"_inherits","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":18}},"loc":{"start":{"line":32,"column":41},"end":{"line":32,"column":385}},"line":32},"17":{"name":"_setPrototypeOf","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":24}},"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":170}},"line":34},"18":{"name":"_setPrototypeOf","decl":{"start":{"line":34,"column":85},"end":{"line":34,"column":100}},"loc":{"start":{"line":34,"column":107},"end":{"line":34,"column":137}},"line":34},"19":{"name":"(anonymous_19)","decl":{"start":{"line":38,"column":0},"end":{"line":38,"column":1}},"loc":{"start":{"line":38,"column":19},"end":{"line":89,"column":1}},"line":38},"20":{"name":"Account","decl":{"start":{"line":41,"column":11},"end":{"line":41,"column":18}},"loc":{"start":{"line":41,"column":21},"end":{"line":45,"column":3}},"line":41},"21":{"name":"get","decl":{"start":{"line":49,"column":18},"end":{"line":49,"column":21}},"loc":{"start":{"line":49,"column":24},"end":{"line":51,"column":5}},"line":49},"22":{"name":"get","decl":{"start":{"line":54,"column":18},"end":{"line":54,"column":21}},"loc":{"start":{"line":54,"column":24},"end":{"line":56,"column":5}},"line":54},"23":{"name":"get","decl":{"start":{"line":59,"column":18},"end":{"line":59,"column":21}},"loc":{"start":{"line":59,"column":24},"end":{"line":61,"column":5}},"line":59},"24":{"name":"get","decl":{"start":{"line":64,"column":18},"end":{"line":64,"column":21}},"loc":{"start":{"line":64,"column":24},"end":{"line":66,"column":5}},"line":64},"25":{"name":"getDefaultData","decl":{"start":{"line":69,"column":20},"end":{"line":69,"column":34}},"loc":{"start":{"line":69,"column":46},"end":{"line":85,"column":5}},"line":69}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":24},"end":{"line":12,"column":328}},"type":"if","locations":[{"start":{"line":12,"column":24},"end":{"line":12,"column":328}},{"start":{"line":12,"column":24},"end":{"line":12,"column":328}}],"line":12},"1":{"loc":{"start":{"line":12,"column":28},"end":{"line":12,"column":95}},"type":"binary-expr","locations":[{"start":{"line":12,"column":28},"end":{"line":12,"column":56}},{"start":{"line":12,"column":60},"end":{"line":12,"column":95}}],"line":12},"2":{"loc":{"start":{"line":12,"column":205},"end":{"line":12,"column":322}},"type":"cond-expr","locations":[{"start":{"line":12,"column":301},"end":{"line":12,"column":309}},{"start":{"line":12,"column":312},"end":{"line":12,"column":322}}],"line":12},"3":{"loc":{"start":{"line":12,"column":205},"end":{"line":12,"column":298}},"type":"binary-expr","locations":[{"start":{"line":12,"column":205},"end":{"line":12,"column":208}},{"start":{"line":12,"column":212},"end":{"line":12,"column":240}},{"start":{"line":12,"column":244},"end":{"line":12,"column":270}},{"start":{"line":12,"column":274},"end":{"line":12,"column":298}}],"line":12},"4":{"loc":{"start":{"line":14,"column":75},"end":{"line":14,"column":326}},"type":"if","locations":[{"start":{"line":14,"column":75},"end":{"line":14,"column":326}},{"start":{"line":14,"column":75},"end":{"line":14,"column":326}}],"line":14},"5":{"loc":{"start":{"line":14,"column":163},"end":{"line":14,"column":292}},"type":"if","locations":[{"start":{"line":14,"column":163},"end":{"line":14,"column":292}},{"start":{"line":14,"column":163},"end":{"line":14,"column":292}}],"line":14},"6":{"loc":{"start":{"line":16,"column":91},"end":{"line":16,"column":131}},"type":"cond-expr","locations":[{"start":{"line":16,"column":114},"end":{"line":16,"column":126}},{"start":{"line":16,"column":129},"end":{"line":16,"column":131}}],"line":16},"7":{"loc":{"start":{"line":16,"column":133},"end":{"line":16,"column":515}},"type":"if","locations":[{"start":{"line":16,"column":133},"end":{"line":16,"column":515}},{"start":{"line":16,"column":133},"end":{"line":16,"column":515}}],"line":16},"8":{"loc":{"start":{"line":16,"column":255},"end":{"line":16,"column":515}},"type":"if","locations":[{"start":{"line":16,"column":255},"end":{"line":16,"column":515}},{"start":{"line":16,"column":255},"end":{"line":16,"column":515}}],"line":16},"9":{"loc":{"start":{"line":18,"column":44},"end":{"line":18,"column":195}},"type":"if","locations":[{"start":{"line":18,"column":44},"end":{"line":18,"column":195}},{"start":{"line":18,"column":44},"end":{"line":18,"column":195}}],"line":18},"10":{"loc":{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},"type":"if","locations":[{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},{"start":{"line":20,"column":50},"end":{"line":20,"column":151}}],"line":20},"11":{"loc":{"start":{"line":22,"column":136},"end":{"line":22,"column":166}},"type":"binary-expr","locations":[{"start":{"line":22,"column":136},"end":{"line":22,"column":157}},{"start":{"line":22,"column":161},"end":{"line":22,"column":166}}],"line":22},"12":{"loc":{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},"type":"if","locations":[{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},{"start":{"line":22,"column":200},"end":{"line":22,"column":254}}],"line":22},"13":{"loc":{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},"type":"if","locations":[{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},{"start":{"line":24,"column":62},"end":{"line":24,"column":131}}],"line":24},"14":{"loc":{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},"type":"if","locations":[{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},{"start":{"line":24,"column":132},"end":{"line":24,"column":193}}],"line":24},"15":{"loc":{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},"type":"if","locations":[{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},{"start":{"line":26,"column":50},"end":{"line":26,"column":138}}],"line":26},"16":{"loc":{"start":{"line":26,"column":54},"end":{"line":26,"column":120}},"type":"binary-expr","locations":[{"start":{"line":26,"column":54},"end":{"line":26,"column":58}},{"start":{"line":26,"column":63},"end":{"line":26,"column":89}},{"start":{"line":26,"column":93},"end":{"line":26,"column":119}}],"line":26},"17":{"loc":{"start":{"line":28,"column":40},"end":{"line":28,"column":151}},"type":"if","locations":[{"start":{"line":28,"column":40},"end":{"line":28,"column":151}},{"start":{"line":28,"column":40},"end":{"line":28,"column":151}}],"line":28},"18":{"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":175}},"type":"cond-expr","locations":[{"start":{"line":30,"column":72},"end":{"line":30,"column":93}},{"start":{"line":30,"column":96},"end":{"line":30,"column":175}}],"line":30},"19":{"loc":{"start":{"line":30,"column":133},"end":{"line":30,"column":172}},"type":"binary-expr","locations":[{"start":{"line":30,"column":133},"end":{"line":30,"column":144}},{"start":{"line":30,"column":148},"end":{"line":30,"column":172}}],"line":30},"20":{"loc":{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},"type":"if","locations":[{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},{"start":{"line":32,"column":43},"end":{"line":32,"column":182}}],"line":32},"21":{"loc":{"start":{"line":32,"column":47},"end":{"line":32,"column":102}},"type":"binary-expr","locations":[{"start":{"line":32,"column":47},"end":{"line":32,"column":79}},{"start":{"line":32,"column":83},"end":{"line":32,"column":102}}],"line":32},"22":{"loc":{"start":{"line":32,"column":218},"end":{"line":32,"column":252}},"type":"binary-expr","locations":[{"start":{"line":32,"column":218},"end":{"line":32,"column":228}},{"start":{"line":32,"column":232},"end":{"line":32,"column":252}}],"line":32},"23":{"loc":{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},"type":"if","locations":[{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},{"start":{"line":32,"column":329},"end":{"line":32,"column":383}}],"line":32},"24":{"loc":{"start":{"line":34,"column":51},"end":{"line":34,"column":137}},"type":"binary-expr","locations":[{"start":{"line":34,"column":51},"end":{"line":34,"column":72}},{"start":{"line":34,"column":76},"end":{"line":34,"column":137}}],"line":34},"25":{"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":33}},"type":"binary-expr","locations":[{"start":{"line":65,"column":13},"end":{"line":65,"column":27}},{"start":{"line":65,"column":31},"end":{"line":65,"column":33}}],"line":65}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":8,"11":8,"12":8,"13":8,"14":8,"15":0,"16":8,"17":8,"18":8,"19":8,"20":8,"21":8,"22":8,"23":10,"24":0,"25":0,"26":0,"27":0,"28":8,"29":10,"30":10,"31":0,"32":10,"33":9,"34":0,"35":2,"36":2,"37":5,"38":5,"39":5,"40":5,"41":1,"42":5,"43":1,"44":1,"45":1,"46":1,"47":1,"48":9,"49":0,"50":9,"51":9,"52":0,"53":9,"54":1,"55":0,"56":1,"57":1,"58":0,"59":1,"60":1,"61":1,"62":1,"63":0,"64":0,"65":1,"66":1,"67":1,"68":9,"69":9,"70":1,"71":1,"72":0,"73":8,"74":6,"75":8,"76":1,"77":1},"f":{"0":0,"1":0,"2":0,"3":8,"4":0,"5":8,"6":10,"7":0,"8":10,"9":9,"10":2,"11":1,"12":9,"13":9,"14":1,"15":0,"16":1,"17":1,"18":0,"19":1,"20":9,"21":1,"22":0,"23":8,"24":6,"25":8},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[8,0],"5":[8,0],"6":[8,0],"7":[8,0],"8":[0,0],"9":[10,0],"10":[0,9],"11":[5,5],"12":[1,4],"13":[1,0],"14":[1,0],"15":[0,9],"16":[9,0,0],"17":[0,9],"18":[1,0],"19":[0,0],"20":[0,1],"21":[1,0],"22":[1,1],"23":[1,0],"24":[1,0],"25":[6,4]},"inputSourceMap":{"version":3,"sources":["account.ts"],"names":["Account","Amount","data","balance","nonce","Address","spec","address","type","extraData","chainId","privateKey","publicKey","name","lastSync","derivationPath","added","Date","toISOString","Record"],"mappings":";;;;;;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;IAqCaA,O;;;;;;;;;;;;;wBACa;AAClB,aAAO,IAAIC,cAAJ,CAAW,KAAKC,IAAL,CAAUC,OAArB,CAAP;AACH;;;wBACmB;AAChB,aAAO,KAAKD,IAAL,CAAUE,KAAjB;AACH;;;wBACsB;AACnB,aAAO,IAAIC,eAAJ,CAAY,KAAKH,IAAL,CAAUI,IAAV,CAAeC,OAA3B,CAAP;AACH;;;wBACuB;AACpB,aAAO,KAAKL,IAAL,CAAUM,IAAV,IAAkB,EAAzB;AACH;;;mCAEqBC,S,EAA+C;AACjE;AACIH,QAAAA,IAAI,EAAE;AACFI,UAAAA,OAAO,EAAE,EADP;AAEFH,UAAAA,OAAO,EAAE;AAFP,SADV;AAKII,QAAAA,UAAU,EAAE,EALhB;AAMIC,QAAAA,SAAS,EAAE,EANf;AAOIT,QAAAA,OAAO,EAAE,EAPb;AAQIC,QAAAA,KAAK,EAAE,CARX;AASIS,QAAAA,IAAI,EAAE,EATV;AAUIC,QAAAA,QAAQ,EAAE,IAVd;AAWIC,QAAAA,cAAc,EAAE,EAXpB;AAYIP,QAAAA,IAAI,EAAE,EAZV;AAaIQ,QAAAA,KAAK,EAAE,IAAIC,IAAJ,GAAWC,WAAX;AAbX,SAcOT,SAdP;AAgBH;;;;EA/BwBU,c","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models","sourcesContent":["\nimport { Address, Amount } from '@herajs/common';\nimport { Record, Data } from './record';\n\n/**\n * Unique identifier of an account.\n * ChainId is optional. Managers use default chainId if undefined.\n */\nexport interface AccountSpec {\n    address: string | Address;\n    chainId?: string;\n}\n\nexport interface CompleteAccountSpec {\n    address: string | Address;\n    chainId: string;\n}\n\nexport type AccountType = '' | 'ledger';\n\nexport interface AccountData extends Data {\n    spec: {\n        address: string;\n        chainId: string;\n    };\n    type: AccountType;\n    derivationPath: string;\n    privateKey: number[];\n    publicKey: number[];\n    balance: string;\n    nonce: number;\n    name: string;\n    added: string | null;\n    lastSync: {\n        blockno: number;\n        timestamp: number;\n    } | null;\n}\n\nexport class Account extends Record<AccountData> {\n    get balance(): Amount {\n        return new Amount(this.data.balance);\n    }\n    get nonce(): number {\n        return this.data.nonce;\n    }\n    get address(): Address {\n        return new Address(this.data.spec.address);\n    }\n    get type(): AccountType {\n        return this.data.type || '';\n    }\n\n    static getDefaultData(extraData?: Partial<AccountData>): AccountData {\n        return {\n            spec: {\n                chainId: '',\n                address: '',\n            },\n            privateKey: [],\n            publicKey: [],\n            balance: '',\n            nonce: 0,\n            name: '',\n            lastSync: null,\n            derivationPath: '',\n            type: '',\n            added: new Date().toISOString(),\n            ...extraData,\n        };\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2a88f794728308def6193b014cfbef343b457fd6","contentHash":"ee03eb3dc6a8b8690f63d274b3073333f3d398a76107eba25b0c4bb5d4976b6a"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/defaults.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/defaults.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":65}},"2":{"start":{"line":7,"column":20},"end":{"line":7,"column":38}},"3":{"start":{"line":8,"column":0},"end":{"line":8,"column":38}},"4":{"start":{"line":9,"column":30},"end":{"line":9,"column":35}},"5":{"start":{"line":10,"column":0},"end":{"line":10,"column":58}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"sources":["defaults.ts"],"names":["DEFAULT_CHAIN","ACCOUNT_UPDATE_INTERVAL"],"mappings":";;;;;;AAAO,IAAMA,aAAa,GAAG,kBAAtB;;AACA,IAAMC,uBAAuB,GAAG,KAAhC","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src","sourcesContent":["export const DEFAULT_CHAIN = 'testnet.aergo.io';\nexport const ACCOUNT_UPDATE_INTERVAL = 10000;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ad508057f15e014df54ad32af2f4a96b9c3600f7","contentHash":"8aab4f59d3476dfd0a6141487b0c333f4806c403626035a5073b9099c8fb2ac2"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/transaction-manager.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/transaction-manager.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":65}},"2":{"start":{"line":8,"column":19},"end":{"line":8,"column":51}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":32}},"4":{"start":{"line":12,"column":16},"end":{"line":12,"column":38}},"5":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"6":{"start":{"line":14,"column":99},"end":{"line":14,"column":154}},"7":{"start":{"line":14,"column":133},"end":{"line":14,"column":151}},"8":{"start":{"line":14,"column":164},"end":{"line":14,"column":326}},"9":{"start":{"line":14,"column":198},"end":{"line":14,"column":323}},"10":{"start":{"line":14,"column":329},"end":{"line":14,"column":349}},"11":{"start":{"line":16,"column":77},"end":{"line":16,"column":175}},"12":{"start":{"line":16,"column":94},"end":{"line":16,"column":107}},"13":{"start":{"line":16,"column":121},"end":{"line":16,"column":131}},"14":{"start":{"line":16,"column":151},"end":{"line":16,"column":165}},"15":{"start":{"line":16,"column":166},"end":{"line":16,"column":173}},"16":{"start":{"line":16,"column":176},"end":{"line":16,"column":263}},"17":{"start":{"line":16,"column":193},"end":{"line":16,"column":208}},"18":{"start":{"line":16,"column":218},"end":{"line":16,"column":261}},"19":{"start":{"line":18,"column":33},"end":{"line":18,"column":387}},"20":{"start":{"line":18,"column":65},"end":{"line":18,"column":69}},"21":{"start":{"line":18,"column":78},"end":{"line":18,"column":87}},"22":{"start":{"line":18,"column":89},"end":{"line":18,"column":384}},"23":{"start":{"line":18,"column":147},"end":{"line":18,"column":167}},"24":{"start":{"line":18,"column":193},"end":{"line":18,"column":264}},"25":{"start":{"line":18,"column":290},"end":{"line":18,"column":360}},"26":{"start":{"line":18,"column":363},"end":{"line":18,"column":380}},"27":{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},"28":{"start":{"line":20,"column":92},"end":{"line":20,"column":149}},"29":{"start":{"line":22,"column":44},"end":{"line":22,"column":315}},"30":{"start":{"line":22,"column":57},"end":{"line":22,"column":58}},"31":{"start":{"line":22,"column":102},"end":{"line":22,"column":110}},"32":{"start":{"line":22,"column":112},"end":{"line":22,"column":167}},"33":{"start":{"line":22,"column":168},"end":{"line":22,"column":199}},"34":{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},"35":{"start":{"line":22,"column":227},"end":{"line":22,"column":254}},"36":{"start":{"line":22,"column":255},"end":{"line":22,"column":313}},"37":{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},"38":{"start":{"line":24,"column":78},"end":{"line":24,"column":131}},"39":{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},"40":{"start":{"line":24,"column":149},"end":{"line":24,"column":193}},"41":{"start":{"line":24,"column":194},"end":{"line":24,"column":213}},"42":{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},"43":{"start":{"line":26,"column":124},"end":{"line":26,"column":136}},"44":{"start":{"line":26,"column":139},"end":{"line":26,"column":175}},"45":{"start":{"line":28,"column":30},"end":{"line":28,"column":176}},"46":{"start":{"line":28,"column":126},"end":{"line":28,"column":173}},"47":{"start":{"line":28,"column":177},"end":{"line":28,"column":203}},"48":{"start":{"line":30,"column":40},"end":{"line":30,"column":151}},"49":{"start":{"line":30,"column":63},"end":{"line":30,"column":149}},"50":{"start":{"line":30,"column":152},"end":{"line":30,"column":164}},"51":{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},"52":{"start":{"line":32,"column":106},"end":{"line":32,"column":180}},"53":{"start":{"line":32,"column":183},"end":{"line":32,"column":328}},"54":{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},"55":{"start":{"line":32,"column":345},"end":{"line":32,"column":383}},"56":{"start":{"line":34,"column":33},"end":{"line":34,"column":138}},"57":{"start":{"line":34,"column":109},"end":{"line":34,"column":125}},"58":{"start":{"line":34,"column":126},"end":{"line":34,"column":135}},"59":{"start":{"line":34,"column":139},"end":{"line":34,"column":168}},"60":{"start":{"line":36,"column":44},"end":{"line":36,"column":195}},"61":{"start":{"line":36,"column":62},"end":{"line":36,"column":166}},"62":{"start":{"line":36,"column":176},"end":{"line":36,"column":193}},"63":{"start":{"line":36,"column":196},"end":{"line":36,"column":207}},"64":{"start":{"line":40,"column":0},"end":{"line":185,"column":35}},"65":{"start":{"line":41,"column":2},"end":{"line":41,"column":55}},"66":{"start":{"line":46,"column":4},"end":{"line":46,"column":46}},"67":{"start":{"line":48,"column":4},"end":{"line":48,"column":93}},"68":{"start":{"line":50,"column":4},"end":{"line":50,"column":74}},"69":{"start":{"line":52,"column":4},"end":{"line":52,"column":70}},"70":{"start":{"line":54,"column":4},"end":{"line":54,"column":72}},"71":{"start":{"line":56,"column":4},"end":{"line":56,"column":68}},"72":{"start":{"line":58,"column":4},"end":{"line":58,"column":72}},"73":{"start":{"line":60,"column":4},"end":{"line":60,"column":70}},"74":{"start":{"line":62,"column":4},"end":{"line":62,"column":28}},"75":{"start":{"line":63,"column":4},"end":{"line":63,"column":36}},"76":{"start":{"line":64,"column":4},"end":{"line":64,"column":31}},"77":{"start":{"line":66,"column":4},"end":{"line":66,"column":22}},"78":{"start":{"line":68,"column":4},"end":{"line":68,"column":17}},"79":{"start":{"line":76,"column":2},"end":{"line":182,"column":6}},"80":{"start":{"line":79,"column":19},"end":{"line":79,"column":23}},"81":{"start":{"line":81,"column":6},"end":{"line":86,"column":7}},"82":{"start":{"line":82,"column":8},"end":{"line":82,"column":79}},"83":{"start":{"line":83,"column":22},"end":{"line":83,"column":70}},"84":{"start":{"line":84,"column":8},"end":{"line":84,"column":79}},"85":{"start":{"line":85,"column":8},"end":{"line":85,"column":15}},"86":{"start":{"line":88,"column":21},"end":{"line":88,"column":71}},"87":{"start":{"line":89,"column":6},"end":{"line":91,"column":19}},"88":{"start":{"line":90,"column":8},"end":{"line":90,"column":22}},"89":{"start":{"line":101,"column":18},"end":{"line":132,"column":8}},"90":{"start":{"line":102,"column":21},"end":{"line":102,"column":25}},"91":{"start":{"line":105,"column":21},"end":{"line":105,"column":81}},"92":{"start":{"line":107,"column":8},"end":{"line":129,"column":9}},"93":{"start":{"line":108,"column":23},"end":{"line":108,"column":78}},"94":{"start":{"line":110,"column":10},"end":{"line":124,"column":11}},"95":{"start":{"line":111,"column":12},"end":{"line":111,"column":85}},"96":{"start":{"line":112,"column":12},"end":{"line":112,"column":64}},"97":{"start":{"line":113,"column":12},"end":{"line":113,"column":58}},"98":{"start":{"line":114,"column":12},"end":{"line":114,"column":49}},"99":{"start":{"line":116,"column":12},"end":{"line":120,"column":13}},"100":{"start":{"line":117,"column":14},"end":{"line":119,"column":17}},"101":{"start":{"line":118,"column":16},"end":{"line":118,"column":48}},"102":{"start":{"line":122,"column":12},"end":{"line":122,"column":26}},"103":{"start":{"line":123,"column":12},"end":{"line":123,"column":19}},"104":{"start":{"line":126,"column":10},"end":{"line":126,"column":32}},"105":{"start":{"line":127,"column":10},"end":{"line":127,"column":24}},"106":{"start":{"line":128,"column":10},"end":{"line":128,"column":17}},"107":{"start":{"line":131,"column":8},"end":{"line":131,"column":25}},"108":{"start":{"line":135,"column":8},"end":{"line":135,"column":44}},"109":{"start":{"line":138,"column":6},"end":{"line":138,"column":18}},"110":{"start":{"line":148,"column":24},"end":{"line":158,"column":8}},"111":{"start":{"line":149,"column":21},"end":{"line":149,"column":25}},"112":{"start":{"line":151,"column":8},"end":{"line":157,"column":11}},"113":{"start":{"line":152,"column":10},"end":{"line":152,"column":42}},"114":{"start":{"line":154,"column":10},"end":{"line":154,"column":39}},"115":{"start":{"line":156,"column":10},"end":{"line":156,"column":41}},"116":{"start":{"line":161,"column":8},"end":{"line":161,"column":50}},"117":{"start":{"line":164,"column":6},"end":{"line":164,"column":24}},"118":{"start":{"line":173,"column":6},"end":{"line":173,"column":56}},"119":{"start":{"line":173,"column":49},"end":{"line":173,"column":56}},"120":{"start":{"line":174,"column":6},"end":{"line":174,"column":35}},"121":{"start":{"line":175,"column":6},"end":{"line":175,"column":33}},"122":{"start":{"line":180,"column":6},"end":{"line":180,"column":35}},"123":{"start":{"line":184,"column":2},"end":{"line":184,"column":28}},"124":{"start":{"line":187,"column":0},"end":{"line":187,"column":48}},"125":{"start":{"line":191,"column":0},"end":{"line":290,"column":35}},"126":{"start":{"line":192,"column":2},"end":{"line":192,"column":63}},"127":{"start":{"line":197,"column":4},"end":{"line":197,"column":53}},"128":{"start":{"line":199,"column":4},"end":{"line":199,"column":101}},"129":{"start":{"line":201,"column":4},"end":{"line":201,"column":71}},"130":{"start":{"line":203,"column":4},"end":{"line":203,"column":74}},"131":{"start":{"line":205,"column":4},"end":{"line":205,"column":71}},"132":{"start":{"line":207,"column":4},"end":{"line":207,"column":29}},"133":{"start":{"line":208,"column":4},"end":{"line":208,"column":29}},"134":{"start":{"line":209,"column":4},"end":{"line":209,"column":18}},"135":{"start":{"line":212,"column":2},"end":{"line":287,"column":6}},"136":{"start":{"line":215,"column":19},"end":{"line":259,"column":8}},"137":{"start":{"line":216,"column":21},"end":{"line":216,"column":82}},"138":{"start":{"line":217,"column":30},"end":{"line":217,"column":101}},"139":{"start":{"line":219,"column":19},"end":{"line":219,"column":44}},"140":{"start":{"line":220,"column":25},"end":{"line":220,"column":40}},"141":{"start":{"line":222,"column":8},"end":{"line":222,"column":63}},"142":{"start":{"line":222,"column":43},"end":{"line":222,"column":63}},"143":{"start":{"line":224,"column":27},"end":{"line":224,"column":118}},"144":{"start":{"line":225,"column":40},"end":{"line":225,"column":44}},"145":{"start":{"line":226,"column":32},"end":{"line":226,"column":37}},"146":{"start":{"line":227,"column":29},"end":{"line":227,"column":38}},"147":{"start":{"line":229,"column":8},"end":{"line":248,"column":9}},"148":{"start":{"line":230,"column":10},"end":{"line":234,"column":11}},"149":{"start":{"line":230,"column":31},"end":{"line":230,"column":62}},"150":{"start":{"line":231,"column":21},"end":{"line":231,"column":32}},"151":{"start":{"line":232,"column":12},"end":{"line":232,"column":41}},"152":{"start":{"line":233,"column":12},"end":{"line":233,"column":44}},"153":{"start":{"line":236,"column":10},"end":{"line":236,"column":35}},"154":{"start":{"line":237,"column":10},"end":{"line":237,"column":31}},"155":{"start":{"line":239,"column":10},"end":{"line":247,"column":11}},"156":{"start":{"line":240,"column":12},"end":{"line":242,"column":13}},"157":{"start":{"line":241,"column":14},"end":{"line":241,"column":36}},"158":{"start":{"line":244,"column":12},"end":{"line":246,"column":13}},"159":{"start":{"line":245,"column":14},"end":{"line":245,"column":35}},"160":{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},"161":{"start":{"line":251,"column":10},"end":{"line":251,"column":50}},"162":{"start":{"line":254,"column":8},"end":{"line":257,"column":10}},"163":{"start":{"line":258,"column":8},"end":{"line":258,"column":28}},"164":{"start":{"line":262,"column":8},"end":{"line":262,"column":45}},"165":{"start":{"line":265,"column":6},"end":{"line":265,"column":18}},"166":{"start":{"line":270,"column":19},"end":{"line":270,"column":23}},"167":{"start":{"line":272,"column":6},"end":{"line":275,"column":9}},"168":{"start":{"line":274,"column":8},"end":{"line":274,"column":23}},"169":{"start":{"line":276,"column":6},"end":{"line":278,"column":44}},"170":{"start":{"line":277,"column":8},"end":{"line":277,"column":22}},"171":{"start":{"line":283,"column":6},"end":{"line":285,"column":7}},"172":{"start":{"line":284,"column":8},"end":{"line":284,"column":39}},"173":{"start":{"line":289,"column":2},"end":{"line":289,"column":35}},"174":{"start":{"line":298,"column":0},"end":{"line":548,"column":35}},"175":{"start":{"line":299,"column":2},"end":{"line":299,"column":56}},"176":{"start":{"line":304,"column":4},"end":{"line":304,"column":46}},"177":{"start":{"line":306,"column":4},"end":{"line":306,"column":94}},"178":{"start":{"line":308,"column":4},"end":{"line":308,"column":70}},"179":{"start":{"line":310,"column":4},"end":{"line":310,"column":95}},"180":{"start":{"line":312,"column":4},"end":{"line":312,"column":27}},"181":{"start":{"line":313,"column":4},"end":{"line":313,"column":18}},"182":{"start":{"line":316,"column":2},"end":{"line":545,"column":6}},"183":{"start":{"line":319,"column":28},"end":{"line":323,"column":8}},"184":{"start":{"line":320,"column":8},"end":{"line":322,"column":9}},"185":{"start":{"line":321,"column":10},"end":{"line":321,"column":80}},"186":{"start":{"line":326,"column":8},"end":{"line":326,"column":54}},"187":{"start":{"line":329,"column":6},"end":{"line":329,"column":28}},"188":{"start":{"line":334,"column":30},"end":{"line":336,"column":8}},"189":{"start":{"line":335,"column":8},"end":{"line":335,"column":57}},"190":{"start":{"line":339,"column":8},"end":{"line":339,"column":56}},"191":{"start":{"line":342,"column":6},"end":{"line":342,"column":30}},"192":{"start":{"line":347,"column":6},"end":{"line":347,"column":31}},"193":{"start":{"line":347,"column":24},"end":{"line":347,"column":31}},"194":{"start":{"line":348,"column":6},"end":{"line":348,"column":26}},"195":{"start":{"line":349,"column":39},"end":{"line":349,"column":43}},"196":{"start":{"line":350,"column":31},"end":{"line":350,"column":36}},"197":{"start":{"line":351,"column":28},"end":{"line":351,"column":37}},"198":{"start":{"line":353,"column":6},"end":{"line":371,"column":7}},"199":{"start":{"line":354,"column":8},"end":{"line":357,"column":9}},"200":{"start":{"line":354,"column":30},"end":{"line":354,"column":80}},"201":{"start":{"line":355,"column":24},"end":{"line":355,"column":36}},"202":{"start":{"line":356,"column":10},"end":{"line":356,"column":27}},"203":{"start":{"line":359,"column":8},"end":{"line":359,"column":34}},"204":{"start":{"line":360,"column":8},"end":{"line":360,"column":30}},"205":{"start":{"line":362,"column":8},"end":{"line":370,"column":9}},"206":{"start":{"line":363,"column":10},"end":{"line":365,"column":11}},"207":{"start":{"line":364,"column":12},"end":{"line":364,"column":35}},"208":{"start":{"line":367,"column":10},"end":{"line":369,"column":11}},"209":{"start":{"line":368,"column":12},"end":{"line":368,"column":34}},"210":{"start":{"line":376,"column":6},"end":{"line":376,"column":30}},"211":{"start":{"line":376,"column":23},"end":{"line":376,"column":30}},"212":{"start":{"line":377,"column":6},"end":{"line":377,"column":25}},"213":{"start":{"line":378,"column":39},"end":{"line":378,"column":43}},"214":{"start":{"line":379,"column":31},"end":{"line":379,"column":36}},"215":{"start":{"line":380,"column":28},"end":{"line":380,"column":37}},"216":{"start":{"line":382,"column":6},"end":{"line":400,"column":7}},"217":{"start":{"line":383,"column":8},"end":{"line":386,"column":9}},"218":{"start":{"line":383,"column":30},"end":{"line":383,"column":80}},"219":{"start":{"line":384,"column":24},"end":{"line":384,"column":36}},"220":{"start":{"line":385,"column":10},"end":{"line":385,"column":26}},"221":{"start":{"line":388,"column":8},"end":{"line":388,"column":34}},"222":{"start":{"line":389,"column":8},"end":{"line":389,"column":30}},"223":{"start":{"line":391,"column":8},"end":{"line":399,"column":9}},"224":{"start":{"line":392,"column":10},"end":{"line":394,"column":11}},"225":{"start":{"line":393,"column":12},"end":{"line":393,"column":35}},"226":{"start":{"line":396,"column":10},"end":{"line":398,"column":11}},"227":{"start":{"line":397,"column":12},"end":{"line":397,"column":34}},"228":{"start":{"line":414,"column":6},"end":{"line":414,"column":20}},"229":{"start":{"line":416,"column":6},"end":{"line":418,"column":7}},"230":{"start":{"line":417,"column":8},"end":{"line":417,"column":61}},"231":{"start":{"line":420,"column":20},"end":{"line":420,"column":64}},"232":{"start":{"line":421,"column":6},"end":{"line":421,"column":23}},"233":{"start":{"line":422,"column":6},"end":{"line":422,"column":61}},"234":{"start":{"line":423,"column":6},"end":{"line":423,"column":21}},"235":{"start":{"line":428,"column":38},"end":{"line":432,"column":8}},"236":{"start":{"line":429,"column":8},"end":{"line":431,"column":20}},"237":{"start":{"line":430,"column":10},"end":{"line":430,"column":133}},"238":{"start":{"line":435,"column":8},"end":{"line":435,"column":64}},"239":{"start":{"line":438,"column":6},"end":{"line":438,"column":38}},"240":{"start":{"line":443,"column":43},"end":{"line":451,"column":8}},"241":{"start":{"line":444,"column":8},"end":{"line":450,"column":11}},"242":{"start":{"line":445,"column":10},"end":{"line":445,"column":133}},"243":{"start":{"line":454,"column":8},"end":{"line":454,"column":69}},"244":{"start":{"line":457,"column":6},"end":{"line":457,"column":43}},"245":{"start":{"line":462,"column":44},"end":{"line":470,"column":8}},"246":{"start":{"line":463,"column":8},"end":{"line":469,"column":11}},"247":{"start":{"line":464,"column":10},"end":{"line":464,"column":133}},"248":{"start":{"line":473,"column":8},"end":{"line":473,"column":70}},"249":{"start":{"line":476,"column":6},"end":{"line":476,"column":44}},"250":{"start":{"line":486,"column":36},"end":{"line":506,"column":8}},"251":{"start":{"line":487,"column":8},"end":{"line":487,"column":103}},"252":{"start":{"line":487,"column":36},"end":{"line":487,"column":103}},"253":{"start":{"line":490,"column":8},"end":{"line":494,"column":9}},"254":{"start":{"line":491,"column":10},"end":{"line":491,"column":84}},"255":{"start":{"line":493,"column":10},"end":{"line":493,"column":34}},"256":{"start":{"line":496,"column":20},"end":{"line":496,"column":66}},"257":{"start":{"line":497,"column":22},"end":{"line":497,"column":90}},"258":{"start":{"line":498,"column":20},"end":{"line":498,"column":86}},"259":{"start":{"line":500,"column":22},"end":{"line":500,"column":31}},"260":{"start":{"line":501,"column":21},"end":{"line":501,"column":42}},"261":{"start":{"line":502,"column":18},"end":{"line":504,"column":10}},"262":{"start":{"line":503,"column":10},"end":{"line":503,"column":79}},"263":{"start":{"line":505,"column":8},"end":{"line":505,"column":19}},"264":{"start":{"line":509,"column":8},"end":{"line":509,"column":62}},"265":{"start":{"line":512,"column":6},"end":{"line":512,"column":36}},"266":{"start":{"line":524,"column":29},"end":{"line":537,"column":8}},"267":{"start":{"line":525,"column":8},"end":{"line":527,"column":9}},"268":{"start":{"line":526,"column":10},"end":{"line":526,"column":149}},"269":{"start":{"line":529,"column":21},"end":{"line":529,"column":68}},"270":{"start":{"line":530,"column":21},"end":{"line":530,"column":75}},"271":{"start":{"line":532,"column":8},"end":{"line":532,"column":33}},"272":{"start":{"line":534,"column":8},"end":{"line":534,"column":39}},"273":{"start":{"line":535,"column":8},"end":{"line":535,"column":41}},"274":{"start":{"line":536,"column":8},"end":{"line":536,"column":50}},"275":{"start":{"line":540,"column":8},"end":{"line":540,"column":55}},"276":{"start":{"line":543,"column":6},"end":{"line":543,"column":29}},"277":{"start":{"line":547,"column":2},"end":{"line":547,"column":28}},"278":{"start":{"line":550,"column":0},"end":{"line":550,"column":48}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":351}},"line":14},"1":{"name":"_typeof","decl":{"start":{"line":14,"column":118},"end":{"line":14,"column":125}},"loc":{"start":{"line":14,"column":131},"end":{"line":14,"column":153}},"line":14},"2":{"name":"_typeof","decl":{"start":{"line":14,"column":183},"end":{"line":14,"column":190}},"loc":{"start":{"line":14,"column":196},"end":{"line":14,"column":325}},"line":14},"3":{"name":"asyncGeneratorStep","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":75},"end":{"line":16,"column":265}},"line":16},"4":{"name":"_asyncToGenerator","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":26}},"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":389}},"line":18},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":40},"end":{"line":18,"column":41}},"loc":{"start":{"line":18,"column":52},"end":{"line":18,"column":386}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":108},"end":{"line":18,"column":109}},"loc":{"start":{"line":18,"column":135},"end":{"line":18,"column":382}},"line":18},"7":{"name":"_next","decl":{"start":{"line":18,"column":178},"end":{"line":18,"column":183}},"loc":{"start":{"line":18,"column":191},"end":{"line":18,"column":266}},"line":18},"8":{"name":"_throw","decl":{"start":{"line":18,"column":276},"end":{"line":18,"column":282}},"loc":{"start":{"line":18,"column":288},"end":{"line":18,"column":362}},"line":18},"9":{"name":"_classCallCheck","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":24}},"loc":{"start":{"line":20,"column":48},"end":{"line":20,"column":153}},"line":20},"10":{"name":"_defineProperties","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":317}},"line":22},"11":{"name":"_createClass","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":21}},"loc":{"start":{"line":24,"column":60},"end":{"line":24,"column":215}},"line":24},"12":{"name":"_possibleConstructorReturn","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":35}},"loc":{"start":{"line":26,"column":48},"end":{"line":26,"column":177}},"line":26},"13":{"name":"_getPrototypeOf","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":24}},"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":205}},"line":28},"14":{"name":"_getPrototypeOf","decl":{"start":{"line":28,"column":105},"end":{"line":28,"column":120}},"loc":{"start":{"line":28,"column":124},"end":{"line":28,"column":175}},"line":28},"15":{"name":"_assertThisInitialized","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":31}},"loc":{"start":{"line":30,"column":38},"end":{"line":30,"column":166}},"line":30},"16":{"name":"_inherits","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":18}},"loc":{"start":{"line":32,"column":41},"end":{"line":32,"column":385}},"line":32},"17":{"name":"_setPrototypeOf","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":24}},"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":170}},"line":34},"18":{"name":"_setPrototypeOf","decl":{"start":{"line":34,"column":85},"end":{"line":34,"column":100}},"loc":{"start":{"line":34,"column":107},"end":{"line":34,"column":137}},"line":34},"19":{"name":"_defineProperty","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":24}},"loc":{"start":{"line":36,"column":42},"end":{"line":36,"column":209}},"line":36},"20":{"name":"(anonymous_20)","decl":{"start":{"line":40,"column":0},"end":{"line":40,"column":1}},"loc":{"start":{"line":40,"column":33},"end":{"line":185,"column":1}},"line":40},"21":{"name":"TransactionTracker","decl":{"start":{"line":43,"column":11},"end":{"line":43,"column":29}},"loc":{"start":{"line":43,"column":52},"end":{"line":69,"column":3}},"line":43},"22":{"name":"retryLoad","decl":{"start":{"line":78,"column":20},"end":{"line":78,"column":29}},"loc":{"start":{"line":78,"column":32},"end":{"line":92,"column":5}},"line":78},"23":{"name":"(anonymous_23)","decl":{"start":{"line":89,"column":34},"end":{"line":89,"column":35}},"loc":{"start":{"line":89,"column":46},"end":{"line":91,"column":7}},"line":89},"24":{"name":"(anonymous_24)","decl":{"start":{"line":100,"column":11},"end":{"line":100,"column":12}},"loc":{"start":{"line":100,"column":23},"end":{"line":139,"column":5}},"line":100},"25":{"name":"(anonymous_25)","decl":{"start":{"line":101,"column":36},"end":{"line":101,"column":37}},"loc":{"start":{"line":101,"column":49},"end":{"line":132,"column":7}},"line":101},"26":{"name":"(anonymous_26)","decl":{"start":{"line":117,"column":76},"end":{"line":117,"column":77}},"loc":{"start":{"line":117,"column":95},"end":{"line":119,"column":15}},"line":117},"27":{"name":"load","decl":{"start":{"line":134,"column":15},"end":{"line":134,"column":19}},"loc":{"start":{"line":134,"column":22},"end":{"line":136,"column":7}},"line":134},"28":{"name":"(anonymous_28)","decl":{"start":{"line":147,"column":11},"end":{"line":147,"column":12}},"loc":{"start":{"line":147,"column":23},"end":{"line":165,"column":5}},"line":147},"29":{"name":"(anonymous_29)","decl":{"start":{"line":148,"column":42},"end":{"line":148,"column":43}},"loc":{"start":{"line":148,"column":55},"end":{"line":158,"column":7}},"line":148},"30":{"name":"(anonymous_30)","decl":{"start":{"line":151,"column":27},"end":{"line":151,"column":28}},"loc":{"start":{"line":151,"column":54},"end":{"line":157,"column":9}},"line":151},"31":{"name":"getReceipt","decl":{"start":{"line":160,"column":15},"end":{"line":160,"column":25}},"loc":{"start":{"line":160,"column":28},"end":{"line":162,"column":7}},"line":160},"32":{"name":"cancel","decl":{"start":{"line":172,"column":20},"end":{"line":172,"column":26}},"loc":{"start":{"line":172,"column":29},"end":{"line":176,"column":5}},"line":172},"33":{"name":"get","decl":{"start":{"line":179,"column":18},"end":{"line":179,"column":21}},"loc":{"start":{"line":179,"column":24},"end":{"line":181,"column":5}},"line":179},"34":{"name":"(anonymous_34)","decl":{"start":{"line":191,"column":0},"end":{"line":191,"column":1}},"loc":{"start":{"line":191,"column":34},"end":{"line":290,"column":1}},"line":191},"35":{"name":"AccountTransactionTracker","decl":{"start":{"line":194,"column":11},"end":{"line":194,"column":36}},"loc":{"start":{"line":194,"column":55},"end":{"line":210,"column":3}},"line":194},"36":{"name":"(anonymous_36)","decl":{"start":{"line":214,"column":11},"end":{"line":214,"column":12}},"loc":{"start":{"line":214,"column":23},"end":{"line":266,"column":5}},"line":214},"37":{"name":"(anonymous_37)","decl":{"start":{"line":215,"column":37},"end":{"line":215,"column":38}},"loc":{"start":{"line":215,"column":50},"end":{"line":259,"column":7}},"line":215},"38":{"name":"load","decl":{"start":{"line":261,"column":15},"end":{"line":261,"column":19}},"loc":{"start":{"line":261,"column":22},"end":{"line":263,"column":7}},"line":261},"39":{"name":"resume","decl":{"start":{"line":269,"column":20},"end":{"line":269,"column":26}},"loc":{"start":{"line":269,"column":29},"end":{"line":279,"column":5}},"line":269},"40":{"name":"(anonymous_40)","decl":{"start":{"line":272,"column":27},"end":{"line":272,"column":28}},"loc":{"start":{"line":272,"column":39},"end":{"line":275,"column":7}},"line":272},"41":{"name":"(anonymous_41)","decl":{"start":{"line":276,"column":36},"end":{"line":276,"column":37}},"loc":{"start":{"line":276,"column":48},"end":{"line":278,"column":7}},"line":276},"42":{"name":"pause","decl":{"start":{"line":282,"column":20},"end":{"line":282,"column":25}},"loc":{"start":{"line":282,"column":28},"end":{"line":286,"column":5}},"line":282},"43":{"name":"(anonymous_43)","decl":{"start":{"line":298,"column":0},"end":{"line":298,"column":1}},"loc":{"start":{"line":298,"column":34},"end":{"line":548,"column":1}},"line":298},"44":{"name":"TransactionManager","decl":{"start":{"line":301,"column":11},"end":{"line":301,"column":29}},"loc":{"start":{"line":301,"column":38},"end":{"line":314,"column":3}},"line":301},"45":{"name":"(anonymous_45)","decl":{"start":{"line":318,"column":11},"end":{"line":318,"column":12}},"loc":{"start":{"line":318,"column":23},"end":{"line":330,"column":5}},"line":318},"46":{"name":"(anonymous_46)","decl":{"start":{"line":319,"column":46},"end":{"line":319,"column":47}},"loc":{"start":{"line":319,"column":70},"end":{"line":323,"column":7}},"line":319},"47":{"name":"addTransaction","decl":{"start":{"line":325,"column":15},"end":{"line":325,"column":29}},"loc":{"start":{"line":325,"column":34},"end":{"line":327,"column":7}},"line":325},"48":{"name":"(anonymous_48)","decl":{"start":{"line":333,"column":11},"end":{"line":333,"column":12}},"loc":{"start":{"line":333,"column":23},"end":{"line":343,"column":5}},"line":333},"49":{"name":"(anonymous_49)","decl":{"start":{"line":334,"column":48},"end":{"line":334,"column":49}},"loc":{"start":{"line":334,"column":72},"end":{"line":336,"column":7}},"line":334},"50":{"name":"trackTransaction","decl":{"start":{"line":338,"column":15},"end":{"line":338,"column":31}},"loc":{"start":{"line":338,"column":37},"end":{"line":340,"column":7}},"line":338},"51":{"name":"resume","decl":{"start":{"line":346,"column":20},"end":{"line":346,"column":26}},"loc":{"start":{"line":346,"column":29},"end":{"line":372,"column":5}},"line":346},"52":{"name":"pause","decl":{"start":{"line":375,"column":20},"end":{"line":375,"column":25}},"loc":{"start":{"line":375,"column":28},"end":{"line":401,"column":5}},"line":375},"53":{"name":"trackAccount","decl":{"start":{"line":413,"column":20},"end":{"line":413,"column":32}},"loc":{"start":{"line":413,"column":42},"end":{"line":424,"column":5}},"line":413},"54":{"name":"(anonymous_54)","decl":{"start":{"line":427,"column":11},"end":{"line":427,"column":12}},"loc":{"start":{"line":427,"column":23},"end":{"line":439,"column":5}},"line":427},"55":{"name":"(anonymous_55)","decl":{"start":{"line":428,"column":56},"end":{"line":428,"column":57}},"loc":{"start":{"line":428,"column":76},"end":{"line":432,"column":7}},"line":428},"56":{"name":"(anonymous_56)","decl":{"start":{"line":429,"column":78},"end":{"line":429,"column":79}},"loc":{"start":{"line":429,"column":90},"end":{"line":431,"column":9}},"line":429},"57":{"name":"fetchAccountTransactions","decl":{"start":{"line":434,"column":15},"end":{"line":434,"column":39}},"loc":{"start":{"line":434,"column":45},"end":{"line":436,"column":7}},"line":434},"58":{"name":"(anonymous_58)","decl":{"start":{"line":442,"column":11},"end":{"line":442,"column":12}},"loc":{"start":{"line":442,"column":23},"end":{"line":458,"column":5}},"line":442},"59":{"name":"(anonymous_59)","decl":{"start":{"line":443,"column":61},"end":{"line":443,"column":62}},"loc":{"start":{"line":443,"column":97},"end":{"line":451,"column":7}},"line":443},"60":{"name":"(anonymous_60)","decl":{"start":{"line":444,"column":83},"end":{"line":444,"column":84}},"loc":{"start":{"line":444,"column":95},"end":{"line":446,"column":9}},"line":444},"61":{"name":"fetchAccountTransactionsAfter","decl":{"start":{"line":453,"column":15},"end":{"line":453,"column":44}},"loc":{"start":{"line":453,"column":60},"end":{"line":455,"column":7}},"line":453},"62":{"name":"(anonymous_62)","decl":{"start":{"line":461,"column":11},"end":{"line":461,"column":12}},"loc":{"start":{"line":461,"column":23},"end":{"line":477,"column":5}},"line":461},"63":{"name":"(anonymous_63)","decl":{"start":{"line":462,"column":62},"end":{"line":462,"column":63}},"loc":{"start":{"line":462,"column":98},"end":{"line":470,"column":7}},"line":462},"64":{"name":"(anonymous_64)","decl":{"start":{"line":463,"column":84},"end":{"line":463,"column":85}},"loc":{"start":{"line":463,"column":96},"end":{"line":465,"column":9}},"line":463},"65":{"name":"fetchAccountTransactionsBefore","decl":{"start":{"line":472,"column":15},"end":{"line":472,"column":45}},"loc":{"start":{"line":472,"column":61},"end":{"line":474,"column":7}},"line":472},"66":{"name":"(anonymous_66)","decl":{"start":{"line":485,"column":11},"end":{"line":485,"column":12}},"loc":{"start":{"line":485,"column":23},"end":{"line":513,"column":5}},"line":485},"67":{"name":"(anonymous_67)","decl":{"start":{"line":486,"column":54},"end":{"line":486,"column":55}},"loc":{"start":{"line":486,"column":80},"end":{"line":506,"column":7}},"line":486},"68":{"name":"(anonymous_68)","decl":{"start":{"line":502,"column":32},"end":{"line":502,"column":33}},"loc":{"start":{"line":502,"column":45},"end":{"line":504,"column":9}},"line":502},"69":{"name":"getAccountTransactions","decl":{"start":{"line":508,"column":15},"end":{"line":508,"column":37}},"loc":{"start":{"line":508,"column":44},"end":{"line":510,"column":7}},"line":508},"70":{"name":"(anonymous_70)","decl":{"start":{"line":523,"column":11},"end":{"line":523,"column":12}},"loc":{"start":{"line":523,"column":23},"end":{"line":544,"column":5}},"line":523},"71":{"name":"(anonymous_71)","decl":{"start":{"line":524,"column":47},"end":{"line":524,"column":48}},"loc":{"start":{"line":524,"column":71},"end":{"line":537,"column":7}},"line":524},"72":{"name":"sendTransaction","decl":{"start":{"line":539,"column":15},"end":{"line":539,"column":30}},"loc":{"start":{"line":539,"column":37},"end":{"line":541,"column":7}},"line":539}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"type":"if","locations":[{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},{"start":{"line":14,"column":24},"end":{"line":14,"column":328}}],"line":14},"1":{"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":95}},"type":"binary-expr","locations":[{"start":{"line":14,"column":28},"end":{"line":14,"column":56}},{"start":{"line":14,"column":60},"end":{"line":14,"column":95}}],"line":14},"2":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":322}},"type":"cond-expr","locations":[{"start":{"line":14,"column":301},"end":{"line":14,"column":309}},{"start":{"line":14,"column":312},"end":{"line":14,"column":322}}],"line":14},"3":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":298}},"type":"binary-expr","locations":[{"start":{"line":14,"column":205},"end":{"line":14,"column":208}},{"start":{"line":14,"column":212},"end":{"line":14,"column":240}},{"start":{"line":14,"column":244},"end":{"line":14,"column":270}},{"start":{"line":14,"column":274},"end":{"line":14,"column":298}}],"line":14},"4":{"loc":{"start":{"line":16,"column":176},"end":{"line":16,"column":263}},"type":"if","locations":[{"start":{"line":16,"column":176},"end":{"line":16,"column":263}},{"start":{"line":16,"column":176},"end":{"line":16,"column":263}}],"line":16},"5":{"loc":{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},"type":"if","locations":[{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},{"start":{"line":20,"column":50},"end":{"line":20,"column":151}}],"line":20},"6":{"loc":{"start":{"line":22,"column":136},"end":{"line":22,"column":166}},"type":"binary-expr","locations":[{"start":{"line":22,"column":136},"end":{"line":22,"column":157}},{"start":{"line":22,"column":161},"end":{"line":22,"column":166}}],"line":22},"7":{"loc":{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},"type":"if","locations":[{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},{"start":{"line":22,"column":200},"end":{"line":22,"column":254}}],"line":22},"8":{"loc":{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},"type":"if","locations":[{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},{"start":{"line":24,"column":62},"end":{"line":24,"column":131}}],"line":24},"9":{"loc":{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},"type":"if","locations":[{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},{"start":{"line":24,"column":132},"end":{"line":24,"column":193}}],"line":24},"10":{"loc":{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},"type":"if","locations":[{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},{"start":{"line":26,"column":50},"end":{"line":26,"column":138}}],"line":26},"11":{"loc":{"start":{"line":26,"column":54},"end":{"line":26,"column":120}},"type":"binary-expr","locations":[{"start":{"line":26,"column":54},"end":{"line":26,"column":58}},{"start":{"line":26,"column":63},"end":{"line":26,"column":89}},{"start":{"line":26,"column":93},"end":{"line":26,"column":119}}],"line":26},"12":{"loc":{"start":{"line":28,"column":48},"end":{"line":28,"column":175}},"type":"cond-expr","locations":[{"start":{"line":28,"column":72},"end":{"line":28,"column":93}},{"start":{"line":28,"column":96},"end":{"line":28,"column":175}}],"line":28},"13":{"loc":{"start":{"line":28,"column":133},"end":{"line":28,"column":172}},"type":"binary-expr","locations":[{"start":{"line":28,"column":133},"end":{"line":28,"column":144}},{"start":{"line":28,"column":148},"end":{"line":28,"column":172}}],"line":28},"14":{"loc":{"start":{"line":30,"column":40},"end":{"line":30,"column":151}},"type":"if","locations":[{"start":{"line":30,"column":40},"end":{"line":30,"column":151}},{"start":{"line":30,"column":40},"end":{"line":30,"column":151}}],"line":30},"15":{"loc":{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},"type":"if","locations":[{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},{"start":{"line":32,"column":43},"end":{"line":32,"column":182}}],"line":32},"16":{"loc":{"start":{"line":32,"column":47},"end":{"line":32,"column":102}},"type":"binary-expr","locations":[{"start":{"line":32,"column":47},"end":{"line":32,"column":79}},{"start":{"line":32,"column":83},"end":{"line":32,"column":102}}],"line":32},"17":{"loc":{"start":{"line":32,"column":218},"end":{"line":32,"column":252}},"type":"binary-expr","locations":[{"start":{"line":32,"column":218},"end":{"line":32,"column":228}},{"start":{"line":32,"column":232},"end":{"line":32,"column":252}}],"line":32},"18":{"loc":{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},"type":"if","locations":[{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},{"start":{"line":32,"column":329},"end":{"line":32,"column":383}}],"line":32},"19":{"loc":{"start":{"line":34,"column":51},"end":{"line":34,"column":137}},"type":"binary-expr","locations":[{"start":{"line":34,"column":51},"end":{"line":34,"column":72}},{"start":{"line":34,"column":76},"end":{"line":34,"column":137}}],"line":34},"20":{"loc":{"start":{"line":36,"column":44},"end":{"line":36,"column":195}},"type":"if","locations":[{"start":{"line":36,"column":44},"end":{"line":36,"column":195}},{"start":{"line":36,"column":44},"end":{"line":36,"column":195}}],"line":36},"21":{"loc":{"start":{"line":81,"column":6},"end":{"line":86,"column":7}},"type":"if","locations":[{"start":{"line":81,"column":6},"end":{"line":86,"column":7}},{"start":{"line":81,"column":6},"end":{"line":86,"column":7}}],"line":81},"22":{"loc":{"start":{"line":110,"column":10},"end":{"line":124,"column":11}},"type":"if","locations":[{"start":{"line":110,"column":10},"end":{"line":124,"column":11}},{"start":{"line":110,"column":10},"end":{"line":124,"column":11}}],"line":110},"23":{"loc":{"start":{"line":116,"column":12},"end":{"line":120,"column":13}},"type":"if","locations":[{"start":{"line":116,"column":12},"end":{"line":120,"column":13}},{"start":{"line":116,"column":12},"end":{"line":120,"column":13}}],"line":116},"24":{"loc":{"start":{"line":173,"column":6},"end":{"line":173,"column":56}},"type":"if","locations":[{"start":{"line":173,"column":6},"end":{"line":173,"column":56}},{"start":{"line":173,"column":6},"end":{"line":173,"column":56}}],"line":173},"25":{"loc":{"start":{"line":217,"column":30},"end":{"line":217,"column":101}},"type":"cond-expr","locations":[{"start":{"line":217,"column":59},"end":{"line":217,"column":97}},{"start":{"line":217,"column":100},"end":{"line":217,"column":101}}],"line":217},"26":{"loc":{"start":{"line":222,"column":8},"end":{"line":222,"column":63}},"type":"if","locations":[{"start":{"line":222,"column":8},"end":{"line":222,"column":63}},{"start":{"line":222,"column":8},"end":{"line":222,"column":63}}],"line":222},"27":{"loc":{"start":{"line":240,"column":12},"end":{"line":242,"column":13}},"type":"if","locations":[{"start":{"line":240,"column":12},"end":{"line":242,"column":13}},{"start":{"line":240,"column":12},"end":{"line":242,"column":13}}],"line":240},"28":{"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":73}},"type":"binary-expr","locations":[{"start":{"line":240,"column":16},"end":{"line":240,"column":42}},{"start":{"line":240,"column":46},"end":{"line":240,"column":73}}],"line":240},"29":{"loc":{"start":{"line":244,"column":12},"end":{"line":246,"column":13}},"type":"if","locations":[{"start":{"line":244,"column":12},"end":{"line":246,"column":13}},{"start":{"line":244,"column":12},"end":{"line":246,"column":13}}],"line":244},"30":{"loc":{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},{"start":{"line":250,"column":8},"end":{"line":252,"column":9}}],"line":250},"31":{"loc":{"start":{"line":283,"column":6},"end":{"line":285,"column":7}},"type":"if","locations":[{"start":{"line":283,"column":6},"end":{"line":285,"column":7}},{"start":{"line":283,"column":6},"end":{"line":285,"column":7}}],"line":283},"32":{"loc":{"start":{"line":320,"column":8},"end":{"line":322,"column":9}},"type":"if","locations":[{"start":{"line":320,"column":8},"end":{"line":322,"column":9}},{"start":{"line":320,"column":8},"end":{"line":322,"column":9}}],"line":320},"33":{"loc":{"start":{"line":347,"column":6},"end":{"line":347,"column":31}},"type":"if","locations":[{"start":{"line":347,"column":6},"end":{"line":347,"column":31}},{"start":{"line":347,"column":6},"end":{"line":347,"column":31}}],"line":347},"34":{"loc":{"start":{"line":363,"column":10},"end":{"line":365,"column":11}},"type":"if","locations":[{"start":{"line":363,"column":10},"end":{"line":365,"column":11}},{"start":{"line":363,"column":10},"end":{"line":365,"column":11}}],"line":363},"35":{"loc":{"start":{"line":363,"column":14},"end":{"line":363,"column":73}},"type":"binary-expr","locations":[{"start":{"line":363,"column":14},"end":{"line":363,"column":41}},{"start":{"line":363,"column":45},"end":{"line":363,"column":73}}],"line":363},"36":{"loc":{"start":{"line":367,"column":10},"end":{"line":369,"column":11}},"type":"if","locations":[{"start":{"line":367,"column":10},"end":{"line":369,"column":11}},{"start":{"line":367,"column":10},"end":{"line":369,"column":11}}],"line":367},"37":{"loc":{"start":{"line":376,"column":6},"end":{"line":376,"column":30}},"type":"if","locations":[{"start":{"line":376,"column":6},"end":{"line":376,"column":30}},{"start":{"line":376,"column":6},"end":{"line":376,"column":30}}],"line":376},"38":{"loc":{"start":{"line":392,"column":10},"end":{"line":394,"column":11}},"type":"if","locations":[{"start":{"line":392,"column":10},"end":{"line":394,"column":11}},{"start":{"line":392,"column":10},"end":{"line":394,"column":11}}],"line":392},"39":{"loc":{"start":{"line":392,"column":14},"end":{"line":392,"column":73}},"type":"binary-expr","locations":[{"start":{"line":392,"column":14},"end":{"line":392,"column":41}},{"start":{"line":392,"column":45},"end":{"line":392,"column":73}}],"line":392},"40":{"loc":{"start":{"line":396,"column":10},"end":{"line":398,"column":11}},"type":"if","locations":[{"start":{"line":396,"column":10},"end":{"line":398,"column":11}},{"start":{"line":396,"column":10},"end":{"line":398,"column":11}}],"line":396},"41":{"loc":{"start":{"line":416,"column":6},"end":{"line":418,"column":7}},"type":"if","locations":[{"start":{"line":416,"column":6},"end":{"line":418,"column":7}},{"start":{"line":416,"column":6},"end":{"line":418,"column":7}}],"line":416},"42":{"loc":{"start":{"line":487,"column":8},"end":{"line":487,"column":103}},"type":"if","locations":[{"start":{"line":487,"column":8},"end":{"line":487,"column":103}},{"start":{"line":487,"column":8},"end":{"line":487,"column":103}}],"line":487},"43":{"loc":{"start":{"line":490,"column":8},"end":{"line":494,"column":9}},"type":"if","locations":[{"start":{"line":490,"column":8},"end":{"line":494,"column":9}},{"start":{"line":490,"column":8},"end":{"line":494,"column":9}}],"line":490},"44":{"loc":{"start":{"line":503,"column":17},"end":{"line":503,"column":78}},"type":"cond-expr","locations":[{"start":{"line":503,"column":44},"end":{"line":503,"column":49}},{"start":{"line":503,"column":52},"end":{"line":503,"column":78}}],"line":503},"45":{"loc":{"start":{"line":525,"column":8},"end":{"line":527,"column":9}},"type":"if","locations":[{"start":{"line":525,"column":8},"end":{"line":527,"column":9}},{"start":{"line":525,"column":8},"end":{"line":527,"column":9}}],"line":525}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":10,"8":0,"9":0,"10":1,"11":32,"12":32,"13":31,"14":1,"15":1,"16":31,"17":20,"18":11,"19":10,"20":21,"21":21,"22":21,"23":21,"24":32,"25":0,"26":21,"27":10,"28":0,"29":3,"30":3,"31":18,"32":18,"33":18,"34":18,"35":17,"36":18,"37":3,"38":3,"39":3,"40":0,"41":3,"42":10,"43":10,"44":0,"45":1,"46":0,"47":1,"48":36,"49":0,"50":36,"51":3,"52":0,"53":3,"54":3,"55":3,"56":1,"57":0,"58":0,"59":1,"60":36,"61":0,"62":36,"63":36,"64":1,"65":1,"66":4,"67":4,"68":4,"69":4,"70":4,"71":4,"72":4,"73":4,"74":4,"75":4,"76":4,"77":4,"78":4,"79":1,"80":4,"81":4,"82":0,"83":0,"84":0,"85":0,"86":4,"87":4,"88":3,"89":1,"90":3,"91":3,"92":3,"93":3,"94":3,"95":3,"96":3,"97":3,"98":3,"99":3,"100":1,"101":1,"102":3,"103":3,"104":0,"105":0,"106":0,"107":0,"108":3,"109":1,"110":1,"111":2,"112":2,"113":2,"114":2,"115":2,"116":2,"117":1,"118":3,"119":0,"120":3,"121":3,"122":0,"123":1,"124":1,"125":1,"126":1,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":1,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":1,"174":1,"175":1,"176":6,"177":6,"178":6,"179":6,"180":6,"181":6,"182":1,"183":1,"184":7,"185":4,"186":7,"187":1,"188":1,"189":4,"190":4,"191":1,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":1,"236":0,"237":0,"238":0,"239":1,"240":1,"241":0,"242":0,"243":0,"244":1,"245":1,"246":0,"247":0,"248":0,"249":1,"250":1,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":1,"266":1,"267":5,"268":1,"269":4,"270":4,"271":4,"272":4,"273":4,"274":4,"275":5,"276":1,"277":1,"278":1},"f":{"0":1,"1":10,"2":0,"3":32,"4":10,"5":21,"6":21,"7":32,"8":0,"9":10,"10":3,"11":3,"12":10,"13":1,"14":0,"15":36,"16":3,"17":1,"18":0,"19":36,"20":1,"21":4,"22":4,"23":3,"24":1,"25":3,"26":1,"27":3,"28":1,"29":2,"30":2,"31":2,"32":3,"33":0,"34":1,"35":0,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":6,"45":1,"46":7,"47":7,"48":1,"49":4,"50":4,"51":0,"52":0,"53":0,"54":1,"55":0,"56":0,"57":0,"58":1,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0,"65":0,"66":1,"67":0,"68":0,"69":0,"70":1,"71":5,"72":5},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0,0,0],"4":[20,11],"5":[0,10],"6":[18,18],"7":[17,1],"8":[3,0],"9":[0,3],"10":[10,0],"11":[10,10,0],"12":[1,0],"13":[0,0],"14":[0,36],"15":[0,3],"16":[3,0],"17":[3,3],"18":[3,0],"19":[1,0],"20":[0,36],"21":[0,4],"22":[3,0],"23":[1,2],"24":[0,3],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[4,3],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[1,4]},"inputSourceMap":{"version":3,"sources":["transaction-manager.ts"],"names":["TransactionTracker","manager","transaction","started","Date","retryLoad","retryCount","maxRetryCount","data","status","Transaction","Status","Timeout","elapsed","Math","round","emit","Error","interval","timeoutId","setTimeout","load","client","wallet","getClient","chainId","result","getTransaction","hash","block","Confirmed","blockhash","addTransaction","listeners","length","getTransactionReceipt","then","receipt","cancel","e","Promise","resolve","reject","once","clearTimeout","undefined","PausableTypedEventEmitter","AccountTransactionTracker","account","spec","lastSyncBlockno","lastSync","blockno","blockchain","bestHeight","transactions","fetchAccountTransactionsAfter","tx","timestamp","pause","intervalId","setInterval","ACCOUNT_UPDATE_INTERVAL","clearInterval","TransactionManager","HashMap","datastore","getIndex","put","paused","accountTxTrackers","values","tracker","resume","has","get","set","applyMiddlewares","limit","accountOrSpec","accountManager","getOrAddAccount","index","txsFrom","Array","from","getAll","address","toString","txsTo","hashSet","Set","allTxs","concat","txs","filter","o","add","txBody","sign","txhash","sendSignedTransaction","key","trackTransaction"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers","sourcesContent":["/*\n\nManager -> Trackers -> Events\nManager -> Events\n\n*/\n\nimport { Transaction, SignedTransaction } from '../models/transaction';\nimport { Account, AccountSpec, CompleteAccountSpec } from '../models/account';\nimport { Wallet } from '../wallet';\nimport { PausableTypedEventEmitter, backoffIntervalStep, HashMap } from '../utils';\nimport { Address } from '@herajs/common';\nimport { ACCOUNT_UPDATE_INTERVAL } from '../defaults';\nimport { GetAccountTxParams } from '../datasources/types';\n\nexport interface Events {\n    'add': Transaction;\n    'update': Transaction;\n    'error': Error;\n}\n\nexport interface TrackerEvents {\n    'block': Transaction;\n    'receipt': GetReceiptResult;\n    'error': Error;\n    'timeout': Error;\n}\n\nexport interface AccountTrackerEvents {\n    'transaction': SignedTransaction;\n    'transactions': SignedTransaction[];\n}\n\n// TODO: remove\ninterface GetTxResult {\n    block?: {\n        hash: string;\n        idx: number;\n    };\n    tx: any;\n}\ninterface GetReceiptResult {\n    contractaddress: Address;\n    result: string;\n    status: string;\n}\n\nexport class TransactionTracker extends PausableTypedEventEmitter<TrackerEvents> {\n    public transaction: SignedTransaction;\n    private manager: TransactionManager;\n    private timeoutId?: NodeJS.Timeout;\n    private retryCount = 0;\n    private maxRetryCount = 10;\n    private started: Date;\n\n    constructor(manager: TransactionManager, transaction: SignedTransaction) {\n        super();\n        this.manager = manager;\n        this.transaction = transaction;\n        this.started = new Date();\n        this.retryLoad();\n    }\n\n    /**\n     * Repeatedly tries loading transaction status.\n     * This uses an exponential backoff in case the transaction is not confirmed yet.\n     */\n    private retryLoad(): void {\n        if (this.retryCount >= this.maxRetryCount) {\n            this.transaction.data.status = Transaction.Status.Timeout;\n            const elapsed = Math.round((+new Date() - (+this.started))/1000);\n            this.emit('timeout', new Error(`timeout after ${elapsed}s`));\n            return;\n        }\n        const interval = backoffIntervalStep(this.retryCount++);\n        this.timeoutId = setTimeout(() => {\n            this.load();\n        }, interval);\n    }\n\n    /**\n     * Attempt to retrieve transaction data from node.\n     * Emits events according to changed status.\n     */\n    async load(): Promise<void> {\n        //console.log('[transactionManager] load', this.transaction.data.chainId, this.transaction.data.hash);\n        const client = this.manager.wallet.getClient(this.transaction.data.chainId);\n        try {\n            const result = await client.getTransaction(this.transaction.data.hash as string) as GetTxResult;\n            if (typeof result.block !== 'undefined') {\n                this.transaction.data.status = Transaction.Status.Confirmed;\n                this.transaction.data.blockhash = result.block.hash;\n                this.manager.addTransaction(this.transaction);\n                this.emit('block', this.transaction);\n                if (this.listeners('receipt').length) {\n                    client.getTransactionReceipt(this.transaction.data.hash as string).then((receipt: GetReceiptResult) => {\n                        this.emit('receipt', receipt);\n                    });\n                }\n                this.cancel();\n                return;\n            }\n        } catch (e) {\n            this.emit('error', e);\n            this.cancel();\n            return;\n        }\n        \n        this.retryLoad();\n    }\n\n    /**\n     * Returns a promise that resolves when the transaction is confirmed and the receipt is available  \n     * and rejects when an error or timeout occurs.\n     */\n    async getReceipt(): Promise<GetReceiptResult> {\n        return new Promise((resolve, reject) => {\n            this.once('receipt', resolve);\n            this.once('error', reject);\n            this.once('timeout', reject);\n        });\n    }\n\n    /**\n     * Cancels transaction tracker. This does not cancel sending the transaction.\n     */\n    cancel(): void {\n        if (typeof this.timeoutId === 'undefined') return;\n        clearTimeout(this.timeoutId);\n        this.timeoutId = undefined;\n    }\n\n    get hash(): string {\n        return this.transaction.hash;\n    }\n}\n\n\nclass AccountTransactionTracker extends PausableTypedEventEmitter<AccountTrackerEvents> {\n    private manager: TransactionManager;\n    private intervalId?: NodeJS.Timeout;\n    private account: Account;\n\n    constructor(manager: TransactionManager, account: Account) {\n        super();\n        this.manager = manager;\n        this.account = account;\n    }\n\n    async load(): Promise<Account> {\n        const client = this.manager.wallet.getClient(this.account.data.spec.chainId);\n        const lastSyncBlockno = this.account.data.lastSync ? this.account.data.lastSync.blockno + 1 : 0;\n        const { bestHeight } = await client.blockchain();\n        if (lastSyncBlockno >= bestHeight) return this.account;\n        // console.log(`[track] sync from block ${lastSyncBlockno} .. ${bestHeight}`);\n        const transactions = await this.manager.fetchAccountTransactionsAfter(this.account, lastSyncBlockno, bestHeight);\n        for (const tx of transactions) {\n            this.emit('transaction', tx);\n            this.manager.addTransaction(tx);\n        }\n        if (transactions.length) {\n            this.emit('transactions', transactions);\n        }\n        this.account.data.lastSync = {\n            blockno: bestHeight,\n            timestamp: +new Date()\n        };\n        return this.account;\n    }\n\n    resume(): void {\n        this.load().catch(() => {\n            //console.error('Loading account tx failed, pausing tracker', e);\n            this.pause();\n        });\n        this.intervalId = setInterval(() => {\n            this.load();\n        }, ACCOUNT_UPDATE_INTERVAL);\n    }\n\n    pause(): void {\n        if (this.intervalId) {\n            clearInterval(this.intervalId);\n        }\n    }\n}\n\n\n/**\n * TransactionManager manages and tracks single transactions\n */\nexport class TransactionManager extends PausableTypedEventEmitter<Events> {\n    public wallet: Wallet;\n    private accountTxTrackers: HashMap<CompleteAccountSpec, AccountTransactionTracker> = new HashMap();\n\n    constructor(wallet: Wallet) {\n        super();\n        this.wallet = wallet;\n    }\n\n    async addTransaction(transaction: SignedTransaction): Promise<void> {\n        if (this.wallet.datastore) {\n            await this.wallet.datastore.getIndex('transactions').put(transaction);\n        }\n    }\n\n    async trackTransaction(transaction: SignedTransaction): Promise<TransactionTracker> {\n        return new TransactionTracker(this, transaction);\n    }\n\n    resume(): void {\n        if (!this.paused) return;\n        this.paused = false;\n        for (const tracker of this.accountTxTrackers.values()) {\n            tracker.resume();\n        }\n    }\n\n    pause(): void {\n        if (this.paused) return;\n        this.paused = true;\n        for (const tracker of this.accountTxTrackers.values()) {\n            tracker.pause();\n        }\n    }\n\n\n    /**\n     * Track transactions for account.\n     * There is no default implementation for this. The only generally available\n     * method would be to scan the entire blockchain which is highly inefficient.\n     * If you want that, use your own full node and add the data source using\n     * wallet.use(NodeTransactionScanner);\n     * @param account \n     */\n    trackAccount(account: Account): AccountTransactionTracker {\n        this.resume();\n        if (this.accountTxTrackers.has(account.data.spec)) {\n            return this.accountTxTrackers.get(account.data.spec) as AccountTransactionTracker;\n        }\n        const tracker = new AccountTransactionTracker(this, account);\n        tracker.resume();\n        this.accountTxTrackers.set(account.data.spec, tracker);\n        return tracker;\n    }\n\n    async fetchAccountTransactions(account: Account): Promise<SignedTransaction[]> {\n        return await this.wallet.applyMiddlewares<Account, Promise<SignedTransaction[]>>('fetchAccountTransactions')(\n            () => {\n                throw new Error('no data source for account transactions. Please configure a data source such as NodeTransactionScanner.');\n            }\n        )(account);\n    }\n\n    async fetchAccountTransactionsAfter(account: Account, blockno: number, limit?: number): Promise<SignedTransaction[]> {\n        return await this.wallet.applyMiddlewares<GetAccountTxParams, Promise<SignedTransaction[]>>('fetchAccountTransactionsAfter')(\n            () => {\n                throw new Error('no data source for account transactions. Please configure a data source such as NodeTransactionScanner.');\n            }\n        )({ account, blockno, limit });\n    }\n\n    async fetchAccountTransactionsBefore(account: Account, blockno: number, limit?: number): Promise<SignedTransaction[]> {\n        return await this.wallet.applyMiddlewares<GetAccountTxParams, Promise<SignedTransaction[]>>('fetchAccountTransactionsBefore')(\n            () => {\n                throw new Error('no data source for account transactions. Please configure a data source such as NodeTransactionScanner.');\n            }\n        )({ account, blockno, limit });\n    }\n\n    /**\n     * Returns transactions stored for an account\n     * @param account \n     */\n    async getAccountTransactions(accountOrSpec: AccountSpec | Account): Promise<Transaction[]> {\n        if (!this.wallet.datastore) throw new Error('configure storage before accessing transactions');\n        let account: Account;\n        if (!(accountOrSpec as Account).data) {\n            account = await this.wallet.accountManager.getOrAddAccount(accountOrSpec as AccountSpec);\n        } else {\n            account = accountOrSpec as Account;\n        }\n        const index = this.wallet.datastore.getIndex('transactions');\n        const txsFrom = Array.from(await index.getAll(account.address.toString(), 'from')) as Transaction[];\n        const txsTo = Array.from(await index.getAll(account.address.toString(), 'to')) as Transaction[];\n        // unique txs by hash\n        const hashSet = new Set() as Set<string>;\n        const allTxs = txsFrom.concat(txsTo);\n        const txs = allTxs.filter((o: Transaction): boolean => {\n            return hashSet.has(o.data.hash as string) ? false : !!hashSet.add(o.data.hash as string);\n        });\n        return txs;\n    }\n\n    /**\n     * Sends prepared and signed transaction to the Aergo client.\n     * Adds transaction to the manager and starts a tracker.\n     * @param transaction \n     * @returns transaction tracker\n     */\n    async sendTransaction(transaction: SignedTransaction): Promise<TransactionTracker> {\n        if (transaction.txBody.sign === '') {\n            throw new Error('Transaction is missing signature. If it passed through prepareTransaction, you have to manually set signature and hash.');\n        }\n        const client = this.wallet.getClient(transaction.data.chainId);\n        const txhash = await client.sendSignedTransaction(transaction.txBody) as string;\n        // eslint-disable-next-line require-atomic-updates\n        transaction.key = txhash;\n        // eslint-disable-next-line require-atomic-updates\n        transaction.data.hash = txhash;\n        this.addTransaction(transaction);\n        return this.trackTransaction(transaction);\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9f1d10761ef873fe06990e5c75c9a36836e21e1c","contentHash":"09f36257ec6c419ad846b0fbffea3efe29bed26460b656ebd6d8deb6f518092e"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/name-manager.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers/name-manager.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":12},"end":{"line":8,"column":37}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":32}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":39}},"5":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"6":{"start":{"line":14,"column":99},"end":{"line":14,"column":154}},"7":{"start":{"line":14,"column":133},"end":{"line":14,"column":151}},"8":{"start":{"line":14,"column":164},"end":{"line":14,"column":326}},"9":{"start":{"line":14,"column":198},"end":{"line":14,"column":323}},"10":{"start":{"line":14,"column":329},"end":{"line":14,"column":349}},"11":{"start":{"line":16,"column":54},"end":{"line":16,"column":73}},"12":{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},"13":{"start":{"line":16,"column":125},"end":{"line":16,"column":161}},"14":{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},"15":{"start":{"line":16,"column":183},"end":{"line":16,"column":292}},"16":{"start":{"line":16,"column":225},"end":{"line":16,"column":288}},"17":{"start":{"line":16,"column":293},"end":{"line":16,"column":324}},"18":{"start":{"line":16,"column":327},"end":{"line":16,"column":339}},"19":{"start":{"line":18,"column":33},"end":{"line":18,"column":517}},"20":{"start":{"line":18,"column":46},"end":{"line":18,"column":47}},"21":{"start":{"line":18,"column":91},"end":{"line":18,"column":131}},"22":{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},"23":{"start":{"line":18,"column":146},"end":{"line":18,"column":247}},"24":{"start":{"line":18,"column":201},"end":{"line":18,"column":243}},"25":{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},"26":{"start":{"line":18,"column":295},"end":{"line":18,"column":369}},"27":{"start":{"line":18,"column":379},"end":{"line":18,"column":513}},"28":{"start":{"line":18,"column":428},"end":{"line":18,"column":509}},"29":{"start":{"line":18,"column":518},"end":{"line":18,"column":532}},"30":{"start":{"line":20,"column":77},"end":{"line":20,"column":175}},"31":{"start":{"line":20,"column":94},"end":{"line":20,"column":107}},"32":{"start":{"line":20,"column":121},"end":{"line":20,"column":131}},"33":{"start":{"line":20,"column":151},"end":{"line":20,"column":165}},"34":{"start":{"line":20,"column":166},"end":{"line":20,"column":173}},"35":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"36":{"start":{"line":20,"column":193},"end":{"line":20,"column":208}},"37":{"start":{"line":20,"column":218},"end":{"line":20,"column":261}},"38":{"start":{"line":22,"column":33},"end":{"line":22,"column":387}},"39":{"start":{"line":22,"column":65},"end":{"line":22,"column":69}},"40":{"start":{"line":22,"column":78},"end":{"line":22,"column":87}},"41":{"start":{"line":22,"column":89},"end":{"line":22,"column":384}},"42":{"start":{"line":22,"column":147},"end":{"line":22,"column":167}},"43":{"start":{"line":22,"column":193},"end":{"line":22,"column":264}},"44":{"start":{"line":22,"column":290},"end":{"line":22,"column":360}},"45":{"start":{"line":22,"column":363},"end":{"line":22,"column":380}},"46":{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},"47":{"start":{"line":24,"column":92},"end":{"line":24,"column":149}},"48":{"start":{"line":26,"column":44},"end":{"line":26,"column":315}},"49":{"start":{"line":26,"column":57},"end":{"line":26,"column":58}},"50":{"start":{"line":26,"column":102},"end":{"line":26,"column":110}},"51":{"start":{"line":26,"column":112},"end":{"line":26,"column":167}},"52":{"start":{"line":26,"column":168},"end":{"line":26,"column":199}},"53":{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},"54":{"start":{"line":26,"column":227},"end":{"line":26,"column":254}},"55":{"start":{"line":26,"column":255},"end":{"line":26,"column":313}},"56":{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},"57":{"start":{"line":28,"column":78},"end":{"line":28,"column":131}},"58":{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},"59":{"start":{"line":28,"column":149},"end":{"line":28,"column":193}},"60":{"start":{"line":28,"column":194},"end":{"line":28,"column":213}},"61":{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},"62":{"start":{"line":30,"column":124},"end":{"line":30,"column":136}},"63":{"start":{"line":30,"column":139},"end":{"line":30,"column":175}},"64":{"start":{"line":32,"column":30},"end":{"line":32,"column":176}},"65":{"start":{"line":32,"column":126},"end":{"line":32,"column":173}},"66":{"start":{"line":32,"column":177},"end":{"line":32,"column":203}},"67":{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},"68":{"start":{"line":34,"column":63},"end":{"line":34,"column":149}},"69":{"start":{"line":34,"column":152},"end":{"line":34,"column":164}},"70":{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},"71":{"start":{"line":36,"column":106},"end":{"line":36,"column":180}},"72":{"start":{"line":36,"column":183},"end":{"line":36,"column":328}},"73":{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},"74":{"start":{"line":36,"column":345},"end":{"line":36,"column":383}},"75":{"start":{"line":38,"column":33},"end":{"line":38,"column":138}},"76":{"start":{"line":38,"column":109},"end":{"line":38,"column":125}},"77":{"start":{"line":38,"column":126},"end":{"line":38,"column":135}},"78":{"start":{"line":38,"column":139},"end":{"line":38,"column":168}},"79":{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},"80":{"start":{"line":40,"column":62},"end":{"line":40,"column":166}},"81":{"start":{"line":40,"column":176},"end":{"line":40,"column":193}},"82":{"start":{"line":40,"column":196},"end":{"line":40,"column":207}},"83":{"start":{"line":47,"column":0},"end":{"line":478,"column":35}},"84":{"start":{"line":48,"column":2},"end":{"line":48,"column":48}},"85":{"start":{"line":53,"column":4},"end":{"line":53,"column":39}},"86":{"start":{"line":55,"column":4},"end":{"line":55,"column":86}},"87":{"start":{"line":57,"column":4},"end":{"line":57,"column":69}},"88":{"start":{"line":59,"column":4},"end":{"line":59,"column":91}},"89":{"start":{"line":61,"column":4},"end":{"line":61,"column":77}},"90":{"start":{"line":63,"column":4},"end":{"line":63,"column":95}},"91":{"start":{"line":65,"column":4},"end":{"line":65,"column":26}},"92":{"start":{"line":66,"column":4},"end":{"line":66,"column":17}},"93":{"start":{"line":73,"column":2},"end":{"line":475,"column":6}},"94":{"start":{"line":76,"column":26},"end":{"line":86,"column":8}},"95":{"start":{"line":77,"column":22},"end":{"line":77,"column":95}},"96":{"start":{"line":79,"column":8},"end":{"line":83,"column":9}},"97":{"start":{"line":80,"column":23},"end":{"line":80,"column":53}},"98":{"start":{"line":81,"column":26},"end":{"line":81,"column":53}},"99":{"start":{"line":82,"column":10},"end":{"line":82,"column":68}},"100":{"start":{"line":85,"column":8},"end":{"line":85,"column":52}},"101":{"start":{"line":89,"column":8},"end":{"line":89,"column":52}},"102":{"start":{"line":92,"column":6},"end":{"line":92,"column":26}},"103":{"start":{"line":102,"column":20},"end":{"line":102,"column":107}},"104":{"start":{"line":103,"column":6},"end":{"line":106,"column":8}},"105":{"start":{"line":111,"column":32},"end":{"line":111,"column":94}},"106":{"start":{"line":113,"column":6},"end":{"line":115,"column":7}},"107":{"start":{"line":114,"column":8},"end":{"line":114,"column":75}},"108":{"start":{"line":117,"column":6},"end":{"line":117,"column":58}},"109":{"start":{"line":126,"column":19},"end":{"line":126,"column":23}},"110":{"start":{"line":128,"column":32},"end":{"line":128,"column":94}},"111":{"start":{"line":129,"column":18},"end":{"line":129,"column":55}},"112":{"start":{"line":130,"column":29},"end":{"line":133,"column":7}},"113":{"start":{"line":135,"column":6},"end":{"line":137,"column":7}},"114":{"start":{"line":136,"column":8},"end":{"line":136,"column":56}},"115":{"start":{"line":139,"column":24},"end":{"line":141,"column":9}},"116":{"start":{"line":142,"column":6},"end":{"line":142,"column":47}},"117":{"start":{"line":143,"column":6},"end":{"line":153,"column":9}},"118":{"start":{"line":144,"column":8},"end":{"line":144,"column":33}},"119":{"start":{"line":146,"column":8},"end":{"line":151,"column":11}},"120":{"start":{"line":147,"column":10},"end":{"line":150,"column":13}},"121":{"start":{"line":152,"column":8},"end":{"line":152,"column":87}},"122":{"start":{"line":154,"column":6},"end":{"line":154,"column":25}},"123":{"start":{"line":163,"column":24},"end":{"line":192,"column":8}},"124":{"start":{"line":164,"column":21},"end":{"line":164,"column":25}},"125":{"start":{"line":166,"column":24},"end":{"line":166,"column":96}},"126":{"start":{"line":167,"column":34},"end":{"line":167,"column":96}},"127":{"start":{"line":168,"column":20},"end":{"line":168,"column":57}},"128":{"start":{"line":169,"column":31},"end":{"line":172,"column":9}},"129":{"start":{"line":174,"column":8},"end":{"line":177,"column":9}},"130":{"start":{"line":176,"column":10},"end":{"line":176,"column":44}},"131":{"start":{"line":179,"column":8},"end":{"line":183,"column":9}},"132":{"start":{"line":181,"column":22},"end":{"line":181,"column":61}},"133":{"start":{"line":182,"column":10},"end":{"line":182,"column":81}},"134":{"start":{"line":185,"column":8},"end":{"line":185,"column":46}},"135":{"start":{"line":186,"column":8},"end":{"line":191,"column":11}},"136":{"start":{"line":187,"column":10},"end":{"line":190,"column":13}},"137":{"start":{"line":195,"column":8},"end":{"line":195,"column":50}},"138":{"start":{"line":198,"column":6},"end":{"line":198,"column":24}},"139":{"start":{"line":207,"column":24},"end":{"line":213,"column":8}},"140":{"start":{"line":208,"column":8},"end":{"line":208,"column":36}},"141":{"start":{"line":210,"column":8},"end":{"line":212,"column":9}},"142":{"start":{"line":211,"column":10},"end":{"line":211,"column":64}},"143":{"start":{"line":216,"column":8},"end":{"line":216,"column":50}},"144":{"start":{"line":219,"column":6},"end":{"line":219,"column":24}},"145":{"start":{"line":228,"column":38},"end":{"line":241,"column":8}},"146":{"start":{"line":229,"column":34},"end":{"line":229,"column":96}},"147":{"start":{"line":230,"column":8},"end":{"line":240,"column":22}},"148":{"start":{"line":244,"column":8},"end":{"line":244,"column":64}},"149":{"start":{"line":247,"column":6},"end":{"line":247,"column":38}},"150":{"start":{"line":256,"column":38},"end":{"line":269,"column":8}},"151":{"start":{"line":257,"column":34},"end":{"line":257,"column":96}},"152":{"start":{"line":258,"column":8},"end":{"line":268,"column":22}},"153":{"start":{"line":272,"column":8},"end":{"line":272,"column":64}},"154":{"start":{"line":275,"column":6},"end":{"line":275,"column":38}},"155":{"start":{"line":284,"column":22},"end":{"line":331,"column":8}},"156":{"start":{"line":285,"column":21},"end":{"line":285,"column":25}},"157":{"start":{"line":287,"column":34},"end":{"line":287,"column":96}},"158":{"start":{"line":288,"column":23},"end":{"line":288,"column":60}},"159":{"start":{"line":290,"column":8},"end":{"line":321,"column":9}},"160":{"start":{"line":291,"column":24},"end":{"line":291,"column":159}},"161":{"start":{"line":292,"column":22},"end":{"line":294,"column":12}},"162":{"start":{"line":293,"column":12},"end":{"line":293,"column":59}},"163":{"start":{"line":295,"column":42},"end":{"line":295,"column":46}},"164":{"start":{"line":296,"column":34},"end":{"line":296,"column":39}},"165":{"start":{"line":297,"column":31},"end":{"line":297,"column":40}},"166":{"start":{"line":299,"column":10},"end":{"line":317,"column":11}},"167":{"start":{"line":300,"column":12},"end":{"line":303,"column":13}},"168":{"start":{"line":300,"column":33},"end":{"line":300,"column":57}},"169":{"start":{"line":301,"column":25},"end":{"line":301,"column":36}},"170":{"start":{"line":302,"column":14},"end":{"line":302,"column":92}},"171":{"start":{"line":305,"column":12},"end":{"line":305,"column":37}},"172":{"start":{"line":306,"column":12},"end":{"line":306,"column":33}},"173":{"start":{"line":308,"column":12},"end":{"line":316,"column":13}},"174":{"start":{"line":309,"column":14},"end":{"line":311,"column":15}},"175":{"start":{"line":310,"column":16},"end":{"line":310,"column":38}},"176":{"start":{"line":313,"column":14},"end":{"line":315,"column":15}},"177":{"start":{"line":314,"column":16},"end":{"line":314,"column":37}},"178":{"start":{"line":319,"column":10},"end":{"line":319,"column":38}},"179":{"start":{"line":320,"column":10},"end":{"line":320,"column":23}},"180":{"start":{"line":323,"column":8},"end":{"line":330,"column":11}},"181":{"start":{"line":324,"column":10},"end":{"line":327,"column":13}},"182":{"start":{"line":329,"column":10},"end":{"line":329,"column":23}},"183":{"start":{"line":334,"column":8},"end":{"line":334,"column":48}},"184":{"start":{"line":337,"column":6},"end":{"line":337,"column":22}},"185":{"start":{"line":347,"column":26},"end":{"line":363,"column":8}},"186":{"start":{"line":348,"column":34},"end":{"line":348,"column":96}},"187":{"start":{"line":349,"column":23},"end":{"line":349,"column":60}},"188":{"start":{"line":350,"column":31},"end":{"line":353,"column":9}},"189":{"start":{"line":356,"column":8},"end":{"line":360,"column":9}},"190":{"start":{"line":357,"column":10},"end":{"line":357,"column":69}},"191":{"start":{"line":359,"column":10},"end":{"line":359,"column":57}},"192":{"start":{"line":362,"column":8},"end":{"line":362,"column":23}},"193":{"start":{"line":366,"column":8},"end":{"line":366,"column":52}},"194":{"start":{"line":369,"column":6},"end":{"line":369,"column":26}},"195":{"start":{"line":378,"column":22},"end":{"line":393,"column":8}},"196":{"start":{"line":379,"column":8},"end":{"line":385,"column":9}},"197":{"start":{"line":380,"column":10},"end":{"line":384,"column":11}},"198":{"start":{"line":381,"column":25},"end":{"line":381,"column":115}},"199":{"start":{"line":382,"column":12},"end":{"line":382,"column":59}},"200":{"start":{"line":387,"column":8},"end":{"line":392,"column":24}},"201":{"start":{"line":396,"column":8},"end":{"line":396,"column":48}},"202":{"start":{"line":399,"column":6},"end":{"line":399,"column":22}},"203":{"start":{"line":404,"column":19},"end":{"line":404,"column":23}},"204":{"start":{"line":406,"column":21},"end":{"line":406,"column":61}},"205":{"start":{"line":407,"column":24},"end":{"line":407,"column":56}},"206":{"start":{"line":409,"column":6},"end":{"line":411,"column":7}},"207":{"start":{"line":410,"column":8},"end":{"line":410,"column":40}},"208":{"start":{"line":413,"column":24},"end":{"line":413,"column":56}},"209":{"start":{"line":414,"column":6},"end":{"line":414,"column":55}},"210":{"start":{"line":415,"column":6},"end":{"line":420,"column":9}},"211":{"start":{"line":416,"column":8},"end":{"line":419,"column":11}},"212":{"start":{"line":421,"column":6},"end":{"line":426,"column":9}},"213":{"start":{"line":422,"column":8},"end":{"line":425,"column":11}},"214":{"start":{"line":436,"column":24},"end":{"line":467,"column":8}},"215":{"start":{"line":437,"column":34},"end":{"line":437,"column":96}},"216":{"start":{"line":438,"column":22},"end":{"line":438,"column":72}},"217":{"start":{"line":439,"column":21},"end":{"line":439,"column":71}},"218":{"start":{"line":441,"column":19},"end":{"line":441,"column":44}},"219":{"start":{"line":442,"column":25},"end":{"line":442,"column":40}},"220":{"start":{"line":444,"column":23},"end":{"line":444,"column":65}},"221":{"start":{"line":445,"column":8},"end":{"line":445,"column":67}},"222":{"start":{"line":446,"column":8},"end":{"line":446,"column":55}},"223":{"start":{"line":447,"column":8},"end":{"line":450,"column":10}},"224":{"start":{"line":452,"column":28},"end":{"line":452,"column":51}},"225":{"start":{"line":453,"column":29},"end":{"line":456,"column":10}},"226":{"start":{"line":457,"column":8},"end":{"line":457,"column":83}},"227":{"start":{"line":459,"column":8},"end":{"line":462,"column":9}},"228":{"start":{"line":460,"column":31},"end":{"line":460,"column":131}},"229":{"start":{"line":461,"column":10},"end":{"line":461,"column":74}},"230":{"start":{"line":464,"column":8},"end":{"line":464,"column":37}},"231":{"start":{"line":465,"column":8},"end":{"line":465,"column":86}},"232":{"start":{"line":466,"column":8},"end":{"line":466,"column":23}},"233":{"start":{"line":470,"column":8},"end":{"line":470,"column":50}},"234":{"start":{"line":473,"column":6},"end":{"line":473,"column":24}},"235":{"start":{"line":477,"column":2},"end":{"line":477,"column":21}},"236":{"start":{"line":480,"column":0},"end":{"line":480,"column":33}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":351}},"line":14},"1":{"name":"_typeof","decl":{"start":{"line":14,"column":118},"end":{"line":14,"column":125}},"loc":{"start":{"line":14,"column":131},"end":{"line":14,"column":153}},"line":14},"2":{"name":"_typeof","decl":{"start":{"line":14,"column":183},"end":{"line":14,"column":190}},"loc":{"start":{"line":14,"column":196},"end":{"line":14,"column":325}},"line":14},"3":{"name":"ownKeys","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":16}},"loc":{"start":{"line":16,"column":41},"end":{"line":16,"column":341}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":16,"column":208},"end":{"line":16,"column":209}},"loc":{"start":{"line":16,"column":223},"end":{"line":16,"column":290}},"line":16},"5":{"name":"_objectSpread","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":22}},"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":534}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":184},"end":{"line":18,"column":185}},"loc":{"start":{"line":18,"column":199},"end":{"line":18,"column":245}},"line":18},"7":{"name":"(anonymous_7)","decl":{"start":{"line":18,"column":411},"end":{"line":18,"column":412}},"loc":{"start":{"line":18,"column":426},"end":{"line":18,"column":511}},"line":18},"8":{"name":"asyncGeneratorStep","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":75},"end":{"line":20,"column":265}},"line":20},"9":{"name":"_asyncToGenerator","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":31},"end":{"line":22,"column":389}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":22,"column":40},"end":{"line":22,"column":41}},"loc":{"start":{"line":22,"column":52},"end":{"line":22,"column":386}},"line":22},"11":{"name":"(anonymous_11)","decl":{"start":{"line":22,"column":108},"end":{"line":22,"column":109}},"loc":{"start":{"line":22,"column":135},"end":{"line":22,"column":382}},"line":22},"12":{"name":"_next","decl":{"start":{"line":22,"column":178},"end":{"line":22,"column":183}},"loc":{"start":{"line":22,"column":191},"end":{"line":22,"column":266}},"line":22},"13":{"name":"_throw","decl":{"start":{"line":22,"column":276},"end":{"line":22,"column":282}},"loc":{"start":{"line":22,"column":288},"end":{"line":22,"column":362}},"line":22},"14":{"name":"_classCallCheck","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":24}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":153}},"line":24},"15":{"name":"_defineProperties","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":317}},"line":26},"16":{"name":"_createClass","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":21}},"loc":{"start":{"line":28,"column":60},"end":{"line":28,"column":215}},"line":28},"17":{"name":"_possibleConstructorReturn","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":35}},"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":177}},"line":30},"18":{"name":"_getPrototypeOf","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":24}},"loc":{"start":{"line":32,"column":28},"end":{"line":32,"column":205}},"line":32},"19":{"name":"_getPrototypeOf","decl":{"start":{"line":32,"column":105},"end":{"line":32,"column":120}},"loc":{"start":{"line":32,"column":124},"end":{"line":32,"column":175}},"line":32},"20":{"name":"_assertThisInitialized","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":31}},"loc":{"start":{"line":34,"column":38},"end":{"line":34,"column":166}},"line":34},"21":{"name":"_inherits","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":18}},"loc":{"start":{"line":36,"column":41},"end":{"line":36,"column":385}},"line":36},"22":{"name":"_setPrototypeOf","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":170}},"line":38},"23":{"name":"_setPrototypeOf","decl":{"start":{"line":38,"column":85},"end":{"line":38,"column":100}},"loc":{"start":{"line":38,"column":107},"end":{"line":38,"column":137}},"line":38},"24":{"name":"_defineProperty","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":24}},"loc":{"start":{"line":40,"column":42},"end":{"line":40,"column":209}},"line":40},"25":{"name":"(anonymous_25)","decl":{"start":{"line":47,"column":0},"end":{"line":47,"column":1}},"loc":{"start":{"line":47,"column":33},"end":{"line":478,"column":1}},"line":47},"26":{"name":"NameManager","decl":{"start":{"line":50,"column":11},"end":{"line":50,"column":22}},"loc":{"start":{"line":50,"column":31},"end":{"line":67,"column":3}},"line":50},"27":{"name":"(anonymous_27)","decl":{"start":{"line":75,"column":11},"end":{"line":75,"column":12}},"loc":{"start":{"line":75,"column":23},"end":{"line":93,"column":5}},"line":75},"28":{"name":"(anonymous_28)","decl":{"start":{"line":76,"column":44},"end":{"line":76,"column":45}},"loc":{"start":{"line":76,"column":64},"end":{"line":86,"column":7}},"line":76},"29":{"name":"getNamePrice","decl":{"start":{"line":88,"column":15},"end":{"line":88,"column":27}},"loc":{"start":{"line":88,"column":32},"end":{"line":90,"column":7}},"line":88},"30":{"name":"getCompleteNameSpec","decl":{"start":{"line":101,"column":20},"end":{"line":101,"column":39}},"loc":{"start":{"line":101,"column":50},"end":{"line":107,"column":5}},"line":101},"31":{"name":"getNamesMap","decl":{"start":{"line":110,"column":20},"end":{"line":110,"column":31}},"loc":{"start":{"line":110,"column":45},"end":{"line":118,"column":5}},"line":110},"32":{"name":"addName","decl":{"start":{"line":125,"column":20},"end":{"line":125,"column":27}},"loc":{"start":{"line":125,"column":58},"end":{"line":155,"column":5}},"line":125},"33":{"name":"(anonymous_33)","decl":{"start":{"line":143,"column":23},"end":{"line":143,"column":24}},"loc":{"start":{"line":143,"column":39},"end":{"line":153,"column":7}},"line":143},"34":{"name":"(anonymous_34)","decl":{"start":{"line":146,"column":41},"end":{"line":146,"column":42}},"loc":{"start":{"line":146,"column":58},"end":{"line":151,"column":9}},"line":146},"35":{"name":"(anonymous_35)","decl":{"start":{"line":162,"column":11},"end":{"line":162,"column":12}},"loc":{"start":{"line":162,"column":23},"end":{"line":199,"column":5}},"line":162},"36":{"name":"(anonymous_36)","decl":{"start":{"line":163,"column":42},"end":{"line":163,"column":43}},"loc":{"start":{"line":163,"column":72},"end":{"line":192,"column":7}},"line":163},"37":{"name":"(anonymous_37)","decl":{"start":{"line":186,"column":41},"end":{"line":186,"column":42}},"loc":{"start":{"line":186,"column":58},"end":{"line":191,"column":9}},"line":186},"38":{"name":"removeName","decl":{"start":{"line":194,"column":15},"end":{"line":194,"column":25}},"loc":{"start":{"line":194,"column":36},"end":{"line":196,"column":7}},"line":194},"39":{"name":"(anonymous_39)","decl":{"start":{"line":206,"column":11},"end":{"line":206,"column":12}},"loc":{"start":{"line":206,"column":23},"end":{"line":220,"column":5}},"line":206},"40":{"name":"(anonymous_40)","decl":{"start":{"line":207,"column":42},"end":{"line":207,"column":43}},"loc":{"start":{"line":207,"column":55},"end":{"line":213,"column":7}},"line":207},"41":{"name":"clearNames","decl":{"start":{"line":215,"column":15},"end":{"line":215,"column":25}},"loc":{"start":{"line":215,"column":28},"end":{"line":217,"column":7}},"line":215},"42":{"name":"(anonymous_42)","decl":{"start":{"line":227,"column":11},"end":{"line":227,"column":12}},"loc":{"start":{"line":227,"column":23},"end":{"line":248,"column":5}},"line":227},"43":{"name":"(anonymous_43)","decl":{"start":{"line":228,"column":56},"end":{"line":228,"column":57}},"loc":{"start":{"line":228,"column":97},"end":{"line":241,"column":7}},"line":228},"44":{"name":"getCreateNameTransaction","decl":{"start":{"line":243,"column":15},"end":{"line":243,"column":39}},"loc":{"start":{"line":243,"column":55},"end":{"line":245,"column":7}},"line":243},"45":{"name":"(anonymous_45)","decl":{"start":{"line":255,"column":11},"end":{"line":255,"column":12}},"loc":{"start":{"line":255,"column":23},"end":{"line":276,"column":5}},"line":255},"46":{"name":"(anonymous_46)","decl":{"start":{"line":256,"column":56},"end":{"line":256,"column":57}},"loc":{"start":{"line":256,"column":113},"end":{"line":269,"column":7}},"line":256},"47":{"name":"getUpdateNameTransaction","decl":{"start":{"line":271,"column":15},"end":{"line":271,"column":39}},"loc":{"start":{"line":271,"column":61},"end":{"line":273,"column":7}},"line":271},"48":{"name":"(anonymous_48)","decl":{"start":{"line":283,"column":11},"end":{"line":283,"column":12}},"loc":{"start":{"line":283,"column":23},"end":{"line":338,"column":5}},"line":283},"49":{"name":"(anonymous_49)","decl":{"start":{"line":284,"column":40},"end":{"line":284,"column":41}},"loc":{"start":{"line":284,"column":64},"end":{"line":331,"column":7}},"line":284},"50":{"name":"(anonymous_50)","decl":{"start":{"line":292,"column":34},"end":{"line":292,"column":35}},"loc":{"start":{"line":292,"column":52},"end":{"line":294,"column":11}},"line":292},"51":{"name":"(anonymous_51)","decl":{"start":{"line":323,"column":51},"end":{"line":323,"column":52}},"loc":{"start":{"line":323,"column":68},"end":{"line":330,"column":9}},"line":323},"52":{"name":"getNames","decl":{"start":{"line":333,"column":15},"end":{"line":333,"column":23}},"loc":{"start":{"line":333,"column":30},"end":{"line":335,"column":7}},"line":333},"53":{"name":"(anonymous_53)","decl":{"start":{"line":346,"column":11},"end":{"line":346,"column":12}},"loc":{"start":{"line":346,"column":23},"end":{"line":370,"column":5}},"line":346},"54":{"name":"(anonymous_54)","decl":{"start":{"line":347,"column":44},"end":{"line":347,"column":45}},"loc":{"start":{"line":347,"column":85},"end":{"line":363,"column":7}},"line":347},"55":{"name":"getOrAddName","decl":{"start":{"line":365,"column":15},"end":{"line":365,"column":27}},"loc":{"start":{"line":365,"column":46},"end":{"line":367,"column":7}},"line":365},"56":{"name":"(anonymous_56)","decl":{"start":{"line":377,"column":11},"end":{"line":377,"column":12}},"loc":{"start":{"line":377,"column":23},"end":{"line":400,"column":5}},"line":377},"57":{"name":"(anonymous_57)","decl":{"start":{"line":378,"column":40},"end":{"line":378,"column":41}},"loc":{"start":{"line":378,"column":72},"end":{"line":393,"column":7}},"line":378},"58":{"name":"loadName","decl":{"start":{"line":395,"column":15},"end":{"line":395,"column":23}},"loc":{"start":{"line":395,"column":36},"end":{"line":397,"column":7}},"line":395},"59":{"name":"moveNameToAccount","decl":{"start":{"line":403,"column":20},"end":{"line":403,"column":37}},"loc":{"start":{"line":403,"column":76},"end":{"line":427,"column":5}},"line":403},"60":{"name":"(anonymous_60)","decl":{"start":{"line":415,"column":45},"end":{"line":415,"column":46}},"loc":{"start":{"line":415,"column":62},"end":{"line":420,"column":7}},"line":415},"61":{"name":"(anonymous_61)","decl":{"start":{"line":421,"column":45},"end":{"line":421,"column":46}},"loc":{"start":{"line":421,"column":62},"end":{"line":426,"column":7}},"line":421},"62":{"name":"(anonymous_62)","decl":{"start":{"line":435,"column":11},"end":{"line":435,"column":12}},"loc":{"start":{"line":435,"column":23},"end":{"line":474,"column":5}},"line":435},"63":{"name":"(anonymous_63)","decl":{"start":{"line":436,"column":42},"end":{"line":436,"column":43}},"loc":{"start":{"line":436,"column":72},"end":{"line":467,"column":7}},"line":436},"64":{"name":"updateName","decl":{"start":{"line":469,"column":15},"end":{"line":469,"column":25}},"loc":{"start":{"line":469,"column":38},"end":{"line":471,"column":7}},"line":469}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"type":"if","locations":[{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},{"start":{"line":14,"column":24},"end":{"line":14,"column":328}}],"line":14},"1":{"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":95}},"type":"binary-expr","locations":[{"start":{"line":14,"column":28},"end":{"line":14,"column":56}},{"start":{"line":14,"column":60},"end":{"line":14,"column":95}}],"line":14},"2":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":322}},"type":"cond-expr","locations":[{"start":{"line":14,"column":301},"end":{"line":14,"column":309}},{"start":{"line":14,"column":312},"end":{"line":14,"column":322}}],"line":14},"3":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":298}},"type":"binary-expr","locations":[{"start":{"line":14,"column":205},"end":{"line":14,"column":208}},{"start":{"line":14,"column":212},"end":{"line":14,"column":240}},{"start":{"line":14,"column":244},"end":{"line":14,"column":270}},{"start":{"line":14,"column":274},"end":{"line":14,"column":298}}],"line":14},"4":{"loc":{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},"type":"if","locations":[{"start":{"line":16,"column":75},"end":{"line":16,"column":326}},{"start":{"line":16,"column":75},"end":{"line":16,"column":326}}],"line":16},"5":{"loc":{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},"type":"if","locations":[{"start":{"line":16,"column":163},"end":{"line":16,"column":292}},{"start":{"line":16,"column":163},"end":{"line":16,"column":292}}],"line":16},"6":{"loc":{"start":{"line":18,"column":91},"end":{"line":18,"column":131}},"type":"cond-expr","locations":[{"start":{"line":18,"column":114},"end":{"line":18,"column":126}},{"start":{"line":18,"column":129},"end":{"line":18,"column":131}}],"line":18},"7":{"loc":{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},"type":"if","locations":[{"start":{"line":18,"column":133},"end":{"line":18,"column":515}},{"start":{"line":18,"column":133},"end":{"line":18,"column":515}}],"line":18},"8":{"loc":{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},"type":"if","locations":[{"start":{"line":18,"column":255},"end":{"line":18,"column":515}},{"start":{"line":18,"column":255},"end":{"line":18,"column":515}}],"line":18},"9":{"loc":{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},"type":"if","locations":[{"start":{"line":20,"column":176},"end":{"line":20,"column":263}},{"start":{"line":20,"column":176},"end":{"line":20,"column":263}}],"line":20},"10":{"loc":{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},"type":"if","locations":[{"start":{"line":24,"column":50},"end":{"line":24,"column":151}},{"start":{"line":24,"column":50},"end":{"line":24,"column":151}}],"line":24},"11":{"loc":{"start":{"line":26,"column":136},"end":{"line":26,"column":166}},"type":"binary-expr","locations":[{"start":{"line":26,"column":136},"end":{"line":26,"column":157}},{"start":{"line":26,"column":161},"end":{"line":26,"column":166}}],"line":26},"12":{"loc":{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},"type":"if","locations":[{"start":{"line":26,"column":200},"end":{"line":26,"column":254}},{"start":{"line":26,"column":200},"end":{"line":26,"column":254}}],"line":26},"13":{"loc":{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},"type":"if","locations":[{"start":{"line":28,"column":62},"end":{"line":28,"column":131}},{"start":{"line":28,"column":62},"end":{"line":28,"column":131}}],"line":28},"14":{"loc":{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},"type":"if","locations":[{"start":{"line":28,"column":132},"end":{"line":28,"column":193}},{"start":{"line":28,"column":132},"end":{"line":28,"column":193}}],"line":28},"15":{"loc":{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},"type":"if","locations":[{"start":{"line":30,"column":50},"end":{"line":30,"column":138}},{"start":{"line":30,"column":50},"end":{"line":30,"column":138}}],"line":30},"16":{"loc":{"start":{"line":30,"column":54},"end":{"line":30,"column":120}},"type":"binary-expr","locations":[{"start":{"line":30,"column":54},"end":{"line":30,"column":58}},{"start":{"line":30,"column":63},"end":{"line":30,"column":89}},{"start":{"line":30,"column":93},"end":{"line":30,"column":119}}],"line":30},"17":{"loc":{"start":{"line":32,"column":48},"end":{"line":32,"column":175}},"type":"cond-expr","locations":[{"start":{"line":32,"column":72},"end":{"line":32,"column":93}},{"start":{"line":32,"column":96},"end":{"line":32,"column":175}}],"line":32},"18":{"loc":{"start":{"line":32,"column":133},"end":{"line":32,"column":172}},"type":"binary-expr","locations":[{"start":{"line":32,"column":133},"end":{"line":32,"column":144}},{"start":{"line":32,"column":148},"end":{"line":32,"column":172}}],"line":32},"19":{"loc":{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},"type":"if","locations":[{"start":{"line":34,"column":40},"end":{"line":34,"column":151}},{"start":{"line":34,"column":40},"end":{"line":34,"column":151}}],"line":34},"20":{"loc":{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},"type":"if","locations":[{"start":{"line":36,"column":43},"end":{"line":36,"column":182}},{"start":{"line":36,"column":43},"end":{"line":36,"column":182}}],"line":36},"21":{"loc":{"start":{"line":36,"column":47},"end":{"line":36,"column":102}},"type":"binary-expr","locations":[{"start":{"line":36,"column":47},"end":{"line":36,"column":79}},{"start":{"line":36,"column":83},"end":{"line":36,"column":102}}],"line":36},"22":{"loc":{"start":{"line":36,"column":218},"end":{"line":36,"column":252}},"type":"binary-expr","locations":[{"start":{"line":36,"column":218},"end":{"line":36,"column":228}},{"start":{"line":36,"column":232},"end":{"line":36,"column":252}}],"line":36},"23":{"loc":{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},"type":"if","locations":[{"start":{"line":36,"column":329},"end":{"line":36,"column":383}},{"start":{"line":36,"column":329},"end":{"line":36,"column":383}}],"line":36},"24":{"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":137}},"type":"binary-expr","locations":[{"start":{"line":38,"column":51},"end":{"line":38,"column":72}},{"start":{"line":38,"column":76},"end":{"line":38,"column":137}}],"line":38},"25":{"loc":{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},"type":"if","locations":[{"start":{"line":40,"column":44},"end":{"line":40,"column":195}},{"start":{"line":40,"column":44},"end":{"line":40,"column":195}}],"line":40},"26":{"loc":{"start":{"line":77,"column":22},"end":{"line":77,"column":95}},"type":"cond-expr","locations":[{"start":{"line":77,"column":75},"end":{"line":77,"column":87}},{"start":{"line":77,"column":90},"end":{"line":77,"column":95}}],"line":77},"27":{"loc":{"start":{"line":77,"column":22},"end":{"line":77,"column":72}},"type":"binary-expr","locations":[{"start":{"line":77,"column":22},"end":{"line":77,"column":42}},{"start":{"line":77,"column":46},"end":{"line":77,"column":72}}],"line":77},"28":{"loc":{"start":{"line":79,"column":8},"end":{"line":83,"column":9}},"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":83,"column":9}},{"start":{"line":79,"column":8},"end":{"line":83,"column":9}}],"line":79},"29":{"loc":{"start":{"line":79,"column":12},"end":{"line":79,"column":60}},"type":"binary-expr","locations":[{"start":{"line":79,"column":12},"end":{"line":79,"column":49}},{"start":{"line":79,"column":53},"end":{"line":79,"column":60}}],"line":79},"30":{"loc":{"start":{"line":102,"column":20},"end":{"line":102,"column":107}},"type":"cond-expr","locations":[{"start":{"line":102,"column":62},"end":{"line":102,"column":78}},{"start":{"line":102,"column":81},"end":{"line":102,"column":107}}],"line":102},"31":{"loc":{"start":{"line":113,"column":6},"end":{"line":115,"column":7}},"type":"if","locations":[{"start":{"line":113,"column":6},"end":{"line":115,"column":7}},{"start":{"line":113,"column":6},"end":{"line":115,"column":7}}],"line":113},"32":{"loc":{"start":{"line":135,"column":6},"end":{"line":137,"column":7}},"type":"if","locations":[{"start":{"line":135,"column":6},"end":{"line":137,"column":7}},{"start":{"line":135,"column":6},"end":{"line":137,"column":7}}],"line":135},"33":{"loc":{"start":{"line":152,"column":8},"end":{"line":152,"column":86}},"type":"binary-expr","locations":[{"start":{"line":152,"column":8},"end":{"line":152,"column":31}},{"start":{"line":152,"column":35},"end":{"line":152,"column":86}}],"line":152},"34":{"loc":{"start":{"line":166,"column":24},"end":{"line":166,"column":96}},"type":"cond-expr","locations":[{"start":{"line":166,"column":77},"end":{"line":166,"column":89}},{"start":{"line":166,"column":92},"end":{"line":166,"column":96}}],"line":166},"35":{"loc":{"start":{"line":166,"column":24},"end":{"line":166,"column":74}},"type":"binary-expr","locations":[{"start":{"line":166,"column":24},"end":{"line":166,"column":44}},{"start":{"line":166,"column":48},"end":{"line":166,"column":74}}],"line":166},"36":{"loc":{"start":{"line":174,"column":8},"end":{"line":177,"column":9}},"type":"if","locations":[{"start":{"line":174,"column":8},"end":{"line":177,"column":9}},{"start":{"line":174,"column":8},"end":{"line":177,"column":9}}],"line":174},"37":{"loc":{"start":{"line":179,"column":8},"end":{"line":183,"column":9}},"type":"if","locations":[{"start":{"line":179,"column":8},"end":{"line":183,"column":9}},{"start":{"line":179,"column":8},"end":{"line":183,"column":9}}],"line":179},"38":{"loc":{"start":{"line":179,"column":12},"end":{"line":179,"column":46}},"type":"binary-expr","locations":[{"start":{"line":179,"column":12},"end":{"line":179,"column":33}},{"start":{"line":179,"column":37},"end":{"line":179,"column":46}}],"line":179},"39":{"loc":{"start":{"line":210,"column":8},"end":{"line":212,"column":9}},"type":"if","locations":[{"start":{"line":210,"column":8},"end":{"line":212,"column":9}},{"start":{"line":210,"column":8},"end":{"line":212,"column":9}}],"line":210},"40":{"loc":{"start":{"line":290,"column":8},"end":{"line":321,"column":9}},"type":"if","locations":[{"start":{"line":290,"column":8},"end":{"line":321,"column":9}},{"start":{"line":290,"column":8},"end":{"line":321,"column":9}}],"line":290},"41":{"loc":{"start":{"line":290,"column":12},"end":{"line":290,"column":58}},"type":"binary-expr","locations":[{"start":{"line":290,"column":12},"end":{"line":290,"column":33}},{"start":{"line":290,"column":37},"end":{"line":290,"column":58}}],"line":290},"42":{"loc":{"start":{"line":309,"column":14},"end":{"line":311,"column":15}},"type":"if","locations":[{"start":{"line":309,"column":14},"end":{"line":311,"column":15}},{"start":{"line":309,"column":14},"end":{"line":311,"column":15}}],"line":309},"43":{"loc":{"start":{"line":309,"column":18},"end":{"line":309,"column":75}},"type":"binary-expr","locations":[{"start":{"line":309,"column":18},"end":{"line":309,"column":44}},{"start":{"line":309,"column":48},"end":{"line":309,"column":75}}],"line":309},"44":{"loc":{"start":{"line":313,"column":14},"end":{"line":315,"column":15}},"type":"if","locations":[{"start":{"line":313,"column":14},"end":{"line":315,"column":15}},{"start":{"line":313,"column":14},"end":{"line":315,"column":15}}],"line":313},"45":{"loc":{"start":{"line":356,"column":8},"end":{"line":360,"column":9}},"type":"if","locations":[{"start":{"line":356,"column":8},"end":{"line":360,"column":9}},{"start":{"line":356,"column":8},"end":{"line":360,"column":9}}],"line":356},"46":{"loc":{"start":{"line":379,"column":8},"end":{"line":385,"column":9}},"type":"if","locations":[{"start":{"line":379,"column":8},"end":{"line":385,"column":9}},{"start":{"line":379,"column":8},"end":{"line":385,"column":9}}],"line":379},"47":{"loc":{"start":{"line":409,"column":6},"end":{"line":411,"column":7}},"type":"if","locations":[{"start":{"line":409,"column":6},"end":{"line":411,"column":7}},{"start":{"line":409,"column":6},"end":{"line":411,"column":7}}],"line":409},"48":{"loc":{"start":{"line":459,"column":8},"end":{"line":462,"column":9}},"type":"if","locations":[{"start":{"line":459,"column":8},"end":{"line":462,"column":9}},{"start":{"line":459,"column":8},"end":{"line":462,"column":9}}],"line":459},"49":{"loc":{"start":{"line":465,"column":8},"end":{"line":465,"column":85}},"type":"binary-expr","locations":[{"start":{"line":465,"column":8},"end":{"line":465,"column":29}},{"start":{"line":465,"column":33},"end":{"line":465,"column":85}}],"line":465}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":6,"8":0,"9":0,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":9,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":6,"47":0,"48":1,"49":1,"50":13,"51":13,"52":13,"53":13,"54":13,"55":13,"56":1,"57":1,"58":1,"59":0,"60":1,"61":6,"62":6,"63":0,"64":1,"65":0,"66":1,"67":24,"68":0,"69":24,"70":1,"71":0,"72":1,"73":1,"74":1,"75":1,"76":0,"77":0,"78":1,"79":24,"80":0,"81":24,"82":24,"83":1,"84":1,"85":6,"86":6,"87":6,"88":6,"89":6,"90":6,"91":6,"92":6,"93":1,"94":1,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":1,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":1,"139":1,"140":0,"141":0,"142":0,"143":0,"144":1,"145":1,"146":0,"147":0,"148":0,"149":1,"150":1,"151":0,"152":0,"153":0,"154":1,"155":1,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":1,"185":1,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":1,"195":1,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":1,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":1,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":1,"235":1,"236":1},"f":{"0":1,"1":6,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":9,"10":0,"11":0,"12":0,"13":0,"14":6,"15":1,"16":1,"17":6,"18":1,"19":0,"20":24,"21":1,"22":1,"23":0,"24":24,"25":1,"26":6,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":1,"43":0,"44":0,"45":1,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1,"63":0,"64":0},"b":{"0":[1,0],"1":[1,1],"2":[0,0],"3":[0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,6],"11":[13,13],"12":[13,0],"13":[1,0],"14":[0,1],"15":[6,0],"16":[6,6,0],"17":[1,0],"18":[0,0],"19":[0,24],"20":[0,1],"21":[1,0],"22":[1,1],"23":[1,0],"24":[1,0],"25":[0,24],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0]},"inputSourceMap":{"version":3,"sources":["name-manager.ts"],"names":["NameManager","wallet","HashMap","chainId","noCache","namePriceByChainId","has","client","getClient","chainInfo","getChainInfo","set","nameprice","get","nameSpec","defaultChainId","name","accountSpec","completeAccountSpec","accountManager","getCompleteAccountSpec","namesByAccount","extraData","names","getNamesMap","completeNameSpec","Error","namePromise","loadName","accountKey","then","emit","Promise","all","values","datastore","getIndex","put","fromStore","index","clear","from","address","to","amount","getNamePrice","toString","payload","JSON","stringify","Name","Args","limit","type","TxTypes","Governance","newDestination","namesMap","loadedFromStore","records","Array","getAll","map","record","key","data","getCompleteNameSpec","spec","resolve","nameObj","addName","e","getDefaultData","oldAccountSpec","newAccountSpec","oldNamesMap","newNamesMap","getOrAddName","blockchain","bestHeight","nameInfo","getNameInfo","destination","owner","lastSync","blockno","timestamp","Date","oldAccountKey","moveNameToAccount","PausableTypedEventEmitter"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/managers","sourcesContent":["import { Wallet } from '../wallet';\nimport { Name, NameSpec, NameData, CompleteNameSpec } from '../models/name';\nimport { AccountSpec, CompleteAccountSpec } from '../models/account';\nimport { serializeNameSpec, serializeAccountSpec, deserializeAccountSpec, HashMap } from '../utils';\nimport { PausableTypedEventEmitter } from '../utils';\nimport { TxTypes, Address, Amount } from '@herajs/common';\nimport { TxBody } from '../models/transaction';\n\nexport interface Events {\n    'add': Name;\n    'update': Name;\n    'remove': NameSpec;\n    'updateAccount': { accountSpec: AccountSpec; names: Name[] };\n}\n\ntype NamesByKey = HashMap<CompleteNameSpec, Promise<Name>>;\ntype NamesByAccount = HashMap<CompleteAccountSpec, NamesByKey>;\n\n/**\n * AccountManager manages and tracks single accounts\n */\nexport default class NameManager extends PausableTypedEventEmitter<Events> {\n    public wallet: Wallet;\n    private namesByAccount: NamesByAccount = new HashMap();\n    private loadedFromStore = false;\n    private namePriceByChainId: HashMap<string, Amount> = new HashMap();\n\n    constructor(wallet: Wallet) {\n        super();\n        this.wallet = wallet;\n    }\n\n    /**\n     * Get name price (uses cache if noCache is not true)\n     */\n    async getNamePrice(chainId: string, noCache = false): Promise<Amount> {\n        if (!this.namePriceByChainId.has(chainId) || noCache) {\n            const client = this.wallet.getClient(chainId);\n            const chainInfo = await client.getChainInfo();\n            this.namePriceByChainId.set(chainId, chainInfo.nameprice);\n        }\n        return this.namePriceByChainId.get(chainId) as Amount;\n    }\n\n    /**\n     * Completes nameSpec with chainId in case chainId is undefined.\n     * @param nameSpec possibly incomplete spec\n     */\n    getCompleteNameSpec(nameSpec: NameSpec): CompleteNameSpec {\n        const chainId = typeof nameSpec.chainId !== 'undefined' ? nameSpec.chainId : this.wallet.defaultChainId;\n        return {\n            name: nameSpec.name,\n            chainId\n        };\n    }\n\n    private getNamesMap(accountSpec: CompleteAccountSpec): NamesByKey {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        if (!this.namesByAccount.has(completeAccountSpec)) {\n            this.namesByAccount.set(completeAccountSpec, new HashMap());\n        }\n        return this.namesByAccount.get(completeAccountSpec) as NamesByKey;\n    }\n\n    /**\n     * Adds name to manager and datastore.\n     */\n    addName(accountSpec: AccountSpec, name: string, extraData?: Partial<NameData>): Promise<Name> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        const names = this.getNamesMap(completeAccountSpec);\n        const completeNameSpec = { name, chainId: completeAccountSpec.chainId };\n        if (names.has(completeNameSpec)) {\n            throw new Error('Name has already been added.');\n        }\n        const namePromise = this.loadName(completeNameSpec, {\n            ...extraData,\n            accountKey: serializeAccountSpec(completeAccountSpec),\n        });\n        names.set(completeNameSpec, namePromise);\n        namePromise.then(name => {\n            this.emit('add', name);\n            Promise.all(names.values()).then(names => {\n                this.emit('updateAccount', { accountSpec: completeAccountSpec, names });\n            });\n            this.wallet.datastore && this.wallet.datastore.getIndex('names').put(name);\n        });\n        return namePromise;\n    }\n\n    /**\n     * Removes name from manager and datastore.\n     */\n    async removeName(accountSpec: AccountSpec, name: string, fromStore = true): Promise<void> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        const names = this.getNamesMap(completeAccountSpec);\n        const completeNameSpec = { name, chainId: completeAccountSpec.chainId };\n        if (names.has(completeNameSpec)) {\n            // Remove name from local cache\n            names.delete(completeNameSpec);\n        }\n        if (this.wallet.datastore && fromStore) {\n            // Remove account from store\n            const index = this.wallet.datastore.getIndex('names');\n            await index.delete(serializeNameSpec(completeNameSpec));\n        }\n        this.emit('remove', completeNameSpec);\n        Promise.all(names.values()).then(names => {\n            this.emit('updateAccount', { accountSpec: completeAccountSpec, names });\n        });\n    }\n\n    /**\n     * Remove all names from manager and datastore.\n     */\n    async clearNames(): Promise<void> {\n        this.namesByAccount.clear();\n        if (this.wallet.datastore) {\n            await this.wallet.datastore.getIndex('names').clear();\n        }\n    }\n\n    /**\n     * Generate a partial tx body for a Name Create transaction\n     */\n    async getCreateNameTransaction(\n        accountSpec: CompleteAccountSpec | AccountSpec,\n        name: string,\n        extraData?: Partial<TxBody>,\n    ): Promise<Partial<TxBody>> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        return {\n            from: completeAccountSpec.address,\n            to: 'aergo.name',\n            amount: (await this.getNamePrice(completeAccountSpec.chainId)).toString(),\n            payload: JSON.stringify({ Name: 'v1createName', Args: [name] }),\n            limit: 0,\n            type: TxTypes.Governance,\n            ...extraData,\n        };\n    }\n\n    /**\n     * Generate a partial tx body for a Name Create transaction\n     */\n    async getUpdateNameTransaction(\n        accountSpec: CompleteAccountSpec | AccountSpec,\n        name: string,\n        newDestination: string | Address,\n        extraData?: Partial<TxBody>,\n    ): Promise<Partial<TxBody>> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        return {\n            from: completeAccountSpec.address,\n            to: 'aergo.name',\n            amount: (await this.getNamePrice(completeAccountSpec.chainId)).toString(),\n            payload: JSON.stringify({ Name: 'v1updateName', Args: [name, `${newDestination}`] }),\n            limit: 0,\n            type: TxTypes.Governance,\n            ...extraData,\n        };\n    }\n\n    /**\n     * Returns list of all accounts. Loads data persisted in datastore.\n     */\n    async getNames(accountSpec: AccountSpec): Promise<Name[]> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        const namesMap = this.getNamesMap(completeAccountSpec);\n        if (!this.loadedFromStore && this.wallet.datastore) {\n            const records = Array.from(await this.wallet.datastore.getIndex('names').getAll(serializeAccountSpec(completeAccountSpec), 'accountKey'));\n            const names = records.map(record => new Name(record.key, record.data as NameData));\n            for (const name of names) {\n                namesMap.set(this.getCompleteNameSpec(name.data.spec), Promise.resolve(name));\n            }\n            this.loadedFromStore = true;\n            return names;\n        }\n        return Promise.all(namesMap.values()).then(names => {\n            this.emit('updateAccount', { accountSpec: completeAccountSpec, names });\n            return names;\n        });\n    }\n\n    /**\n     * Gets a name and adds it to the manager if not existing.\n     * @param nameSpec \n     */\n    async getOrAddName(accountSpec: CompleteAccountSpec | AccountSpec, name: string, extraData?: Partial<NameData>): Promise<Name> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        const namesMap = this.getNamesMap(completeAccountSpec);\n        const completeNameSpec = { name, chainId: completeAccountSpec.chainId };\n        let nameObj: Name;\n        if (!namesMap.has(completeNameSpec)) {\n            nameObj = await this.addName(accountSpec, name, extraData);\n        } else {\n            nameObj = await namesMap.get(completeNameSpec) as Name;\n        }\n        return nameObj;\n    }\n\n    /**\n     * Initializes account from datastore or with initial values.\n     */\n    async loadName(nameSpec: CompleteNameSpec, extraData?: Partial<NameData>): Promise<Name> {\n        if (this.wallet.datastore) {\n            try {\n                const record = await this.wallet.datastore.getIndex('names').get(serializeNameSpec(nameSpec));\n                return new Name(record.key, record.data as NameData);\n            } catch (e) {\n                // not found\n            }\n        }\n        return new Name(serializeNameSpec(nameSpec), Name.getDefaultData({\n            spec: {\n                chainId: nameSpec.chainId,\n                name: nameSpec.name,\n            },\n            ...extraData,\n        }));\n    }\n\n    moveNameToAccount(oldAccountSpec: CompleteAccountSpec, newAccountSpec: CompleteAccountSpec, name: Name): void {\n        const nameSpec = this.getCompleteNameSpec(name.data.spec);\n        const oldNamesMap = this.getNamesMap(oldAccountSpec);\n        if (oldNamesMap.has(nameSpec)) {\n            oldNamesMap.delete(nameSpec);\n        }\n        const newNamesMap = this.getNamesMap(newAccountSpec);\n        newNamesMap.set(nameSpec, Promise.resolve(name));\n        Promise.all(oldNamesMap.values()).then(names => {\n            this.emit('updateAccount', { accountSpec: oldAccountSpec, names });\n        });\n        Promise.all(newNamesMap.values()).then(names => {\n            this.emit('updateAccount', { accountSpec: newAccountSpec, names });\n        });\n    }\n\n    /**\n     * Update name info from blockchain\n     * @param nameSpec \n     */\n    async updateName(accountSpec: AccountSpec, name: string): Promise<Name> {\n        const completeAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(accountSpec);\n        const nameObj = await this.getOrAddName(completeAccountSpec, name);\n        const client = this.wallet.getClient(completeAccountSpec.chainId);\n        const { bestHeight } = await client.blockchain();\n        const nameInfo = await client.getNameInfo(name, bestHeight);\n        nameObj.data.destination = `${nameInfo.destination}`;\n        nameObj.data.owner = `${nameInfo.owner}`;\n        nameObj.data.lastSync = {\n            blockno: bestHeight,\n            timestamp: +new Date(),\n        };\n        // If the owner changed, also update the associated account and namesMap\n        const oldAccountKey = nameObj.data.accountKey;\n        const newAccountSpec = this.wallet.accountManager.getCompleteAccountSpec({ chainId: completeAccountSpec.chainId, address: `${nameInfo.owner}` });\n        nameObj.data.accountKey = serializeAccountSpec(newAccountSpec);\n        if (oldAccountKey !== nameObj.data.accountKey) {\n            const oldAccountSpec = this.wallet.accountManager.getCompleteAccountSpec(deserializeAccountSpec(oldAccountKey));\n            this.moveNameToAccount(oldAccountSpec, newAccountSpec, nameObj);\n        }\n        this.emit('update', nameObj);\n        this.wallet.datastore && this.wallet.datastore.getIndex('names').put(nameObj);\n        return nameObj;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"81a701c89d3db658974a1dbdfafb5744dfddbb64","contentHash":"f1e4325c827844ae0478de15ec790da5d39546572431da9d8d4eb892f0bc9d4e"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/name.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models/name.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":22}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":24},"end":{"line":10,"column":328}},"4":{"start":{"line":10,"column":99},"end":{"line":10,"column":154}},"5":{"start":{"line":10,"column":133},"end":{"line":10,"column":151}},"6":{"start":{"line":10,"column":164},"end":{"line":10,"column":326}},"7":{"start":{"line":10,"column":198},"end":{"line":10,"column":323}},"8":{"start":{"line":10,"column":329},"end":{"line":10,"column":349}},"9":{"start":{"line":12,"column":54},"end":{"line":12,"column":73}},"10":{"start":{"line":12,"column":75},"end":{"line":12,"column":326}},"11":{"start":{"line":12,"column":125},"end":{"line":12,"column":161}},"12":{"start":{"line":12,"column":163},"end":{"line":12,"column":292}},"13":{"start":{"line":12,"column":183},"end":{"line":12,"column":292}},"14":{"start":{"line":12,"column":225},"end":{"line":12,"column":288}},"15":{"start":{"line":12,"column":293},"end":{"line":12,"column":324}},"16":{"start":{"line":12,"column":327},"end":{"line":12,"column":339}},"17":{"start":{"line":14,"column":33},"end":{"line":14,"column":517}},"18":{"start":{"line":14,"column":46},"end":{"line":14,"column":47}},"19":{"start":{"line":14,"column":91},"end":{"line":14,"column":131}},"20":{"start":{"line":14,"column":133},"end":{"line":14,"column":515}},"21":{"start":{"line":14,"column":146},"end":{"line":14,"column":247}},"22":{"start":{"line":14,"column":201},"end":{"line":14,"column":243}},"23":{"start":{"line":14,"column":255},"end":{"line":14,"column":515}},"24":{"start":{"line":14,"column":295},"end":{"line":14,"column":369}},"25":{"start":{"line":14,"column":379},"end":{"line":14,"column":513}},"26":{"start":{"line":14,"column":428},"end":{"line":14,"column":509}},"27":{"start":{"line":14,"column":518},"end":{"line":14,"column":532}},"28":{"start":{"line":16,"column":44},"end":{"line":16,"column":195}},"29":{"start":{"line":16,"column":62},"end":{"line":16,"column":166}},"30":{"start":{"line":16,"column":176},"end":{"line":16,"column":193}},"31":{"start":{"line":16,"column":196},"end":{"line":16,"column":207}},"32":{"start":{"line":18,"column":50},"end":{"line":18,"column":151}},"33":{"start":{"line":18,"column":92},"end":{"line":18,"column":149}},"34":{"start":{"line":20,"column":44},"end":{"line":20,"column":315}},"35":{"start":{"line":20,"column":57},"end":{"line":20,"column":58}},"36":{"start":{"line":20,"column":102},"end":{"line":20,"column":110}},"37":{"start":{"line":20,"column":112},"end":{"line":20,"column":167}},"38":{"start":{"line":20,"column":168},"end":{"line":20,"column":199}},"39":{"start":{"line":20,"column":200},"end":{"line":20,"column":254}},"40":{"start":{"line":20,"column":227},"end":{"line":20,"column":254}},"41":{"start":{"line":20,"column":255},"end":{"line":20,"column":313}},"42":{"start":{"line":22,"column":62},"end":{"line":22,"column":131}},"43":{"start":{"line":22,"column":78},"end":{"line":22,"column":131}},"44":{"start":{"line":22,"column":132},"end":{"line":22,"column":193}},"45":{"start":{"line":22,"column":149},"end":{"line":22,"column":193}},"46":{"start":{"line":22,"column":194},"end":{"line":22,"column":213}},"47":{"start":{"line":24,"column":50},"end":{"line":24,"column":138}},"48":{"start":{"line":24,"column":124},"end":{"line":24,"column":136}},"49":{"start":{"line":24,"column":139},"end":{"line":24,"column":175}},"50":{"start":{"line":26,"column":40},"end":{"line":26,"column":151}},"51":{"start":{"line":26,"column":63},"end":{"line":26,"column":149}},"52":{"start":{"line":26,"column":152},"end":{"line":26,"column":164}},"53":{"start":{"line":28,"column":30},"end":{"line":28,"column":176}},"54":{"start":{"line":28,"column":126},"end":{"line":28,"column":173}},"55":{"start":{"line":28,"column":177},"end":{"line":28,"column":203}},"56":{"start":{"line":30,"column":43},"end":{"line":30,"column":182}},"57":{"start":{"line":30,"column":106},"end":{"line":30,"column":180}},"58":{"start":{"line":30,"column":183},"end":{"line":30,"column":328}},"59":{"start":{"line":30,"column":329},"end":{"line":30,"column":383}},"60":{"start":{"line":30,"column":345},"end":{"line":30,"column":383}},"61":{"start":{"line":32,"column":33},"end":{"line":32,"column":138}},"62":{"start":{"line":32,"column":109},"end":{"line":32,"column":125}},"63":{"start":{"line":32,"column":126},"end":{"line":32,"column":135}},"64":{"start":{"line":32,"column":139},"end":{"line":32,"column":168}},"65":{"start":{"line":36,"column":0},"end":{"line":63,"column":17}},"66":{"start":{"line":37,"column":2},"end":{"line":37,"column":27}},"67":{"start":{"line":40,"column":4},"end":{"line":40,"column":32}},"68":{"start":{"line":42,"column":4},"end":{"line":42,"column":90}},"69":{"start":{"line":45,"column":2},"end":{"line":60,"column":6}},"70":{"start":{"line":48,"column":6},"end":{"line":58,"column":20}},"71":{"start":{"line":62,"column":2},"end":{"line":62,"column":14}},"72":{"start":{"line":65,"column":0},"end":{"line":65,"column":20}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":16}},"loc":{"start":{"line":10,"column":22},"end":{"line":10,"column":351}},"line":10},"1":{"name":"_typeof","decl":{"start":{"line":10,"column":118},"end":{"line":10,"column":125}},"loc":{"start":{"line":10,"column":131},"end":{"line":10,"column":153}},"line":10},"2":{"name":"_typeof","decl":{"start":{"line":10,"column":183},"end":{"line":10,"column":190}},"loc":{"start":{"line":10,"column":196},"end":{"line":10,"column":325}},"line":10},"3":{"name":"ownKeys","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":16}},"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":341}},"line":12},"4":{"name":"(anonymous_4)","decl":{"start":{"line":12,"column":208},"end":{"line":12,"column":209}},"loc":{"start":{"line":12,"column":223},"end":{"line":12,"column":290}},"line":12},"5":{"name":"_objectSpread","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":22}},"loc":{"start":{"line":14,"column":31},"end":{"line":14,"column":534}},"line":14},"6":{"name":"(anonymous_6)","decl":{"start":{"line":14,"column":184},"end":{"line":14,"column":185}},"loc":{"start":{"line":14,"column":199},"end":{"line":14,"column":245}},"line":14},"7":{"name":"(anonymous_7)","decl":{"start":{"line":14,"column":411},"end":{"line":14,"column":412}},"loc":{"start":{"line":14,"column":426},"end":{"line":14,"column":511}},"line":14},"8":{"name":"_defineProperty","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":24}},"loc":{"start":{"line":16,"column":42},"end":{"line":16,"column":209}},"line":16},"9":{"name":"_classCallCheck","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":24}},"loc":{"start":{"line":18,"column":48},"end":{"line":18,"column":153}},"line":18},"10":{"name":"_defineProperties","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":26}},"loc":{"start":{"line":20,"column":42},"end":{"line":20,"column":317}},"line":20},"11":{"name":"_createClass","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":21}},"loc":{"start":{"line":22,"column":60},"end":{"line":22,"column":215}},"line":22},"12":{"name":"_possibleConstructorReturn","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":35}},"loc":{"start":{"line":24,"column":48},"end":{"line":24,"column":177}},"line":24},"13":{"name":"_assertThisInitialized","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":31}},"loc":{"start":{"line":26,"column":38},"end":{"line":26,"column":166}},"line":26},"14":{"name":"_getPrototypeOf","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":24}},"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":205}},"line":28},"15":{"name":"_getPrototypeOf","decl":{"start":{"line":28,"column":105},"end":{"line":28,"column":120}},"loc":{"start":{"line":28,"column":124},"end":{"line":28,"column":175}},"line":28},"16":{"name":"_inherits","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":18}},"loc":{"start":{"line":30,"column":41},"end":{"line":30,"column":385}},"line":30},"17":{"name":"_setPrototypeOf","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":24}},"loc":{"start":{"line":32,"column":31},"end":{"line":32,"column":170}},"line":32},"18":{"name":"_setPrototypeOf","decl":{"start":{"line":32,"column":85},"end":{"line":32,"column":100}},"loc":{"start":{"line":32,"column":107},"end":{"line":32,"column":137}},"line":32},"19":{"name":"(anonymous_19)","decl":{"start":{"line":36,"column":0},"end":{"line":36,"column":1}},"loc":{"start":{"line":36,"column":19},"end":{"line":63,"column":1}},"line":36},"20":{"name":"Name","decl":{"start":{"line":39,"column":11},"end":{"line":39,"column":15}},"loc":{"start":{"line":39,"column":18},"end":{"line":43,"column":3}},"line":39},"21":{"name":"getDefaultData","decl":{"start":{"line":47,"column":20},"end":{"line":47,"column":34}},"loc":{"start":{"line":47,"column":46},"end":{"line":59,"column":5}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":24},"end":{"line":10,"column":328}},"type":"if","locations":[{"start":{"line":10,"column":24},"end":{"line":10,"column":328}},{"start":{"line":10,"column":24},"end":{"line":10,"column":328}}],"line":10},"1":{"loc":{"start":{"line":10,"column":28},"end":{"line":10,"column":95}},"type":"binary-expr","locations":[{"start":{"line":10,"column":28},"end":{"line":10,"column":56}},{"start":{"line":10,"column":60},"end":{"line":10,"column":95}}],"line":10},"2":{"loc":{"start":{"line":10,"column":205},"end":{"line":10,"column":322}},"type":"cond-expr","locations":[{"start":{"line":10,"column":301},"end":{"line":10,"column":309}},{"start":{"line":10,"column":312},"end":{"line":10,"column":322}}],"line":10},"3":{"loc":{"start":{"line":10,"column":205},"end":{"line":10,"column":298}},"type":"binary-expr","locations":[{"start":{"line":10,"column":205},"end":{"line":10,"column":208}},{"start":{"line":10,"column":212},"end":{"line":10,"column":240}},{"start":{"line":10,"column":244},"end":{"line":10,"column":270}},{"start":{"line":10,"column":274},"end":{"line":10,"column":298}}],"line":10},"4":{"loc":{"start":{"line":12,"column":75},"end":{"line":12,"column":326}},"type":"if","locations":[{"start":{"line":12,"column":75},"end":{"line":12,"column":326}},{"start":{"line":12,"column":75},"end":{"line":12,"column":326}}],"line":12},"5":{"loc":{"start":{"line":12,"column":163},"end":{"line":12,"column":292}},"type":"if","locations":[{"start":{"line":12,"column":163},"end":{"line":12,"column":292}},{"start":{"line":12,"column":163},"end":{"line":12,"column":292}}],"line":12},"6":{"loc":{"start":{"line":14,"column":91},"end":{"line":14,"column":131}},"type":"cond-expr","locations":[{"start":{"line":14,"column":114},"end":{"line":14,"column":126}},{"start":{"line":14,"column":129},"end":{"line":14,"column":131}}],"line":14},"7":{"loc":{"start":{"line":14,"column":133},"end":{"line":14,"column":515}},"type":"if","locations":[{"start":{"line":14,"column":133},"end":{"line":14,"column":515}},{"start":{"line":14,"column":133},"end":{"line":14,"column":515}}],"line":14},"8":{"loc":{"start":{"line":14,"column":255},"end":{"line":14,"column":515}},"type":"if","locations":[{"start":{"line":14,"column":255},"end":{"line":14,"column":515}},{"start":{"line":14,"column":255},"end":{"line":14,"column":515}}],"line":14},"9":{"loc":{"start":{"line":16,"column":44},"end":{"line":16,"column":195}},"type":"if","locations":[{"start":{"line":16,"column":44},"end":{"line":16,"column":195}},{"start":{"line":16,"column":44},"end":{"line":16,"column":195}}],"line":16},"10":{"loc":{"start":{"line":18,"column":50},"end":{"line":18,"column":151}},"type":"if","locations":[{"start":{"line":18,"column":50},"end":{"line":18,"column":151}},{"start":{"line":18,"column":50},"end":{"line":18,"column":151}}],"line":18},"11":{"loc":{"start":{"line":20,"column":136},"end":{"line":20,"column":166}},"type":"binary-expr","locations":[{"start":{"line":20,"column":136},"end":{"line":20,"column":157}},{"start":{"line":20,"column":161},"end":{"line":20,"column":166}}],"line":20},"12":{"loc":{"start":{"line":20,"column":200},"end":{"line":20,"column":254}},"type":"if","locations":[{"start":{"line":20,"column":200},"end":{"line":20,"column":254}},{"start":{"line":20,"column":200},"end":{"line":20,"column":254}}],"line":20},"13":{"loc":{"start":{"line":22,"column":62},"end":{"line":22,"column":131}},"type":"if","locations":[{"start":{"line":22,"column":62},"end":{"line":22,"column":131}},{"start":{"line":22,"column":62},"end":{"line":22,"column":131}}],"line":22},"14":{"loc":{"start":{"line":22,"column":132},"end":{"line":22,"column":193}},"type":"if","locations":[{"start":{"line":22,"column":132},"end":{"line":22,"column":193}},{"start":{"line":22,"column":132},"end":{"line":22,"column":193}}],"line":22},"15":{"loc":{"start":{"line":24,"column":50},"end":{"line":24,"column":138}},"type":"if","locations":[{"start":{"line":24,"column":50},"end":{"line":24,"column":138}},{"start":{"line":24,"column":50},"end":{"line":24,"column":138}}],"line":24},"16":{"loc":{"start":{"line":24,"column":54},"end":{"line":24,"column":120}},"type":"binary-expr","locations":[{"start":{"line":24,"column":54},"end":{"line":24,"column":58}},{"start":{"line":24,"column":63},"end":{"line":24,"column":89}},{"start":{"line":24,"column":93},"end":{"line":24,"column":119}}],"line":24},"17":{"loc":{"start":{"line":26,"column":40},"end":{"line":26,"column":151}},"type":"if","locations":[{"start":{"line":26,"column":40},"end":{"line":26,"column":151}},{"start":{"line":26,"column":40},"end":{"line":26,"column":151}}],"line":26},"18":{"loc":{"start":{"line":28,"column":48},"end":{"line":28,"column":175}},"type":"cond-expr","locations":[{"start":{"line":28,"column":72},"end":{"line":28,"column":93}},{"start":{"line":28,"column":96},"end":{"line":28,"column":175}}],"line":28},"19":{"loc":{"start":{"line":28,"column":133},"end":{"line":28,"column":172}},"type":"binary-expr","locations":[{"start":{"line":28,"column":133},"end":{"line":28,"column":144}},{"start":{"line":28,"column":148},"end":{"line":28,"column":172}}],"line":28},"20":{"loc":{"start":{"line":30,"column":43},"end":{"line":30,"column":182}},"type":"if","locations":[{"start":{"line":30,"column":43},"end":{"line":30,"column":182}},{"start":{"line":30,"column":43},"end":{"line":30,"column":182}}],"line":30},"21":{"loc":{"start":{"line":30,"column":47},"end":{"line":30,"column":102}},"type":"binary-expr","locations":[{"start":{"line":30,"column":47},"end":{"line":30,"column":79}},{"start":{"line":30,"column":83},"end":{"line":30,"column":102}}],"line":30},"22":{"loc":{"start":{"line":30,"column":218},"end":{"line":30,"column":252}},"type":"binary-expr","locations":[{"start":{"line":30,"column":218},"end":{"line":30,"column":228}},{"start":{"line":30,"column":232},"end":{"line":30,"column":252}}],"line":30},"23":{"loc":{"start":{"line":30,"column":329},"end":{"line":30,"column":383}},"type":"if","locations":[{"start":{"line":30,"column":329},"end":{"line":30,"column":383}},{"start":{"line":30,"column":329},"end":{"line":30,"column":383}}],"line":30},"24":{"loc":{"start":{"line":32,"column":51},"end":{"line":32,"column":137}},"type":"binary-expr","locations":[{"start":{"line":32,"column":51},"end":{"line":32,"column":72}},{"start":{"line":32,"column":76},"end":{"line":32,"column":137}}],"line":32}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":0,"44":1,"45":1,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":1,"59":1,"60":1,"61":1,"62":0,"63":0,"64":1,"65":1,"66":1,"67":0,"68":0,"69":1,"70":0,"71":1,"72":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":0,"19":1,"20":0,"21":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[1,1],"12":[1,0],"13":[0,1],"14":[1,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,1],"21":[1,0],"22":[1,1],"23":[1,0],"24":[1,0]},"inputSourceMap":{"version":3,"sources":["name.ts"],"names":["Name","extraData","spec","name","chainId","accountKey","destination","owner","lastSync","added","Date","toISOString","Record"],"mappings":";;;;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;IA0BaA,I;;;;;;;;;;;;;mCACaC,S,EAAyC;AAC3D;AACIC,QAAAA,IAAI,EAAE;AACFC,UAAAA,IAAI,EAAE,EADJ;AAEFC,UAAAA,OAAO,EAAE;AAFP,SADV;AAKIC,QAAAA,UAAU,EAAE,EALhB;AAMIC,QAAAA,WAAW,EAAE,EANjB;AAOIC,QAAAA,KAAK,EAAE,EAPX;AAQIC,QAAAA,QAAQ,EAAE,IARd;AASIC,QAAAA,KAAK,EAAE,IAAIC,IAAJ,GAAWC,WAAX;AATX,SAUOV,SAVP;AAYH;;;;EAdqBW,c","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/models","sourcesContent":["\nimport { Record, Data } from './record';\n\nexport interface NameSpec {\n    name: string;\n    chainId?: string;\n}\n\nexport interface CompleteNameSpec extends NameSpec {\n    chainId: string;\n}\n\nexport interface NameData extends Data {\n    spec: {\n        name: string;\n        chainId: string;\n    };\n    accountKey: string;\n    added: string | null;\n    destination: string;\n    owner: string;\n    lastSync: {\n        blockno: number;\n        timestamp: number;\n    } | null;\n}\n\nexport class Name extends Record<NameData> {\n    static getDefaultData(extraData?: Partial<NameData>): NameData {\n        return {\n            spec: {\n                name: '',\n                chainId: '',\n            },\n            accountKey: '',\n            destination: '',\n            owner: '',\n            lastSync: null,\n            added: new Date().toISOString(),\n            ...extraData,\n        };\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d400fd17b8772c51ea4e53c9724f4f32df7da901","contentHash":"6bcede8497247a3eb3377bcfe55c9a5dcbd6e255bd02ccfaa610d1980556fb6a"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/datasources/node-tx-scanner.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/datasources/node-tx-scanner.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":40}},"2":{"start":{"line":8,"column":18},"end":{"line":8,"column":42}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":51}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":39}},"5":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"6":{"start":{"line":14,"column":99},"end":{"line":14,"column":154}},"7":{"start":{"line":14,"column":133},"end":{"line":14,"column":151}},"8":{"start":{"line":14,"column":164},"end":{"line":14,"column":326}},"9":{"start":{"line":14,"column":198},"end":{"line":14,"column":323}},"10":{"start":{"line":14,"column":329},"end":{"line":14,"column":349}},"11":{"start":{"line":16,"column":77},"end":{"line":16,"column":175}},"12":{"start":{"line":16,"column":94},"end":{"line":16,"column":107}},"13":{"start":{"line":16,"column":121},"end":{"line":16,"column":131}},"14":{"start":{"line":16,"column":151},"end":{"line":16,"column":165}},"15":{"start":{"line":16,"column":166},"end":{"line":16,"column":173}},"16":{"start":{"line":16,"column":176},"end":{"line":16,"column":263}},"17":{"start":{"line":16,"column":193},"end":{"line":16,"column":208}},"18":{"start":{"line":16,"column":218},"end":{"line":16,"column":261}},"19":{"start":{"line":18,"column":33},"end":{"line":18,"column":387}},"20":{"start":{"line":18,"column":65},"end":{"line":18,"column":69}},"21":{"start":{"line":18,"column":78},"end":{"line":18,"column":87}},"22":{"start":{"line":18,"column":89},"end":{"line":18,"column":384}},"23":{"start":{"line":18,"column":147},"end":{"line":18,"column":167}},"24":{"start":{"line":18,"column":193},"end":{"line":18,"column":264}},"25":{"start":{"line":18,"column":290},"end":{"line":18,"column":360}},"26":{"start":{"line":18,"column":363},"end":{"line":18,"column":380}},"27":{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},"28":{"start":{"line":20,"column":92},"end":{"line":20,"column":149}},"29":{"start":{"line":22,"column":44},"end":{"line":22,"column":315}},"30":{"start":{"line":22,"column":57},"end":{"line":22,"column":58}},"31":{"start":{"line":22,"column":102},"end":{"line":22,"column":110}},"32":{"start":{"line":22,"column":112},"end":{"line":22,"column":167}},"33":{"start":{"line":22,"column":168},"end":{"line":22,"column":199}},"34":{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},"35":{"start":{"line":22,"column":227},"end":{"line":22,"column":254}},"36":{"start":{"line":22,"column":255},"end":{"line":22,"column":313}},"37":{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},"38":{"start":{"line":24,"column":78},"end":{"line":24,"column":131}},"39":{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},"40":{"start":{"line":24,"column":149},"end":{"line":24,"column":193}},"41":{"start":{"line":24,"column":194},"end":{"line":24,"column":213}},"42":{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},"43":{"start":{"line":26,"column":124},"end":{"line":26,"column":136}},"44":{"start":{"line":26,"column":139},"end":{"line":26,"column":175}},"45":{"start":{"line":28,"column":40},"end":{"line":28,"column":151}},"46":{"start":{"line":28,"column":63},"end":{"line":28,"column":149}},"47":{"start":{"line":28,"column":152},"end":{"line":28,"column":164}},"48":{"start":{"line":30,"column":30},"end":{"line":30,"column":176}},"49":{"start":{"line":30,"column":126},"end":{"line":30,"column":173}},"50":{"start":{"line":30,"column":177},"end":{"line":30,"column":203}},"51":{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},"52":{"start":{"line":32,"column":106},"end":{"line":32,"column":180}},"53":{"start":{"line":32,"column":183},"end":{"line":32,"column":328}},"54":{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},"55":{"start":{"line":32,"column":345},"end":{"line":32,"column":383}},"56":{"start":{"line":34,"column":33},"end":{"line":34,"column":138}},"57":{"start":{"line":34,"column":109},"end":{"line":34,"column":125}},"58":{"start":{"line":34,"column":126},"end":{"line":34,"column":135}},"59":{"start":{"line":34,"column":139},"end":{"line":34,"column":168}},"60":{"start":{"line":46,"column":0},"end":{"line":262,"column":25}},"61":{"start":{"line":47,"column":2},"end":{"line":47,"column":49}},"62":{"start":{"line":50,"column":4},"end":{"line":50,"column":50}},"63":{"start":{"line":52,"column":4},"end":{"line":52,"column":108}},"64":{"start":{"line":55,"column":2},"end":{"line":259,"column":6}},"65":{"start":{"line":58,"column":6},"end":{"line":141,"column":8}},"66":{"start":{"line":59,"column":8},"end":{"line":140,"column":10}},"67":{"start":{"line":62,"column":24},"end":{"line":134,"column":14}},"68":{"start":{"line":63,"column":28},"end":{"line":63,"column":40}},"69":{"start":{"line":64,"column":28},"end":{"line":64,"column":40}},"70":{"start":{"line":65,"column":26},"end":{"line":65,"column":36}},"71":{"start":{"line":66,"column":32},"end":{"line":66,"column":95}},"72":{"start":{"line":67,"column":27},"end":{"line":67,"column":64}},"73":{"start":{"line":68,"column":28},"end":{"line":68,"column":68}},"74":{"start":{"line":70,"column":26},"end":{"line":70,"column":56}},"75":{"start":{"line":71,"column":26},"end":{"line":71,"column":37}},"76":{"start":{"line":72,"column":28},"end":{"line":72,"column":41}},"77":{"start":{"line":76,"column":14},"end":{"line":78,"column":15}},"78":{"start":{"line":77,"column":16},"end":{"line":77,"column":26}},"79":{"start":{"line":80,"column":14},"end":{"line":82,"column":15}},"80":{"start":{"line":81,"column":16},"end":{"line":81,"column":26}},"81":{"start":{"line":84,"column":32},"end":{"line":84,"column":39}},"82":{"start":{"line":85,"column":28},"end":{"line":85,"column":30}},"83":{"start":{"line":88,"column":14},"end":{"line":131,"column":15}},"84":{"start":{"line":89,"column":28},"end":{"line":89,"column":64}},"85":{"start":{"line":90,"column":16},"end":{"line":90,"column":72}},"86":{"start":{"line":90,"column":63},"end":{"line":90,"column":72}},"87":{"start":{"line":92,"column":29},"end":{"line":94,"column":18}},"88":{"start":{"line":93,"column":18},"end":{"line":93,"column":81}},"89":{"start":{"line":95,"column":48},"end":{"line":95,"column":52}},"90":{"start":{"line":96,"column":40},"end":{"line":96,"column":45}},"91":{"start":{"line":97,"column":37},"end":{"line":97,"column":46}},"92":{"start":{"line":99,"column":16},"end":{"line":130,"column":17}},"93":{"start":{"line":100,"column":18},"end":{"line":115,"column":19}},"94":{"start":{"line":100,"column":39},"end":{"line":100,"column":64}},"95":{"start":{"line":101,"column":29},"end":{"line":101,"column":40}},"96":{"start":{"line":103,"column":32},"end":{"line":103,"column":98}},"97":{"start":{"line":105,"column":20},"end":{"line":105,"column":54}},"98":{"start":{"line":106,"column":20},"end":{"line":106,"column":84}},"99":{"start":{"line":107,"column":20},"end":{"line":107,"column":40}},"100":{"start":{"line":109,"column":20},"end":{"line":114,"column":21}},"101":{"start":{"line":110,"column":22},"end":{"line":110,"column":55}},"102":{"start":{"line":111,"column":22},"end":{"line":111,"column":39}},"103":{"start":{"line":113,"column":22},"end":{"line":113,"column":55}},"104":{"start":{"line":118,"column":18},"end":{"line":118,"column":43}},"105":{"start":{"line":119,"column":18},"end":{"line":119,"column":39}},"106":{"start":{"line":121,"column":18},"end":{"line":129,"column":19}},"107":{"start":{"line":122,"column":20},"end":{"line":124,"column":21}},"108":{"start":{"line":123,"column":22},"end":{"line":123,"column":44}},"109":{"start":{"line":126,"column":20},"end":{"line":128,"column":21}},"110":{"start":{"line":127,"column":22},"end":{"line":127,"column":43}},"111":{"start":{"line":133,"column":14},"end":{"line":133,"column":29}},"112":{"start":{"line":136,"column":12},"end":{"line":138,"column":14}},"113":{"start":{"line":137,"column":14},"end":{"line":137,"column":50}},"114":{"start":{"line":146,"column":6},"end":{"line":225,"column":8}},"115":{"start":{"line":147,"column":8},"end":{"line":224,"column":10}},"116":{"start":{"line":150,"column":24},"end":{"line":218,"column":14}},"117":{"start":{"line":151,"column":28},"end":{"line":151,"column":41}},"118":{"start":{"line":152,"column":28},"end":{"line":152,"column":41}},"119":{"start":{"line":153,"column":26},"end":{"line":153,"column":37}},"120":{"start":{"line":154,"column":32},"end":{"line":154,"column":95}},"121":{"start":{"line":155,"column":27},"end":{"line":155,"column":64}},"122":{"start":{"line":157,"column":14},"end":{"line":162,"column":15}},"123":{"start":{"line":158,"column":28},"end":{"line":158,"column":53}},"124":{"start":{"line":159,"column":33},"end":{"line":159,"column":49}},"125":{"start":{"line":161,"column":16},"end":{"line":161,"column":35}},"126":{"start":{"line":164,"column":31},"end":{"line":164,"column":36}},"127":{"start":{"line":165,"column":28},"end":{"line":165,"column":68}},"128":{"start":{"line":167,"column":26},"end":{"line":167,"column":56}},"129":{"start":{"line":168,"column":26},"end":{"line":168,"column":37}},"130":{"start":{"line":169,"column":28},"end":{"line":169,"column":41}},"131":{"start":{"line":173,"column":14},"end":{"line":175,"column":15}},"132":{"start":{"line":174,"column":16},"end":{"line":174,"column":26}},"133":{"start":{"line":177,"column":32},"end":{"line":177,"column":39}},"134":{"start":{"line":178,"column":28},"end":{"line":178,"column":30}},"135":{"start":{"line":180,"column":14},"end":{"line":215,"column":15}},"136":{"start":{"line":181,"column":28},"end":{"line":181,"column":64}},"137":{"start":{"line":182,"column":16},"end":{"line":182,"column":72}},"138":{"start":{"line":182,"column":63},"end":{"line":182,"column":72}},"139":{"start":{"line":184,"column":29},"end":{"line":186,"column":18}},"140":{"start":{"line":185,"column":18},"end":{"line":185,"column":81}},"141":{"start":{"line":187,"column":49},"end":{"line":187,"column":53}},"142":{"start":{"line":188,"column":41},"end":{"line":188,"column":46}},"143":{"start":{"line":189,"column":38},"end":{"line":189,"column":47}},"144":{"start":{"line":191,"column":16},"end":{"line":214,"column":17}},"145":{"start":{"line":192,"column":18},"end":{"line":200,"column":19}},"146":{"start":{"line":192,"column":40},"end":{"line":192,"column":65}},"147":{"start":{"line":193,"column":29},"end":{"line":193,"column":41}},"148":{"start":{"line":195,"column":32},"end":{"line":195,"column":98}},"149":{"start":{"line":197,"column":20},"end":{"line":197,"column":54}},"150":{"start":{"line":198,"column":20},"end":{"line":198,"column":84}},"151":{"start":{"line":199,"column":20},"end":{"line":199,"column":40}},"152":{"start":{"line":202,"column":18},"end":{"line":202,"column":44}},"153":{"start":{"line":203,"column":18},"end":{"line":203,"column":40}},"154":{"start":{"line":205,"column":18},"end":{"line":213,"column":19}},"155":{"start":{"line":206,"column":20},"end":{"line":208,"column":21}},"156":{"start":{"line":207,"column":22},"end":{"line":207,"column":45}},"157":{"start":{"line":210,"column":20},"end":{"line":212,"column":21}},"158":{"start":{"line":211,"column":22},"end":{"line":211,"column":44}},"159":{"start":{"line":217,"column":14},"end":{"line":217,"column":29}},"160":{"start":{"line":220,"column":12},"end":{"line":222,"column":14}},"161":{"start":{"line":221,"column":14},"end":{"line":221,"column":50}},"162":{"start":{"line":230,"column":18},"end":{"line":230,"column":22}},"163":{"start":{"line":232,"column":6},"end":{"line":257,"column":8}},"164":{"start":{"line":233,"column":8},"end":{"line":256,"column":10}},"165":{"start":{"line":236,"column":24},"end":{"line":250,"column":14}},"166":{"start":{"line":237,"column":32},"end":{"line":237,"column":95}},"167":{"start":{"line":239,"column":26},"end":{"line":239,"column":82}},"168":{"start":{"line":240,"column":31},"end":{"line":240,"column":47}},"169":{"start":{"line":242,"column":14},"end":{"line":249,"column":17}},"170":{"start":{"line":245,"column":16},"end":{"line":245,"column":26}},"171":{"start":{"line":252,"column":12},"end":{"line":254,"column":14}},"172":{"start":{"line":253,"column":14},"end":{"line":253,"column":50}},"173":{"start":{"line":261,"column":2},"end":{"line":261,"column":32}},"174":{"start":{"line":264,"column":0},"end":{"line":264,"column":56}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":16}},"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":351}},"line":14},"1":{"name":"_typeof","decl":{"start":{"line":14,"column":118},"end":{"line":14,"column":125}},"loc":{"start":{"line":14,"column":131},"end":{"line":14,"column":153}},"line":14},"2":{"name":"_typeof","decl":{"start":{"line":14,"column":183},"end":{"line":14,"column":190}},"loc":{"start":{"line":14,"column":196},"end":{"line":14,"column":325}},"line":14},"3":{"name":"asyncGeneratorStep","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":27}},"loc":{"start":{"line":16,"column":75},"end":{"line":16,"column":265}},"line":16},"4":{"name":"_asyncToGenerator","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":26}},"loc":{"start":{"line":18,"column":31},"end":{"line":18,"column":389}},"line":18},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":40},"end":{"line":18,"column":41}},"loc":{"start":{"line":18,"column":52},"end":{"line":18,"column":386}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":18,"column":108},"end":{"line":18,"column":109}},"loc":{"start":{"line":18,"column":135},"end":{"line":18,"column":382}},"line":18},"7":{"name":"_next","decl":{"start":{"line":18,"column":178},"end":{"line":18,"column":183}},"loc":{"start":{"line":18,"column":191},"end":{"line":18,"column":266}},"line":18},"8":{"name":"_throw","decl":{"start":{"line":18,"column":276},"end":{"line":18,"column":282}},"loc":{"start":{"line":18,"column":288},"end":{"line":18,"column":362}},"line":18},"9":{"name":"_classCallCheck","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":24}},"loc":{"start":{"line":20,"column":48},"end":{"line":20,"column":153}},"line":20},"10":{"name":"_defineProperties","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":26}},"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":317}},"line":22},"11":{"name":"_createClass","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":21}},"loc":{"start":{"line":24,"column":60},"end":{"line":24,"column":215}},"line":24},"12":{"name":"_possibleConstructorReturn","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":35}},"loc":{"start":{"line":26,"column":48},"end":{"line":26,"column":177}},"line":26},"13":{"name":"_assertThisInitialized","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":31}},"loc":{"start":{"line":28,"column":38},"end":{"line":28,"column":166}},"line":28},"14":{"name":"_getPrototypeOf","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":205}},"line":30},"15":{"name":"_getPrototypeOf","decl":{"start":{"line":30,"column":105},"end":{"line":30,"column":120}},"loc":{"start":{"line":30,"column":124},"end":{"line":30,"column":175}},"line":30},"16":{"name":"_inherits","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":18}},"loc":{"start":{"line":32,"column":41},"end":{"line":32,"column":385}},"line":32},"17":{"name":"_setPrototypeOf","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":24}},"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":170}},"line":34},"18":{"name":"_setPrototypeOf","decl":{"start":{"line":34,"column":85},"end":{"line":34,"column":100}},"loc":{"start":{"line":34,"column":107},"end":{"line":34,"column":137}},"line":34},"19":{"name":"(anonymous_19)","decl":{"start":{"line":46,"column":0},"end":{"line":46,"column":1}},"loc":{"start":{"line":46,"column":23},"end":{"line":262,"column":1}},"line":46},"20":{"name":"NodeTransactionScanner","decl":{"start":{"line":49,"column":11},"end":{"line":49,"column":33}},"loc":{"start":{"line":49,"column":36},"end":{"line":53,"column":3}},"line":49},"21":{"name":"fetchAccountTransactionsBefore","decl":{"start":{"line":57,"column":20},"end":{"line":57,"column":50}},"loc":{"start":{"line":57,"column":59},"end":{"line":142,"column":5}},"line":57},"22":{"name":"(anonymous_22)","decl":{"start":{"line":58,"column":13},"end":{"line":58,"column":14}},"loc":{"start":{"line":58,"column":25},"end":{"line":141,"column":7}},"line":58},"23":{"name":"(anonymous_23)","decl":{"start":{"line":61,"column":10},"end":{"line":61,"column":11}},"loc":{"start":{"line":61,"column":22},"end":{"line":139,"column":11}},"line":61},"24":{"name":"(anonymous_24)","decl":{"start":{"line":62,"column":42},"end":{"line":62,"column":43}},"loc":{"start":{"line":62,"column":59},"end":{"line":134,"column":13}},"line":62},"25":{"name":"(anonymous_25)","decl":{"start":{"line":92,"column":55},"end":{"line":92,"column":56}},"loc":{"start":{"line":92,"column":69},"end":{"line":94,"column":17}},"line":92},"26":{"name":"(anonymous_26)","decl":{"start":{"line":136,"column":19},"end":{"line":136,"column":20}},"loc":{"start":{"line":136,"column":33},"end":{"line":138,"column":13}},"line":136},"27":{"name":"fetchAccountTransactionsAfter","decl":{"start":{"line":145,"column":20},"end":{"line":145,"column":49}},"loc":{"start":{"line":145,"column":58},"end":{"line":226,"column":5}},"line":145},"28":{"name":"(anonymous_28)","decl":{"start":{"line":146,"column":13},"end":{"line":146,"column":14}},"loc":{"start":{"line":146,"column":25},"end":{"line":225,"column":7}},"line":146},"29":{"name":"(anonymous_29)","decl":{"start":{"line":149,"column":10},"end":{"line":149,"column":11}},"loc":{"start":{"line":149,"column":22},"end":{"line":223,"column":11}},"line":149},"30":{"name":"(anonymous_30)","decl":{"start":{"line":150,"column":42},"end":{"line":150,"column":43}},"loc":{"start":{"line":150,"column":60},"end":{"line":218,"column":13}},"line":150},"31":{"name":"(anonymous_31)","decl":{"start":{"line":184,"column":55},"end":{"line":184,"column":56}},"loc":{"start":{"line":184,"column":69},"end":{"line":186,"column":17}},"line":184},"32":{"name":"(anonymous_32)","decl":{"start":{"line":220,"column":19},"end":{"line":220,"column":20}},"loc":{"start":{"line":220,"column":34},"end":{"line":222,"column":13}},"line":220},"33":{"name":"fetchAccountTransactions","decl":{"start":{"line":229,"column":20},"end":{"line":229,"column":44}},"loc":{"start":{"line":229,"column":53},"end":{"line":258,"column":5}},"line":229},"34":{"name":"(anonymous_34)","decl":{"start":{"line":232,"column":13},"end":{"line":232,"column":14}},"loc":{"start":{"line":232,"column":25},"end":{"line":257,"column":7}},"line":232},"35":{"name":"(anonymous_35)","decl":{"start":{"line":235,"column":10},"end":{"line":235,"column":11}},"loc":{"start":{"line":235,"column":22},"end":{"line":255,"column":11}},"line":235},"36":{"name":"(anonymous_36)","decl":{"start":{"line":236,"column":42},"end":{"line":236,"column":43}},"loc":{"start":{"line":236,"column":62},"end":{"line":250,"column":13}},"line":236},"37":{"name":"(anonymous_37)","decl":{"start":{"line":244,"column":32},"end":{"line":244,"column":33}},"loc":{"start":{"line":244,"column":45},"end":{"line":246,"column":15}},"line":244},"38":{"name":"(anonymous_38)","decl":{"start":{"line":252,"column":19},"end":{"line":252,"column":20}},"loc":{"start":{"line":252,"column":34},"end":{"line":254,"column":13}},"line":252}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},"type":"if","locations":[{"start":{"line":14,"column":24},"end":{"line":14,"column":328}},{"start":{"line":14,"column":24},"end":{"line":14,"column":328}}],"line":14},"1":{"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":95}},"type":"binary-expr","locations":[{"start":{"line":14,"column":28},"end":{"line":14,"column":56}},{"start":{"line":14,"column":60},"end":{"line":14,"column":95}}],"line":14},"2":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":322}},"type":"cond-expr","locations":[{"start":{"line":14,"column":301},"end":{"line":14,"column":309}},{"start":{"line":14,"column":312},"end":{"line":14,"column":322}}],"line":14},"3":{"loc":{"start":{"line":14,"column":205},"end":{"line":14,"column":298}},"type":"binary-expr","locations":[{"start":{"line":14,"column":205},"end":{"line":14,"column":208}},{"start":{"line":14,"column":212},"end":{"line":14,"column":240}},{"start":{"line":14,"column":244},"end":{"line":14,"column":270}},{"start":{"line":14,"column":274},"end":{"line":14,"column":298}}],"line":14},"4":{"loc":{"start":{"line":16,"column":176},"end":{"line":16,"column":263}},"type":"if","locations":[{"start":{"line":16,"column":176},"end":{"line":16,"column":263}},{"start":{"line":16,"column":176},"end":{"line":16,"column":263}}],"line":16},"5":{"loc":{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},"type":"if","locations":[{"start":{"line":20,"column":50},"end":{"line":20,"column":151}},{"start":{"line":20,"column":50},"end":{"line":20,"column":151}}],"line":20},"6":{"loc":{"start":{"line":22,"column":136},"end":{"line":22,"column":166}},"type":"binary-expr","locations":[{"start":{"line":22,"column":136},"end":{"line":22,"column":157}},{"start":{"line":22,"column":161},"end":{"line":22,"column":166}}],"line":22},"7":{"loc":{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},"type":"if","locations":[{"start":{"line":22,"column":200},"end":{"line":22,"column":254}},{"start":{"line":22,"column":200},"end":{"line":22,"column":254}}],"line":22},"8":{"loc":{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},"type":"if","locations":[{"start":{"line":24,"column":62},"end":{"line":24,"column":131}},{"start":{"line":24,"column":62},"end":{"line":24,"column":131}}],"line":24},"9":{"loc":{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},"type":"if","locations":[{"start":{"line":24,"column":132},"end":{"line":24,"column":193}},{"start":{"line":24,"column":132},"end":{"line":24,"column":193}}],"line":24},"10":{"loc":{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},"type":"if","locations":[{"start":{"line":26,"column":50},"end":{"line":26,"column":138}},{"start":{"line":26,"column":50},"end":{"line":26,"column":138}}],"line":26},"11":{"loc":{"start":{"line":26,"column":54},"end":{"line":26,"column":120}},"type":"binary-expr","locations":[{"start":{"line":26,"column":54},"end":{"line":26,"column":58}},{"start":{"line":26,"column":63},"end":{"line":26,"column":89}},{"start":{"line":26,"column":93},"end":{"line":26,"column":119}}],"line":26},"12":{"loc":{"start":{"line":28,"column":40},"end":{"line":28,"column":151}},"type":"if","locations":[{"start":{"line":28,"column":40},"end":{"line":28,"column":151}},{"start":{"line":28,"column":40},"end":{"line":28,"column":151}}],"line":28},"13":{"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":175}},"type":"cond-expr","locations":[{"start":{"line":30,"column":72},"end":{"line":30,"column":93}},{"start":{"line":30,"column":96},"end":{"line":30,"column":175}}],"line":30},"14":{"loc":{"start":{"line":30,"column":133},"end":{"line":30,"column":172}},"type":"binary-expr","locations":[{"start":{"line":30,"column":133},"end":{"line":30,"column":144}},{"start":{"line":30,"column":148},"end":{"line":30,"column":172}}],"line":30},"15":{"loc":{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},"type":"if","locations":[{"start":{"line":32,"column":43},"end":{"line":32,"column":182}},{"start":{"line":32,"column":43},"end":{"line":32,"column":182}}],"line":32},"16":{"loc":{"start":{"line":32,"column":47},"end":{"line":32,"column":102}},"type":"binary-expr","locations":[{"start":{"line":32,"column":47},"end":{"line":32,"column":79}},{"start":{"line":32,"column":83},"end":{"line":32,"column":102}}],"line":32},"17":{"loc":{"start":{"line":32,"column":218},"end":{"line":32,"column":252}},"type":"binary-expr","locations":[{"start":{"line":32,"column":218},"end":{"line":32,"column":228}},{"start":{"line":32,"column":232},"end":{"line":32,"column":252}}],"line":32},"18":{"loc":{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},"type":"if","locations":[{"start":{"line":32,"column":329},"end":{"line":32,"column":383}},{"start":{"line":32,"column":329},"end":{"line":32,"column":383}}],"line":32},"19":{"loc":{"start":{"line":34,"column":51},"end":{"line":34,"column":137}},"type":"binary-expr","locations":[{"start":{"line":34,"column":51},"end":{"line":34,"column":72}},{"start":{"line":34,"column":76},"end":{"line":34,"column":137}}],"line":34},"20":{"loc":{"start":{"line":76,"column":14},"end":{"line":78,"column":15}},"type":"if","locations":[{"start":{"line":76,"column":14},"end":{"line":78,"column":15}},{"start":{"line":76,"column":14},"end":{"line":78,"column":15}}],"line":76},"21":{"loc":{"start":{"line":76,"column":18},"end":{"line":76,"column":57}},"type":"binary-expr","locations":[{"start":{"line":76,"column":18},"end":{"line":76,"column":29}},{"start":{"line":76,"column":33},"end":{"line":76,"column":57}}],"line":76},"22":{"loc":{"start":{"line":80,"column":14},"end":{"line":82,"column":15}},"type":"if","locations":[{"start":{"line":80,"column":14},"end":{"line":82,"column":15}},{"start":{"line":80,"column":14},"end":{"line":82,"column":15}}],"line":80},"23":{"loc":{"start":{"line":88,"column":21},"end":{"line":88,"column":81}},"type":"binary-expr","locations":[{"start":{"line":88,"column":21},"end":{"line":88,"column":40}},{"start":{"line":88,"column":45},"end":{"line":88,"column":54}},{"start":{"line":88,"column":58},"end":{"line":88,"column":80}}],"line":88},"24":{"loc":{"start":{"line":90,"column":16},"end":{"line":90,"column":72}},"type":"if","locations":[{"start":{"line":90,"column":16},"end":{"line":90,"column":72}},{"start":{"line":90,"column":16},"end":{"line":90,"column":72}}],"line":90},"25":{"loc":{"start":{"line":90,"column":20},"end":{"line":90,"column":61}},"type":"binary-expr","locations":[{"start":{"line":90,"column":20},"end":{"line":90,"column":31}},{"start":{"line":90,"column":35},"end":{"line":90,"column":61}}],"line":90},"26":{"loc":{"start":{"line":93,"column":25},"end":{"line":93,"column":80}},"type":"binary-expr","locations":[{"start":{"line":93,"column":25},"end":{"line":93,"column":47}},{"start":{"line":93,"column":51},"end":{"line":93,"column":56}},{"start":{"line":93,"column":60},"end":{"line":93,"column":80}}],"line":93},"27":{"loc":{"start":{"line":106,"column":41},"end":{"line":106,"column":83}},"type":"cond-expr","locations":[{"start":{"line":106,"column":56},"end":{"line":106,"column":76}},{"start":{"line":106,"column":79},"end":{"line":106,"column":83}}],"line":106},"28":{"loc":{"start":{"line":109,"column":20},"end":{"line":114,"column":21}},"type":"if","locations":[{"start":{"line":109,"column":20},"end":{"line":114,"column":21}},{"start":{"line":109,"column":20},"end":{"line":114,"column":21}}],"line":109},"29":{"loc":{"start":{"line":122,"column":20},"end":{"line":124,"column":21}},"type":"if","locations":[{"start":{"line":122,"column":20},"end":{"line":124,"column":21}},{"start":{"line":122,"column":20},"end":{"line":124,"column":21}}],"line":122},"30":{"loc":{"start":{"line":122,"column":24},"end":{"line":122,"column":81}},"type":"binary-expr","locations":[{"start":{"line":122,"column":24},"end":{"line":122,"column":50}},{"start":{"line":122,"column":54},"end":{"line":122,"column":81}}],"line":122},"31":{"loc":{"start":{"line":126,"column":20},"end":{"line":128,"column":21}},"type":"if","locations":[{"start":{"line":126,"column":20},"end":{"line":128,"column":21}},{"start":{"line":126,"column":20},"end":{"line":128,"column":21}}],"line":126},"32":{"loc":{"start":{"line":157,"column":14},"end":{"line":162,"column":15}},"type":"if","locations":[{"start":{"line":157,"column":14},"end":{"line":162,"column":15}},{"start":{"line":157,"column":14},"end":{"line":162,"column":15}}],"line":157},"33":{"loc":{"start":{"line":173,"column":14},"end":{"line":175,"column":15}},"type":"if","locations":[{"start":{"line":173,"column":14},"end":{"line":175,"column":15}},{"start":{"line":173,"column":14},"end":{"line":175,"column":15}}],"line":173},"34":{"loc":{"start":{"line":173,"column":18},"end":{"line":173,"column":57}},"type":"binary-expr","locations":[{"start":{"line":173,"column":18},"end":{"line":173,"column":29}},{"start":{"line":173,"column":33},"end":{"line":173,"column":57}}],"line":173},"35":{"loc":{"start":{"line":182,"column":16},"end":{"line":182,"column":72}},"type":"if","locations":[{"start":{"line":182,"column":16},"end":{"line":182,"column":72}},{"start":{"line":182,"column":16},"end":{"line":182,"column":72}}],"line":182},"36":{"loc":{"start":{"line":182,"column":20},"end":{"line":182,"column":61}},"type":"binary-expr","locations":[{"start":{"line":182,"column":20},"end":{"line":182,"column":31}},{"start":{"line":182,"column":35},"end":{"line":182,"column":61}}],"line":182},"37":{"loc":{"start":{"line":185,"column":25},"end":{"line":185,"column":80}},"type":"binary-expr","locations":[{"start":{"line":185,"column":25},"end":{"line":185,"column":47}},{"start":{"line":185,"column":51},"end":{"line":185,"column":56}},{"start":{"line":185,"column":60},"end":{"line":185,"column":80}}],"line":185},"38":{"loc":{"start":{"line":198,"column":41},"end":{"line":198,"column":83}},"type":"cond-expr","locations":[{"start":{"line":198,"column":56},"end":{"line":198,"column":76}},{"start":{"line":198,"column":79},"end":{"line":198,"column":83}}],"line":198},"39":{"loc":{"start":{"line":206,"column":20},"end":{"line":208,"column":21}},"type":"if","locations":[{"start":{"line":206,"column":20},"end":{"line":208,"column":21}},{"start":{"line":206,"column":20},"end":{"line":208,"column":21}}],"line":206},"40":{"loc":{"start":{"line":206,"column":24},"end":{"line":206,"column":83}},"type":"binary-expr","locations":[{"start":{"line":206,"column":24},"end":{"line":206,"column":51}},{"start":{"line":206,"column":55},"end":{"line":206,"column":83}}],"line":206},"41":{"loc":{"start":{"line":210,"column":20},"end":{"line":212,"column":21}},"type":"if","locations":[{"start":{"line":210,"column":20},"end":{"line":212,"column":21}},{"start":{"line":210,"column":20},"end":{"line":212,"column":21}}],"line":210}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":1,"30":1,"31":3,"32":3,"33":3,"34":3,"35":3,"36":3,"37":1,"38":1,"39":1,"40":0,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":1,"54":1,"55":1,"56":1,"57":0,"58":0,"59":1,"60":1,"61":1,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":1,"174":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[0,0],"5":[0,0],"6":[3,3],"7":[3,0],"8":[1,0],"9":[0,1],"10":[0,0],"11":[0,0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,1],"16":[1,0],"17":[1,1],"18":[1,0],"19":[1,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0,0],"24":[0,0],"25":[0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0]},"inputSourceMap":{"version":3,"sources":["node-tx-scanner.ts"],"names":["NodeTransactionScanner","wallet","account","blockno","limit","accountSpec","accountManager","getCompleteAccountSpec","data","spec","client","getClient","chainId","address","Address","getState","nonce","balance","compare","blockNumber","results","block","getBlock","body","txsList","length","ownTxs","filter","tx","equal","from","to","txObj","SignedTransaction","fromTxBody","blockhash","hash","header","push","add","amount","sub","blockchain","bestHeight","maxBlockNo","fetchAccountTransactionsBefore","Middleware"],"mappings":"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","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/datasources","sourcesContent":["import { Middleware, MiddlewareFunc } from '../middleware';\nimport { Account } from '../models/account';\nimport { SignedTransaction } from '../models/transaction';\nimport { Wallet } from '../wallet';\nimport { Tx } from '@herajs/client';\nimport { Address } from '@herajs/common';\nimport { AccountTransactionsDatasource, GetAccountTxParams } from './types';\n\n\n/**\n * This is a data source for transactionManager.getAccountTransactions.\n * It is a very inefficient way, but the only one generally available.\n * Please only use with local fullnodes as this can consume considerable bandwidth.\n * What it does is go backwards in time to scan the whole blockchain until it finds the\n * all transactions of an account. This uses the account's nonce to be smart about that:\n * When we reached nonce 1 and balance 0, we assume to have all txs.\n */\nexport class NodeTransactionScanner extends Middleware<Wallet> implements AccountTransactionsDatasource {\n    fetchAccountTransactionsBefore(wallet: Wallet): MiddlewareFunc<GetAccountTxParams, Promise<SignedTransaction[]>> {\n        return () => async ({ account, blockno, limit }: GetAccountTxParams) => {\n            const accountSpec = wallet.accountManager.getCompleteAccountSpec(account.data.spec);\n            const client = wallet.getClient(accountSpec.chainId);\n            const address = new Address(accountSpec.address);\n            let { nonce, balance } = await client.getState(address);\n            // Check for unused account\n            // Note: on dev chain, balance can be non-0, so this check always fails\n            if (nonce === 0 && balance.compare(0) === 0) {\n                return []; \n            }\n            if (!limit) {\n                limit = 0;\n            }\n            let blockNumber = blockno;\n            const results = [];\n            // Traverse back blockchain until reaching block 0 or nonce 0 and balance 0\n            // Note: on dev chain, final balance can be less than 0\n            while (blockNumber > limit && (nonce > 1 || balance.compare(0) > 0)) {\n                const block = await client.getBlock(blockNumber--);\n                if (!block.body || !block.body.txsList.length) continue;\n                //console.log(`[scan] block ${blockNumber}`);\n                const ownTxs = block.body.txsList.filter(\n                    (tx: Tx) => address.equal(tx.from) || tx.to && address.equal(tx.to)\n                );\n                for (const tx of ownTxs) {\n                    const txObj = SignedTransaction.fromTxBody(tx, accountSpec.chainId);\n                    txObj.data.blockhash = block.hash;\n                    txObj.data.blockno = block.header ? block.header.blockno : null;\n                    results.push(txObj);\n                    if (address.equal(tx.from)) {\n                        balance = balance.add(tx.amount);\n                        nonce = tx.nonce;\n                    } else {\n                        balance = balance.sub(tx.amount);\n                    }\n                }\n                //if (ownTxs.length) console.log(`[scan] new state ${nonce}, ${balance}`);\n            }\n            return results;\n        };\n    }\n\n    fetchAccountTransactionsAfter(wallet: Wallet): MiddlewareFunc<GetAccountTxParams, Promise<any[]>> {\n        return () => async ({ account, blockno, limit }: GetAccountTxParams) => {\n            const accountSpec = wallet.accountManager.getCompleteAccountSpec(account.data.spec);\n            const client = wallet.getClient(accountSpec.chainId);\n            if (!limit) {\n                const { bestHeight } = await client.blockchain();\n                limit = bestHeight;\n            }\n            const maxBlockNo = limit;\n            const address = new Address(accountSpec.address);\n            const { nonce, balance } = await client.getState(address);\n            // Check for unused account\n            // Note: on dev chain, balance can be non-0, so this check always fails\n            if (nonce === 0 && balance.compare(0) === 0) {\n                return []; \n            }\n            let blockNumber = blockno;\n            const results = [];\n            // Traverse forward blockchain until reaching current block\n            while (blockNumber <= maxBlockNo) {\n                const block = await client.getBlock(blockNumber++);\n                if (!block.body || !block.body.txsList.length) continue;\n                //console.log(`[scan] block ${blockNumber}`);\n                const ownTxs = block.body.txsList.filter(\n                    (tx: Tx) => address.equal(tx.from) || tx.to && address.equal(tx.to)\n                );\n                for (const tx of ownTxs) {\n                    const txObj = SignedTransaction.fromTxBody(tx, accountSpec.chainId);\n                    txObj.data.blockhash = block.hash;\n                    txObj.data.blockno = block.header ? block.header.blockno : null;\n                    results.push(txObj);\n                }\n            }\n            return results;\n        };\n    }\n\n    fetchAccountTransactions(wallet: Wallet): MiddlewareFunc<Account, Promise<any[]>> {\n        return () => async (account: Account) => {\n            const accountSpec = wallet.accountManager.getCompleteAccountSpec(account.data.spec);\n            const { bestHeight } = await wallet.getClient(accountSpec.chainId).blockchain();\n            return this.fetchAccountTransactionsBefore(wallet)(async () => [])({ account, blockno: bestHeight });\n        };\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e4993942d7c179259162404ecc7395a25aa052e2","contentHash":"d3b2dcfec6db75730bb1ecef2bef006925eb03c7d699ac4fbb4881507e2012ba"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages/memory.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages/memory.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":35}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":32}},"4":{"start":{"line":12,"column":24},"end":{"line":12,"column":328}},"5":{"start":{"line":12,"column":99},"end":{"line":12,"column":154}},"6":{"start":{"line":12,"column":133},"end":{"line":12,"column":151}},"7":{"start":{"line":12,"column":164},"end":{"line":12,"column":326}},"8":{"start":{"line":12,"column":198},"end":{"line":12,"column":323}},"9":{"start":{"line":12,"column":329},"end":{"line":12,"column":349}},"10":{"start":{"line":14,"column":34},"end":{"line":14,"column":117}},"11":{"start":{"line":16,"column":30},"end":{"line":16,"column":106}},"12":{"start":{"line":18,"column":41},"end":{"line":18,"column":155}},"13":{"start":{"line":18,"column":146},"end":{"line":18,"column":153}},"14":{"start":{"line":18,"column":167},"end":{"line":18,"column":169}},"15":{"start":{"line":18,"column":180},"end":{"line":18,"column":184}},"16":{"start":{"line":18,"column":195},"end":{"line":18,"column":200}},"17":{"start":{"line":18,"column":211},"end":{"line":18,"column":220}},"18":{"start":{"line":18,"column":222},"end":{"line":18,"column":509}},"19":{"start":{"line":18,"column":228},"end":{"line":18,"column":371}},"20":{"start":{"line":18,"column":242},"end":{"line":18,"column":264}},"21":{"start":{"line":18,"column":314},"end":{"line":18,"column":334}},"22":{"start":{"line":18,"column":335},"end":{"line":18,"column":369}},"23":{"start":{"line":18,"column":363},"end":{"line":18,"column":369}},"24":{"start":{"line":18,"column":388},"end":{"line":18,"column":398}},"25":{"start":{"line":18,"column":399},"end":{"line":18,"column":408}},"26":{"start":{"line":18,"column":421},"end":{"line":18,"column":507}},"27":{"start":{"line":18,"column":427},"end":{"line":18,"column":475}},"28":{"start":{"line":18,"column":460},"end":{"line":18,"column":475}},"29":{"start":{"line":18,"column":488},"end":{"line":18,"column":505}},"30":{"start":{"line":18,"column":496},"end":{"line":18,"column":505}},"31":{"start":{"line":18,"column":510},"end":{"line":18,"column":522}},"32":{"start":{"line":20,"column":32},"end":{"line":20,"column":67}},"33":{"start":{"line":20,"column":56},"end":{"line":20,"column":67}},"34":{"start":{"line":22,"column":77},"end":{"line":22,"column":175}},"35":{"start":{"line":22,"column":94},"end":{"line":22,"column":107}},"36":{"start":{"line":22,"column":121},"end":{"line":22,"column":131}},"37":{"start":{"line":22,"column":151},"end":{"line":22,"column":165}},"38":{"start":{"line":22,"column":166},"end":{"line":22,"column":173}},"39":{"start":{"line":22,"column":176},"end":{"line":22,"column":263}},"40":{"start":{"line":22,"column":193},"end":{"line":22,"column":208}},"41":{"start":{"line":22,"column":218},"end":{"line":22,"column":261}},"42":{"start":{"line":24,"column":33},"end":{"line":24,"column":387}},"43":{"start":{"line":24,"column":65},"end":{"line":24,"column":69}},"44":{"start":{"line":24,"column":78},"end":{"line":24,"column":87}},"45":{"start":{"line":24,"column":89},"end":{"line":24,"column":384}},"46":{"start":{"line":24,"column":147},"end":{"line":24,"column":167}},"47":{"start":{"line":24,"column":193},"end":{"line":24,"column":264}},"48":{"start":{"line":24,"column":290},"end":{"line":24,"column":360}},"49":{"start":{"line":24,"column":363},"end":{"line":24,"column":380}},"50":{"start":{"line":26,"column":50},"end":{"line":26,"column":151}},"51":{"start":{"line":26,"column":92},"end":{"line":26,"column":149}},"52":{"start":{"line":28,"column":44},"end":{"line":28,"column":315}},"53":{"start":{"line":28,"column":57},"end":{"line":28,"column":58}},"54":{"start":{"line":28,"column":102},"end":{"line":28,"column":110}},"55":{"start":{"line":28,"column":112},"end":{"line":28,"column":167}},"56":{"start":{"line":28,"column":168},"end":{"line":28,"column":199}},"57":{"start":{"line":28,"column":200},"end":{"line":28,"column":254}},"58":{"start":{"line":28,"column":227},"end":{"line":28,"column":254}},"59":{"start":{"line":28,"column":255},"end":{"line":28,"column":313}},"60":{"start":{"line":30,"column":62},"end":{"line":30,"column":131}},"61":{"start":{"line":30,"column":78},"end":{"line":30,"column":131}},"62":{"start":{"line":30,"column":132},"end":{"line":30,"column":193}},"63":{"start":{"line":30,"column":149},"end":{"line":30,"column":193}},"64":{"start":{"line":30,"column":194},"end":{"line":30,"column":213}},"65":{"start":{"line":32,"column":50},"end":{"line":32,"column":138}},"66":{"start":{"line":32,"column":124},"end":{"line":32,"column":136}},"67":{"start":{"line":32,"column":139},"end":{"line":32,"column":175}},"68":{"start":{"line":34,"column":30},"end":{"line":34,"column":176}},"69":{"start":{"line":34,"column":126},"end":{"line":34,"column":173}},"70":{"start":{"line":34,"column":177},"end":{"line":34,"column":203}},"71":{"start":{"line":36,"column":40},"end":{"line":36,"column":151}},"72":{"start":{"line":36,"column":63},"end":{"line":36,"column":149}},"73":{"start":{"line":36,"column":152},"end":{"line":36,"column":164}},"74":{"start":{"line":38,"column":43},"end":{"line":38,"column":182}},"75":{"start":{"line":38,"column":106},"end":{"line":38,"column":180}},"76":{"start":{"line":38,"column":183},"end":{"line":38,"column":328}},"77":{"start":{"line":38,"column":329},"end":{"line":38,"column":383}},"78":{"start":{"line":38,"column":345},"end":{"line":38,"column":383}},"79":{"start":{"line":40,"column":33},"end":{"line":40,"column":138}},"80":{"start":{"line":40,"column":109},"end":{"line":40,"column":125}},"81":{"start":{"line":40,"column":126},"end":{"line":40,"column":135}},"82":{"start":{"line":40,"column":139},"end":{"line":40,"column":168}},"83":{"start":{"line":42,"column":44},"end":{"line":42,"column":195}},"84":{"start":{"line":42,"column":62},"end":{"line":42,"column":166}},"85":{"start":{"line":42,"column":176},"end":{"line":42,"column":193}},"86":{"start":{"line":42,"column":196},"end":{"line":42,"column":207}},"87":{"start":{"line":46,"column":0},"end":{"line":157,"column":17}},"88":{"start":{"line":47,"column":2},"end":{"line":47,"column":33}},"89":{"start":{"line":52,"column":4},"end":{"line":52,"column":39}},"90":{"start":{"line":54,"column":4},"end":{"line":54,"column":86}},"91":{"start":{"line":56,"column":4},"end":{"line":56,"column":70}},"92":{"start":{"line":58,"column":4},"end":{"line":58,"column":67}},"93":{"start":{"line":60,"column":4},"end":{"line":60,"column":70}},"94":{"start":{"line":62,"column":4},"end":{"line":62,"column":28}},"95":{"start":{"line":63,"column":4},"end":{"line":63,"column":22}},"96":{"start":{"line":64,"column":4},"end":{"line":64,"column":17}},"97":{"start":{"line":67,"column":2},"end":{"line":154,"column":6}},"98":{"start":{"line":70,"column":17},"end":{"line":74,"column":8}},"99":{"start":{"line":71,"column":21},"end":{"line":71,"column":39}},"100":{"start":{"line":72,"column":8},"end":{"line":72,"column":50}},"101":{"start":{"line":72,"column":21},"end":{"line":72,"column":50}},"102":{"start":{"line":73,"column":8},"end":{"line":73,"column":22}},"103":{"start":{"line":77,"column":8},"end":{"line":77,"column":43}},"104":{"start":{"line":80,"column":6},"end":{"line":80,"column":17}},"105":{"start":{"line":85,"column":20},"end":{"line":106,"column":8}},"106":{"start":{"line":87,"column":22},"end":{"line":89,"column":10}},"107":{"start":{"line":88,"column":10},"end":{"line":88,"column":42}},"108":{"start":{"line":91,"column":8},"end":{"line":98,"column":9}},"109":{"start":{"line":92,"column":10},"end":{"line":97,"column":13}},"110":{"start":{"line":93,"column":24},"end":{"line":93,"column":47}},"111":{"start":{"line":94,"column":25},"end":{"line":94,"column":33}},"112":{"start":{"line":96,"column":12},"end":{"line":96,"column":79}},"113":{"start":{"line":100,"column":8},"end":{"line":105,"column":30}},"114":{"start":{"line":101,"column":22},"end":{"line":101,"column":46}},"115":{"start":{"line":102,"column":22},"end":{"line":102,"column":30}},"116":{"start":{"line":104,"column":10},"end":{"line":104,"column":23}},"117":{"start":{"line":109,"column":8},"end":{"line":109,"column":46}},"118":{"start":{"line":112,"column":6},"end":{"line":112,"column":20}},"119":{"start":{"line":117,"column":17},"end":{"line":120,"column":8}},"120":{"start":{"line":118,"column":8},"end":{"line":118,"column":38}},"121":{"start":{"line":119,"column":8},"end":{"line":119,"column":24}},"122":{"start":{"line":123,"column":8},"end":{"line":123,"column":43}},"123":{"start":{"line":126,"column":6},"end":{"line":126,"column":17}},"124":{"start":{"line":131,"column":21},"end":{"line":133,"column":8}},"125":{"start":{"line":132,"column":8},"end":{"line":132,"column":33}},"126":{"start":{"line":136,"column":8},"end":{"line":136,"column":47}},"127":{"start":{"line":139,"column":6},"end":{"line":139,"column":21}},"128":{"start":{"line":144,"column":19},"end":{"line":146,"column":8}},"129":{"start":{"line":145,"column":8},"end":{"line":145,"column":26}},"130":{"start":{"line":149,"column":8},"end":{"line":149,"column":45}},"131":{"start":{"line":152,"column":6},"end":{"line":152,"column":19}},"132":{"start":{"line":156,"column":2},"end":{"line":156,"column":21}},"133":{"start":{"line":166,"column":0},"end":{"line":227,"column":19}},"134":{"start":{"line":167,"column":2},"end":{"line":167,"column":37}},"135":{"start":{"line":172,"column":4},"end":{"line":172,"column":41}},"136":{"start":{"line":174,"column":4},"end":{"line":174,"column":89}},"137":{"start":{"line":176,"column":4},"end":{"line":176,"column":68}},"138":{"start":{"line":178,"column":4},"end":{"line":178,"column":71}},"139":{"start":{"line":180,"column":4},"end":{"line":180,"column":74}},"140":{"start":{"line":182,"column":4},"end":{"line":182,"column":23}},"141":{"start":{"line":183,"column":4},"end":{"line":183,"column":29}},"142":{"start":{"line":184,"column":4},"end":{"line":184,"column":18}},"143":{"start":{"line":187,"column":2},"end":{"line":224,"column":6}},"144":{"start":{"line":190,"column":18},"end":{"line":192,"column":8}},"145":{"start":{"line":191,"column":8},"end":{"line":191,"column":20}},"146":{"start":{"line":195,"column":8},"end":{"line":195,"column":44}},"147":{"start":{"line":198,"column":6},"end":{"line":198,"column":18}},"148":{"start":{"line":203,"column":19},"end":{"line":205,"column":8}},"149":{"start":{"line":204,"column":8},"end":{"line":204,"column":15}},"150":{"start":{"line":208,"column":8},"end":{"line":208,"column":45}},"151":{"start":{"line":211,"column":6},"end":{"line":211,"column":19}},"152":{"start":{"line":216,"column":6},"end":{"line":218,"column":7}},"153":{"start":{"line":217,"column":8},"end":{"line":217,"column":38}},"154":{"start":{"line":220,"column":18},"end":{"line":220,"column":45}},"155":{"start":{"line":221,"column":6},"end":{"line":221,"column":36}},"156":{"start":{"line":222,"column":6},"end":{"line":222,"column":19}},"157":{"start":{"line":226,"column":2},"end":{"line":226,"column":23}},"158":{"start":{"line":229,"column":0},"end":{"line":229,"column":35}}},"fnMap":{"0":{"name":"_typeof","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":16}},"loc":{"start":{"line":12,"column":22},"end":{"line":12,"column":351}},"line":12},"1":{"name":"_typeof","decl":{"start":{"line":12,"column":118},"end":{"line":12,"column":125}},"loc":{"start":{"line":12,"column":131},"end":{"line":12,"column":153}},"line":12},"2":{"name":"_typeof","decl":{"start":{"line":12,"column":183},"end":{"line":12,"column":190}},"loc":{"start":{"line":12,"column":196},"end":{"line":12,"column":325}},"line":12},"3":{"name":"_slicedToArray","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":23}},"loc":{"start":{"line":14,"column":32},"end":{"line":14,"column":119}},"line":14},"4":{"name":"_nonIterableRest","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":25}},"loc":{"start":{"line":16,"column":28},"end":{"line":16,"column":108}},"line":16},"5":{"name":"_iterableToArrayLimit","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":30}},"loc":{"start":{"line":18,"column":39},"end":{"line":18,"column":524}},"line":18},"6":{"name":"_arrayWithHoles","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":24}},"loc":{"start":{"line":20,"column":30},"end":{"line":20,"column":69}},"line":20},"7":{"name":"asyncGeneratorStep","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":27}},"loc":{"start":{"line":22,"column":75},"end":{"line":22,"column":265}},"line":22},"8":{"name":"_asyncToGenerator","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":26}},"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":389}},"line":24},"9":{"name":"(anonymous_9)","decl":{"start":{"line":24,"column":40},"end":{"line":24,"column":41}},"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":386}},"line":24},"10":{"name":"(anonymous_10)","decl":{"start":{"line":24,"column":108},"end":{"line":24,"column":109}},"loc":{"start":{"line":24,"column":135},"end":{"line":24,"column":382}},"line":24},"11":{"name":"_next","decl":{"start":{"line":24,"column":178},"end":{"line":24,"column":183}},"loc":{"start":{"line":24,"column":191},"end":{"line":24,"column":266}},"line":24},"12":{"name":"_throw","decl":{"start":{"line":24,"column":276},"end":{"line":24,"column":282}},"loc":{"start":{"line":24,"column":288},"end":{"line":24,"column":362}},"line":24},"13":{"name":"_classCallCheck","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":24}},"loc":{"start":{"line":26,"column":48},"end":{"line":26,"column":153}},"line":26},"14":{"name":"_defineProperties","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":42},"end":{"line":28,"column":317}},"line":28},"15":{"name":"_createClass","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":60},"end":{"line":30,"column":215}},"line":30},"16":{"name":"_possibleConstructorReturn","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":35}},"loc":{"start":{"line":32,"column":48},"end":{"line":32,"column":177}},"line":32},"17":{"name":"_getPrototypeOf","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":24}},"loc":{"start":{"line":34,"column":28},"end":{"line":34,"column":205}},"line":34},"18":{"name":"_getPrototypeOf","decl":{"start":{"line":34,"column":105},"end":{"line":34,"column":120}},"loc":{"start":{"line":34,"column":124},"end":{"line":34,"column":175}},"line":34},"19":{"name":"_assertThisInitialized","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":31}},"loc":{"start":{"line":36,"column":38},"end":{"line":36,"column":166}},"line":36},"20":{"name":"_inherits","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":18}},"loc":{"start":{"line":38,"column":41},"end":{"line":38,"column":385}},"line":38},"21":{"name":"_setPrototypeOf","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":24}},"loc":{"start":{"line":40,"column":31},"end":{"line":40,"column":170}},"line":40},"22":{"name":"_setPrototypeOf","decl":{"start":{"line":40,"column":85},"end":{"line":40,"column":100}},"loc":{"start":{"line":40,"column":107},"end":{"line":40,"column":137}},"line":40},"23":{"name":"_defineProperty","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":24}},"loc":{"start":{"line":42,"column":42},"end":{"line":42,"column":209}},"line":42},"24":{"name":"(anonymous_24)","decl":{"start":{"line":46,"column":0},"end":{"line":46,"column":1}},"loc":{"start":{"line":46,"column":18},"end":{"line":157,"column":1}},"line":46},"25":{"name":"MemoryIndex","decl":{"start":{"line":49,"column":11},"end":{"line":49,"column":22}},"loc":{"start":{"line":49,"column":38},"end":{"line":65,"column":3}},"line":49},"26":{"name":"(anonymous_26)","decl":{"start":{"line":69,"column":11},"end":{"line":69,"column":12}},"loc":{"start":{"line":69,"column":23},"end":{"line":81,"column":5}},"line":69},"27":{"name":"(anonymous_27)","decl":{"start":{"line":70,"column":35},"end":{"line":70,"column":36}},"loc":{"start":{"line":70,"column":51},"end":{"line":74,"column":7}},"line":70},"28":{"name":"get","decl":{"start":{"line":76,"column":15},"end":{"line":76,"column":18}},"loc":{"start":{"line":76,"column":23},"end":{"line":78,"column":7}},"line":76},"29":{"name":"(anonymous_29)","decl":{"start":{"line":84,"column":11},"end":{"line":84,"column":12}},"loc":{"start":{"line":84,"column":23},"end":{"line":113,"column":5}},"line":84},"30":{"name":"(anonymous_30)","decl":{"start":{"line":85,"column":38},"end":{"line":85,"column":39}},"loc":{"start":{"line":85,"column":72},"end":{"line":106,"column":7}},"line":85},"31":{"name":"(anonymous_31)","decl":{"start":{"line":87,"column":59},"end":{"line":87,"column":60}},"loc":{"start":{"line":87,"column":75},"end":{"line":89,"column":9}},"line":87},"32":{"name":"(anonymous_32)","decl":{"start":{"line":92,"column":35},"end":{"line":92,"column":36}},"loc":{"start":{"line":92,"column":51},"end":{"line":97,"column":11}},"line":92},"33":{"name":"(anonymous_33)","decl":{"start":{"line":100,"column":27},"end":{"line":100,"column":28}},"loc":{"start":{"line":100,"column":44},"end":{"line":105,"column":9}},"line":100},"34":{"name":"getAll","decl":{"start":{"line":108,"column":15},"end":{"line":108,"column":21}},"loc":{"start":{"line":108,"column":32},"end":{"line":110,"column":7}},"line":108},"35":{"name":"(anonymous_35)","decl":{"start":{"line":116,"column":11},"end":{"line":116,"column":12}},"loc":{"start":{"line":116,"column":23},"end":{"line":127,"column":5}},"line":116},"36":{"name":"(anonymous_36)","decl":{"start":{"line":117,"column":35},"end":{"line":117,"column":36}},"loc":{"start":{"line":117,"column":52},"end":{"line":120,"column":7}},"line":117},"37":{"name":"put","decl":{"start":{"line":122,"column":15},"end":{"line":122,"column":18}},"loc":{"start":{"line":122,"column":24},"end":{"line":124,"column":7}},"line":122},"38":{"name":"(anonymous_38)","decl":{"start":{"line":130,"column":11},"end":{"line":130,"column":12}},"loc":{"start":{"line":130,"column":23},"end":{"line":140,"column":5}},"line":130},"39":{"name":"(anonymous_39)","decl":{"start":{"line":131,"column":39},"end":{"line":131,"column":40}},"loc":{"start":{"line":131,"column":55},"end":{"line":133,"column":7}},"line":131},"40":{"name":"_delete","decl":{"start":{"line":135,"column":15},"end":{"line":135,"column":22}},"loc":{"start":{"line":135,"column":28},"end":{"line":137,"column":7}},"line":135},"41":{"name":"(anonymous_41)","decl":{"start":{"line":143,"column":11},"end":{"line":143,"column":12}},"loc":{"start":{"line":143,"column":23},"end":{"line":153,"column":5}},"line":143},"42":{"name":"(anonymous_42)","decl":{"start":{"line":144,"column":37},"end":{"line":144,"column":38}},"loc":{"start":{"line":144,"column":50},"end":{"line":146,"column":7}},"line":144},"43":{"name":"clear","decl":{"start":{"line":148,"column":15},"end":{"line":148,"column":20}},"loc":{"start":{"line":148,"column":23},"end":{"line":150,"column":7}},"line":148},"44":{"name":"(anonymous_44)","decl":{"start":{"line":166,"column":0},"end":{"line":166,"column":1}},"loc":{"start":{"line":166,"column":20},"end":{"line":227,"column":1}},"line":166},"45":{"name":"MemoryStorage","decl":{"start":{"line":169,"column":11},"end":{"line":169,"column":24}},"loc":{"start":{"line":169,"column":40},"end":{"line":185,"column":3}},"line":169},"46":{"name":"(anonymous_46)","decl":{"start":{"line":189,"column":11},"end":{"line":189,"column":12}},"loc":{"start":{"line":189,"column":23},"end":{"line":199,"column":5}},"line":189},"47":{"name":"(anonymous_47)","decl":{"start":{"line":190,"column":36},"end":{"line":190,"column":37}},"loc":{"start":{"line":190,"column":49},"end":{"line":192,"column":7}},"line":190},"48":{"name":"open","decl":{"start":{"line":194,"column":15},"end":{"line":194,"column":19}},"loc":{"start":{"line":194,"column":22},"end":{"line":196,"column":7}},"line":194},"49":{"name":"(anonymous_49)","decl":{"start":{"line":202,"column":11},"end":{"line":202,"column":12}},"loc":{"start":{"line":202,"column":23},"end":{"line":212,"column":5}},"line":202},"50":{"name":"(anonymous_50)","decl":{"start":{"line":203,"column":37},"end":{"line":203,"column":38}},"loc":{"start":{"line":203,"column":50},"end":{"line":205,"column":7}},"line":203},"51":{"name":"close","decl":{"start":{"line":207,"column":15},"end":{"line":207,"column":20}},"loc":{"start":{"line":207,"column":23},"end":{"line":209,"column":7}},"line":207},"52":{"name":"getIndex","decl":{"start":{"line":215,"column":20},"end":{"line":215,"column":28}},"loc":{"start":{"line":215,"column":35},"end":{"line":223,"column":5}},"line":215}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":24},"end":{"line":12,"column":328}},"type":"if","locations":[{"start":{"line":12,"column":24},"end":{"line":12,"column":328}},{"start":{"line":12,"column":24},"end":{"line":12,"column":328}}],"line":12},"1":{"loc":{"start":{"line":12,"column":28},"end":{"line":12,"column":95}},"type":"binary-expr","locations":[{"start":{"line":12,"column":28},"end":{"line":12,"column":56}},{"start":{"line":12,"column":60},"end":{"line":12,"column":95}}],"line":12},"2":{"loc":{"start":{"line":12,"column":205},"end":{"line":12,"column":322}},"type":"cond-expr","locations":[{"start":{"line":12,"column":301},"end":{"line":12,"column":309}},{"start":{"line":12,"column":312},"end":{"line":12,"column":322}}],"line":12},"3":{"loc":{"start":{"line":12,"column":205},"end":{"line":12,"column":298}},"type":"binary-expr","locations":[{"start":{"line":12,"column":205},"end":{"line":12,"column":208}},{"start":{"line":12,"column":212},"end":{"line":12,"column":240}},{"start":{"line":12,"column":244},"end":{"line":12,"column":270}},{"start":{"line":12,"column":274},"end":{"line":12,"column":298}}],"line":12},"4":{"loc":{"start":{"line":14,"column":41},"end":{"line":14,"column":116}},"type":"binary-expr","locations":[{"start":{"line":14,"column":41},"end":{"line":14,"column":61}},{"start":{"line":14,"column":65},"end":{"line":14,"column":94}},{"start":{"line":14,"column":98},"end":{"line":14,"column":116}}],"line":14},"5":{"loc":{"start":{"line":18,"column":41},"end":{"line":18,"column":155}},"type":"if","locations":[{"start":{"line":18,"column":41},"end":{"line":18,"column":155}},{"start":{"line":18,"column":41},"end":{"line":18,"column":155}}],"line":18},"6":{"loc":{"start":{"line":18,"column":47},"end":{"line":18,"column":141}},"type":"binary-expr","locations":[{"start":{"line":18,"column":47},"end":{"line":18,"column":77}},{"start":{"line":18,"column":81},"end":{"line":18,"column":141}}],"line":18},"7":{"loc":{"start":{"line":18,"column":335},"end":{"line":18,"column":369}},"type":"if","locations":[{"start":{"line":18,"column":335},"end":{"line":18,"column":369}},{"start":{"line":18,"column":335},"end":{"line":18,"column":369}}],"line":18},"8":{"loc":{"start":{"line":18,"column":339},"end":{"line":18,"column":361}},"type":"binary-expr","locations":[{"start":{"line":18,"column":339},"end":{"line":18,"column":340}},{"start":{"line":18,"column":344},"end":{"line":18,"column":361}}],"line":18},"9":{"loc":{"start":{"line":18,"column":427},"end":{"line":18,"column":475}},"type":"if","locations":[{"start":{"line":18,"column":427},"end":{"line":18,"column":475}},{"start":{"line":18,"column":427},"end":{"line":18,"column":475}}],"line":18},"10":{"loc":{"start":{"line":18,"column":431},"end":{"line":18,"column":458}},"type":"binary-expr","locations":[{"start":{"line":18,"column":431},"end":{"line":18,"column":434}},{"start":{"line":18,"column":438},"end":{"line":18,"column":458}}],"line":18},"11":{"loc":{"start":{"line":18,"column":488},"end":{"line":18,"column":505}},"type":"if","locations":[{"start":{"line":18,"column":488},"end":{"line":18,"column":505}},{"start":{"line":18,"column":488},"end":{"line":18,"column":505}}],"line":18},"12":{"loc":{"start":{"line":20,"column":32},"end":{"line":20,"column":67}},"type":"if","locations":[{"start":{"line":20,"column":32},"end":{"line":20,"column":67}},{"start":{"line":20,"column":32},"end":{"line":20,"column":67}}],"line":20},"13":{"loc":{"start":{"line":22,"column":176},"end":{"line":22,"column":263}},"type":"if","locations":[{"start":{"line":22,"column":176},"end":{"line":22,"column":263}},{"start":{"line":22,"column":176},"end":{"line":22,"column":263}}],"line":22},"14":{"loc":{"start":{"line":26,"column":50},"end":{"line":26,"column":151}},"type":"if","locations":[{"start":{"line":26,"column":50},"end":{"line":26,"column":151}},{"start":{"line":26,"column":50},"end":{"line":26,"column":151}}],"line":26},"15":{"loc":{"start":{"line":28,"column":136},"end":{"line":28,"column":166}},"type":"binary-expr","locations":[{"start":{"line":28,"column":136},"end":{"line":28,"column":157}},{"start":{"line":28,"column":161},"end":{"line":28,"column":166}}],"line":28},"16":{"loc":{"start":{"line":28,"column":200},"end":{"line":28,"column":254}},"type":"if","locations":[{"start":{"line":28,"column":200},"end":{"line":28,"column":254}},{"start":{"line":28,"column":200},"end":{"line":28,"column":254}}],"line":28},"17":{"loc":{"start":{"line":30,"column":62},"end":{"line":30,"column":131}},"type":"if","locations":[{"start":{"line":30,"column":62},"end":{"line":30,"column":131}},{"start":{"line":30,"column":62},"end":{"line":30,"column":131}}],"line":30},"18":{"loc":{"start":{"line":30,"column":132},"end":{"line":30,"column":193}},"type":"if","locations":[{"start":{"line":30,"column":132},"end":{"line":30,"column":193}},{"start":{"line":30,"column":132},"end":{"line":30,"column":193}}],"line":30},"19":{"loc":{"start":{"line":32,"column":50},"end":{"line":32,"column":138}},"type":"if","locations":[{"start":{"line":32,"column":50},"end":{"line":32,"column":138}},{"start":{"line":32,"column":50},"end":{"line":32,"column":138}}],"line":32},"20":{"loc":{"start":{"line":32,"column":54},"end":{"line":32,"column":120}},"type":"binary-expr","locations":[{"start":{"line":32,"column":54},"end":{"line":32,"column":58}},{"start":{"line":32,"column":63},"end":{"line":32,"column":89}},{"start":{"line":32,"column":93},"end":{"line":32,"column":119}}],"line":32},"21":{"loc":{"start":{"line":34,"column":48},"end":{"line":34,"column":175}},"type":"cond-expr","locations":[{"start":{"line":34,"column":72},"end":{"line":34,"column":93}},{"start":{"line":34,"column":96},"end":{"line":34,"column":175}}],"line":34},"22":{"loc":{"start":{"line":34,"column":133},"end":{"line":34,"column":172}},"type":"binary-expr","locations":[{"start":{"line":34,"column":133},"end":{"line":34,"column":144}},{"start":{"line":34,"column":148},"end":{"line":34,"column":172}}],"line":34},"23":{"loc":{"start":{"line":36,"column":40},"end":{"line":36,"column":151}},"type":"if","locations":[{"start":{"line":36,"column":40},"end":{"line":36,"column":151}},{"start":{"line":36,"column":40},"end":{"line":36,"column":151}}],"line":36},"24":{"loc":{"start":{"line":38,"column":43},"end":{"line":38,"column":182}},"type":"if","locations":[{"start":{"line":38,"column":43},"end":{"line":38,"column":182}},{"start":{"line":38,"column":43},"end":{"line":38,"column":182}}],"line":38},"25":{"loc":{"start":{"line":38,"column":47},"end":{"line":38,"column":102}},"type":"binary-expr","locations":[{"start":{"line":38,"column":47},"end":{"line":38,"column":79}},{"start":{"line":38,"column":83},"end":{"line":38,"column":102}}],"line":38},"26":{"loc":{"start":{"line":38,"column":218},"end":{"line":38,"column":252}},"type":"binary-expr","locations":[{"start":{"line":38,"column":218},"end":{"line":38,"column":228}},{"start":{"line":38,"column":232},"end":{"line":38,"column":252}}],"line":38},"27":{"loc":{"start":{"line":38,"column":329},"end":{"line":38,"column":383}},"type":"if","locations":[{"start":{"line":38,"column":329},"end":{"line":38,"column":383}},{"start":{"line":38,"column":329},"end":{"line":38,"column":383}}],"line":38},"28":{"loc":{"start":{"line":40,"column":51},"end":{"line":40,"column":137}},"type":"binary-expr","locations":[{"start":{"line":40,"column":51},"end":{"line":40,"column":72}},{"start":{"line":40,"column":76},"end":{"line":40,"column":137}}],"line":40},"29":{"loc":{"start":{"line":42,"column":44},"end":{"line":42,"column":195}},"type":"if","locations":[{"start":{"line":42,"column":44},"end":{"line":42,"column":195}},{"start":{"line":42,"column":44},"end":{"line":42,"column":195}}],"line":42},"30":{"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":50}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":50}},{"start":{"line":72,"column":8},"end":{"line":72,"column":50}}],"line":72},"31":{"loc":{"start":{"line":91,"column":8},"end":{"line":98,"column":9}},"type":"if","locations":[{"start":{"line":91,"column":8},"end":{"line":98,"column":9}},{"start":{"line":91,"column":8},"end":{"line":98,"column":9}}],"line":91},"32":{"loc":{"start":{"line":91,"column":12},"end":{"line":91,"column":35}},"type":"binary-expr","locations":[{"start":{"line":91,"column":12},"end":{"line":91,"column":21}},{"start":{"line":91,"column":25},"end":{"line":91,"column":35}}],"line":91},"33":{"loc":{"start":{"line":216,"column":6},"end":{"line":218,"column":7}},"type":"if","locations":[{"start":{"line":216,"column":6},"end":{"line":218,"column":7}},{"start":{"line":216,"column":6},"end":{"line":218,"column":7}}],"line":216}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":3,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":3,"33":3,"34":40,"35":40,"36":33,"37":7,"38":7,"39":33,"40":33,"41":0,"42":7,"43":40,"44":40,"45":40,"46":40,"47":40,"48":0,"49":40,"50":15,"51":0,"52":2,"53":2,"54":8,"55":8,"56":8,"57":8,"58":8,"59":8,"60":2,"61":2,"62":2,"63":0,"64":2,"65":15,"66":0,"67":15,"68":1,"69":0,"70":1,"71":60,"72":0,"73":60,"74":2,"75":0,"76":2,"77":2,"78":2,"79":1,"80":0,"81":0,"82":1,"83":45,"84":0,"85":45,"86":45,"87":1,"88":1,"89":9,"90":9,"91":9,"92":9,"93":9,"94":9,"95":9,"96":9,"97":1,"98":1,"99":12,"100":12,"101":7,"102":5,"103":12,"104":1,"105":1,"106":4,"107":0,"108":4,"109":3,"110":1,"111":1,"112":1,"113":4,"114":2,"115":2,"116":2,"117":4,"118":1,"119":1,"120":13,"121":13,"122":13,"123":1,"124":1,"125":5,"126":5,"127":1,"128":1,"129":0,"130":0,"131":1,"132":1,"133":1,"134":1,"135":6,"136":6,"137":6,"138":6,"139":6,"140":6,"141":6,"142":6,"143":1,"144":1,"145":6,"146":6,"147":1,"148":1,"149":0,"150":0,"151":1,"152":31,"153":22,"154":9,"155":9,"156":9,"157":1,"158":1},"f":{"0":0,"1":0,"2":0,"3":3,"4":0,"5":0,"6":3,"7":40,"8":7,"9":40,"10":40,"11":40,"12":0,"13":15,"14":2,"15":2,"16":15,"17":1,"18":0,"19":60,"20":2,"21":1,"22":0,"23":45,"24":1,"25":9,"26":1,"27":12,"28":12,"29":1,"30":4,"31":0,"32":1,"33":2,"34":4,"35":1,"36":13,"37":13,"38":1,"39":5,"40":5,"41":1,"42":0,"43":0,"44":1,"45":6,"46":1,"47":6,"48":6,"49":1,"50":0,"51":0,"52":31},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[3,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[3,0],"13":[33,0],"14":[0,15],"15":[8,8],"16":[8,0],"17":[2,0],"18":[0,2],"19":[0,15],"20":[15,0,0],"21":[1,0],"22":[0,0],"23":[0,60],"24":[0,2],"25":[2,0],"26":[2,2],"27":[2,0],"28":[1,0],"29":[0,45],"30":[7,5],"31":[3,1],"32":[4,3],"33":[22,9]},"inputSourceMap":{"version":3,"sources":["memory.ts"],"names":["MemoryIndex","storage","name","Map","key","record","data","get","Error","indexValue","indexName","entries","Array","from","sort","a","b","localeCompare","filter","map","value","Symbol","iterator","set","clear","Index","MemoryStorage","version","indices","has","index","Storage"],"mappings":";;;;;;;AAAA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,W;;;;;AAKF,uBAAYC,OAAZ,EAAoCC,IAApC,EAAkD;AAAA;;AAAA;;AAC9C;;AAD8C;;AAAA;;AAAA,2DAFtB,IAAIC,GAAJ,EAEsB;;AAE9C,UAAKF,OAAL,GAAeA,OAAf;AACA,UAAKC,IAAL,GAAYA,IAAZ;AAH8C;AAIjD;;;;;8CACSE,G,EAA8B;AACpC,YAAMC,MAAM,GAAG,KAAKC,IAAL,CAAUC,GAAV,CAAcH,GAAd,CAAf;AACA,YAAI,CAACC,MAAL,EAAa,MAAM,IAAIG,KAAJ,CAAU,WAAV,CAAN;AACb,eAAOH,MAAP;AACH,O;;;;;;;;;;;iDACYI,U,EAAwBC,S,EAAuD;AACxF;AACA,YAAIC,OAAO,GAAGC,KAAK,CAACC,IAAN,CAAW,KAAKP,IAAL,CAAUK,OAAV,EAAX,EAAgCG,IAAhC,CAAqC,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,CAAC,CAAD,CAAD,CAAKE,aAAL,CAAmBD,CAAC,CAAC,CAAD,CAApB,CAAV;AAAA,SAArC,CAAd;;AACA,YAAIN,SAAS,IAAID,UAAjB,EAA6B;AACzBE,UAAAA,OAAO,GAAGA,OAAO,CAACO,MAAR,CACN;AAAA;AAAA,gBAAIb,MAAJ;;AAAA,mBAAgB,qBAASA,MAAM,CAACC,IAAhB,EAAsBI,SAAtB,MAAqCD,UAArD;AAAA,WADM,CAAV;AAGH;;AACD,eAAOE,OAAO,CAACQ,GAAR,CAAY;AAAA;AAAA,cAAIC,KAAJ;;AAAA,iBAAeA,KAAf;AAAA,SAAZ,EAAkCC,MAAM,CAACC,QAAzC,GAAP;AACH,O;;;;;;;;;;;8CACShB,I,EAA+B;AACrC,aAAKA,IAAL,CAAUiB,GAAV,CAAcjB,IAAI,CAACF,GAAnB,EAAwBE,IAAxB;AACA,eAAOA,IAAI,CAACF,GAAZ;AACH,O;;;;;;;;;;;kDACYA,G,EAA4B;AACrC,aAAKE,IAAL,WAAiBF,GAAjB;AACH,O;;;;;;;;;;;kDAC4B;AACzB,aAAKE,IAAL,CAAUkB,KAAV;AACH,O;;;;;;;;;;;EAlCqBC,c;AAqC1B;;;;;;IAIqBC,a;;;;;AAKjB,yBAAYxB,IAAZ,EAA0ByB,OAA1B,EAA2C;AAAA;;AAAA;;AACvC;;AADuC;;AAAA;;AAAA,+DAFP,IAAIxB,GAAJ,EAEO;;AAEvC,WAAKD,IAAL,GAAYA,IAAZ;AACA,WAAKyB,OAAL,GAAeA,OAAf;AAHuC;AAI1C;;;;;iDAC2B;AACxB,eAAO,IAAP;AACH,O;;;;;;;;;;;kDAC4B;AACzB;AACH,O;;;;;;;;;;6BACQzB,I,EAA2B;AAChC,UAAI,KAAK0B,OAAL,CAAaC,GAAb,CAAiB3B,IAAjB,CAAJ,EAA4B;AACxB,eAAO,KAAK0B,OAAL,CAAarB,GAAb,CAAiBL,IAAjB,CAAP;AACH;;AACD,UAAM4B,KAAK,GAAG,IAAI9B,WAAJ,CAAgB,IAAhB,EAAsBE,IAAtB,CAAd;AACA,WAAK0B,OAAL,CAAaL,GAAb,CAAiBrB,IAAjB,EAAuB4B,KAAvB;AACA,aAAOA,KAAP;AACH;;;;EAvBsCC,gB","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages","sourcesContent":["import { Storage, Index } from './storage';\nimport { Record, BasicType } from '../models/record';\nimport { propPath } from '../utils';\n\nclass MemoryIndex extends Index {\n    storage: MemoryStorage;\n    name: string;\n    data: Map<string, Record> = new Map();\n\n    constructor(storage: MemoryStorage, name: string) {\n        super();\n        this.storage = storage;\n        this.name = name;\n    }\n    async get(key: string): Promise<Record> {\n        const record = this.data.get(key);\n        if (!record) throw new Error('not found');\n        return record;\n    }\n    async getAll(indexValue?: BasicType, indexName?: string): Promise<IterableIterator<Record>> {\n        // leveldb keeps entries sorted by key, so we emulate this for compatability\n        let entries = Array.from(this.data.entries()).sort((a, b) => a[0].localeCompare(b[0]));\n        if (indexName && indexValue) {\n            entries = entries.filter(\n                ([, record]) => propPath(record.data, indexName) === indexValue\n            );\n        }\n        return entries.map(([, value]) => value)[Symbol.iterator]();\n    }\n    async put(data: Record): Promise<string> {\n        this.data.set(data.key, data);\n        return data.key;\n    }\n    async delete(key: string): Promise<void> {\n        this.data.delete(key);\n    }\n    async clear(): Promise<void> {\n        this.data.clear();\n    }\n}\n\n/**\n * MemoryStorage is a storage interface compatible with other LevelDB-like storages.\n * It is mostly used for testing. It is not very efficient.\n */\nexport default class MemoryStorage extends Storage {\n    name: string;\n    version: number;\n    indices: Map<string, MemoryIndex> = new Map();\n\n    constructor(name: string, version: number) {\n        super();\n        this.name = name;\n        this.version = version;\n    }\n    async open(): Promise<this> {\n        return this;\n    }\n    async close(): Promise<void> {\n        return;\n    }\n    getIndex(name: string): MemoryIndex {\n        if (this.indices.has(name)) {\n            return this.indices.get(name) as MemoryIndex;\n        }\n        const index = new MemoryIndex(this, name);\n        this.indices.set(name, index);\n        return index;\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fce77f8b5ed0f7b7aaacbe48a61f6b284dd02b35","contentHash":"13b3cd282b01b92862b76f49ee71afdad97e175896268b527ea597f743d696c2"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages/storage.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages/storage.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"2":{"start":{"line":8,"column":50},"end":{"line":8,"column":151}},"3":{"start":{"line":8,"column":92},"end":{"line":8,"column":149}},"4":{"start":{"line":10,"column":12},"end":{"line":12,"column":1}},"5":{"start":{"line":11,"column":2},"end":{"line":11,"column":31}},"6":{"start":{"line":14,"column":0},"end":{"line":14,"column":22}},"7":{"start":{"line":16,"column":14},"end":{"line":18,"column":1}},"8":{"start":{"line":17,"column":2},"end":{"line":17,"column":33}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":26}}},"fnMap":{"0":{"name":"_classCallCheck","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":24}},"loc":{"start":{"line":8,"column":48},"end":{"line":8,"column":153}},"line":8},"1":{"name":"Index","decl":{"start":{"line":10,"column":21},"end":{"line":10,"column":26}},"loc":{"start":{"line":10,"column":29},"end":{"line":12,"column":1}},"line":10},"2":{"name":"Storage","decl":{"start":{"line":16,"column":23},"end":{"line":16,"column":30}},"loc":{"start":{"line":16,"column":33},"end":{"line":18,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":50},"end":{"line":8,"column":151}},"type":"if","locations":[{"start":{"line":8,"column":50},"end":{"line":8,"column":151}},{"start":{"line":8,"column":50},"end":{"line":8,"column":151}}],"line":8}},"s":{"0":1,"1":1,"2":15,"3":0,"4":1,"5":9,"6":1,"7":1,"8":6,"9":1},"f":{"0":15,"1":9,"2":6},"b":{"0":[0,15]},"inputSourceMap":{"version":3,"sources":["storage.ts"],"names":["Index","Storage"],"mappings":";;;;;;;;;IAEsBA,K;;;;;;IAQAC,O","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages","sourcesContent":["import { Record, BasicType } from '../models/record';\n\nexport abstract class Index {\n    abstract async get(key: string): Promise<Record>;\n    abstract async getAll(indexValue?: BasicType, indexName?: string): Promise<IterableIterator<Record>>;\n    abstract async put(data: Record): Promise<string>;\n    abstract delete(key: string): Promise<void>;\n    abstract clear(): Promise<void>;\n}\n\nexport abstract class Storage {\n    abstract async open(): Promise<this>;\n    abstract async close(): Promise<void>;\n    abstract getIndex(name: string): Index;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e46e5bde366b7715f5e17f10b1794929162214b3","contentHash":"7b14e99cb3b9a9416eb8379a62ea1c358e333a27fda5b17a66825dc46ff39285"},"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages/leveldb.ts":{"path":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages/leveldb.ts","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":35}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":53}},"4":{"start":{"line":12,"column":13},"end":{"line":12,"column":32}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":95}},"6":{"start":{"line":16,"column":24},"end":{"line":16,"column":328}},"7":{"start":{"line":16,"column":99},"end":{"line":16,"column":154}},"8":{"start":{"line":16,"column":133},"end":{"line":16,"column":151}},"9":{"start":{"line":16,"column":164},"end":{"line":16,"column":326}},"10":{"start":{"line":16,"column":198},"end":{"line":16,"column":323}},"11":{"start":{"line":16,"column":329},"end":{"line":16,"column":349}},"12":{"start":{"line":18,"column":77},"end":{"line":18,"column":175}},"13":{"start":{"line":18,"column":94},"end":{"line":18,"column":107}},"14":{"start":{"line":18,"column":121},"end":{"line":18,"column":131}},"15":{"start":{"line":18,"column":151},"end":{"line":18,"column":165}},"16":{"start":{"line":18,"column":166},"end":{"line":18,"column":173}},"17":{"start":{"line":18,"column":176},"end":{"line":18,"column":263}},"18":{"start":{"line":18,"column":193},"end":{"line":18,"column":208}},"19":{"start":{"line":18,"column":218},"end":{"line":18,"column":261}},"20":{"start":{"line":20,"column":33},"end":{"line":20,"column":387}},"21":{"start":{"line":20,"column":65},"end":{"line":20,"column":69}},"22":{"start":{"line":20,"column":78},"end":{"line":20,"column":87}},"23":{"start":{"line":20,"column":89},"end":{"line":20,"column":384}},"24":{"start":{"line":20,"column":147},"end":{"line":20,"column":167}},"25":{"start":{"line":20,"column":193},"end":{"line":20,"column":264}},"26":{"start":{"line":20,"column":290},"end":{"line":20,"column":360}},"27":{"start":{"line":20,"column":363},"end":{"line":20,"column":380}},"28":{"start":{"line":22,"column":50},"end":{"line":22,"column":151}},"29":{"start":{"line":22,"column":92},"end":{"line":22,"column":149}},"30":{"start":{"line":24,"column":44},"end":{"line":24,"column":315}},"31":{"start":{"line":24,"column":57},"end":{"line":24,"column":58}},"32":{"start":{"line":24,"column":102},"end":{"line":24,"column":110}},"33":{"start":{"line":24,"column":112},"end":{"line":24,"column":167}},"34":{"start":{"line":24,"column":168},"end":{"line":24,"column":199}},"35":{"start":{"line":24,"column":200},"end":{"line":24,"column":254}},"36":{"start":{"line":24,"column":227},"end":{"line":24,"column":254}},"37":{"start":{"line":24,"column":255},"end":{"line":24,"column":313}},"38":{"start":{"line":26,"column":62},"end":{"line":26,"column":131}},"39":{"start":{"line":26,"column":78},"end":{"line":26,"column":131}},"40":{"start":{"line":26,"column":132},"end":{"line":26,"column":193}},"41":{"start":{"line":26,"column":149},"end":{"line":26,"column":193}},"42":{"start":{"line":26,"column":194},"end":{"line":26,"column":213}},"43":{"start":{"line":28,"column":50},"end":{"line":28,"column":138}},"44":{"start":{"line":28,"column":124},"end":{"line":28,"column":136}},"45":{"start":{"line":28,"column":139},"end":{"line":28,"column":175}},"46":{"start":{"line":30,"column":30},"end":{"line":30,"column":176}},"47":{"start":{"line":30,"column":126},"end":{"line":30,"column":173}},"48":{"start":{"line":30,"column":177},"end":{"line":30,"column":203}},"49":{"start":{"line":32,"column":40},"end":{"line":32,"column":151}},"50":{"start":{"line":32,"column":63},"end":{"line":32,"column":149}},"51":{"start":{"line":32,"column":152},"end":{"line":32,"column":164}},"52":{"start":{"line":34,"column":43},"end":{"line":34,"column":182}},"53":{"start":{"line":34,"column":106},"end":{"line":34,"column":180}},"54":{"start":{"line":34,"column":183},"end":{"line":34,"column":328}},"55":{"start":{"line":34,"column":329},"end":{"line":34,"column":383}},"56":{"start":{"line":34,"column":345},"end":{"line":34,"column":383}},"57":{"start":{"line":36,"column":33},"end":{"line":36,"column":138}},"58":{"start":{"line":36,"column":109},"end":{"line":36,"column":125}},"59":{"start":{"line":36,"column":126},"end":{"line":36,"column":135}},"60":{"start":{"line":36,"column":139},"end":{"line":36,"column":168}},"61":{"start":{"line":38,"column":44},"end":{"line":38,"column":195}},"62":{"start":{"line":38,"column":62},"end":{"line":38,"column":166}},"63":{"start":{"line":38,"column":176},"end":{"line":38,"column":193}},"64":{"start":{"line":38,"column":196},"end":{"line":38,"column":207}},"65":{"start":{"line":42,"column":0},"end":{"line":152,"column":17}},"66":{"start":{"line":43,"column":2},"end":{"line":43,"column":34}},"67":{"start":{"line":48,"column":4},"end":{"line":48,"column":40}},"68":{"start":{"line":50,"column":4},"end":{"line":50,"column":87}},"69":{"start":{"line":52,"column":4},"end":{"line":52,"column":70}},"70":{"start":{"line":54,"column":4},"end":{"line":54,"column":67}},"71":{"start":{"line":56,"column":4},"end":{"line":56,"column":65}},"72":{"start":{"line":58,"column":4},"end":{"line":58,"column":28}},"73":{"start":{"line":59,"column":4},"end":{"line":59,"column":22}},"74":{"start":{"line":60,"column":4},"end":{"line":62,"column":7}},"75":{"start":{"line":63,"column":4},"end":{"line":63,"column":17}},"76":{"start":{"line":66,"column":2},"end":{"line":149,"column":6}},"77":{"start":{"line":69,"column":17},"end":{"line":73,"column":8}},"78":{"start":{"line":70,"column":21},"end":{"line":70,"column":43}},"79":{"start":{"line":71,"column":8},"end":{"line":71,"column":50}},"80":{"start":{"line":71,"column":21},"end":{"line":71,"column":50}},"81":{"start":{"line":72,"column":8},"end":{"line":72,"column":22}},"82":{"start":{"line":76,"column":8},"end":{"line":76,"column":43}},"83":{"start":{"line":79,"column":6},"end":{"line":79,"column":17}},"84":{"start":{"line":84,"column":20},"end":{"line":101,"column":8}},"85":{"start":{"line":85,"column":21},"end":{"line":85,"column":25}},"86":{"start":{"line":87,"column":8},"end":{"line":100,"column":11}},"87":{"start":{"line":88,"column":24},"end":{"line":88,"column":26}},"88":{"start":{"line":90,"column":10},"end":{"line":99,"column":13}},"89":{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},"90":{"start":{"line":92,"column":30},"end":{"line":92,"column":78}},"91":{"start":{"line":93,"column":14},"end":{"line":93,"column":64}},"92":{"start":{"line":93,"column":57},"end":{"line":93,"column":64}},"93":{"start":{"line":96,"column":12},"end":{"line":96,"column":37}},"94":{"start":{"line":98,"column":12},"end":{"line":98,"column":48}},"95":{"start":{"line":104,"column":8},"end":{"line":104,"column":46}},"96":{"start":{"line":107,"column":6},"end":{"line":107,"column":20}},"97":{"start":{"line":112,"column":17},"end":{"line":115,"column":8}},"98":{"start":{"line":113,"column":8},"end":{"line":113,"column":42}},"99":{"start":{"line":114,"column":8},"end":{"line":114,"column":24}},"100":{"start":{"line":118,"column":8},"end":{"line":118,"column":43}},"101":{"start":{"line":121,"column":6},"end":{"line":121,"column":17}},"102":{"start":{"line":126,"column":21},"end":{"line":128,"column":8}},"103":{"start":{"line":127,"column":8},"end":{"line":127,"column":31}},"104":{"start":{"line":131,"column":8},"end":{"line":131,"column":47}},"105":{"start":{"line":134,"column":6},"end":{"line":134,"column":21}},"106":{"start":{"line":139,"column":19},"end":{"line":141,"column":8}},"107":{"start":{"line":140,"column":8},"end":{"line":140,"column":61}},"108":{"start":{"line":144,"column":8},"end":{"line":144,"column":45}},"109":{"start":{"line":147,"column":6},"end":{"line":147,"column":19}},"110":{"start":{"line":151,"column":2},"end":{"line":151,"column":22}},"111":{"start":{"line":160,"column":0},"end":{"line":226,"column":19}},"112":{"start":{"line":161,"column":2},"end":{"line":161,"column":38}},"113":{"start":{"line":166,"column":4},"end":{"line":166,"column":42}},"114":{"start":{"line":168,"column":4},"end":{"line":168,"column":90}},"115":{"start":{"line":170,"column":4},"end":{"line":170,"column":68}},"116":{"start":{"line":172,"column":4},"end":{"line":172,"column":71}},"117":{"start":{"line":174,"column":4},"end":{"line":174,"column":74}},"118":{"start":{"line":176,"column":4},"end":{"line":176,"column":66}},"119":{"start":{"line":178,"column":4},"end":{"line":178,"column":23}},"120":{"start":{"line":179,"column":4},"end":{"line":179,"column":29}},"121":{"start":{"line":180,"column":4},"end":{"line":180,"column":18}},"122":{"start":{"line":183,"column":2},"end":{"line":223,"column":6}},"123":{"start":{"line":186,"column":18},"end":{"line":188,"column":8}},"124":{"start":{"line":187,"column":8},"end":{"line":187,"column":20}},"125":{"start":{"line":191,"column":8},"end":{"line":191,"column":44}},"126":{"start":{"line":194,"column":6},"end":{"line":194,"column":18}},"127":{"start":{"line":199,"column":19},"end":{"line":204,"column":8}},"128":{"start":{"line":207,"column":8},"end":{"line":207,"column":45}},"129":{"start":{"line":210,"column":6},"end":{"line":210,"column":19}},"130":{"start":{"line":215,"column":6},"end":{"line":217,"column":7}},"131":{"start":{"line":216,"column":8},"end":{"line":216,"column":38}},"132":{"start":{"line":219,"column":18},"end":{"line":219,"column":46}},"133":{"start":{"line":220,"column":6},"end":{"line":220,"column":36}},"134":{"start":{"line":221,"column":6},"end":{"line":221,"column":19}},"135":{"start":{"line":225,"column":2},"end":{"line":225,"column":24}},"136":{"start":{"line":228,"column":0},"end":{"line":228,"column":36}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":97}},"line":14},"1":{"name":"_typeof","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":16}},"loc":{"start":{"line":16,"column":22},"end":{"line":16,"column":351}},"line":16},"2":{"name":"_typeof","decl":{"start":{"line":16,"column":118},"end":{"line":16,"column":125}},"loc":{"start":{"line":16,"column":131},"end":{"line":16,"column":153}},"line":16},"3":{"name":"_typeof","decl":{"start":{"line":16,"column":183},"end":{"line":16,"column":190}},"loc":{"start":{"line":16,"column":196},"end":{"line":16,"column":325}},"line":16},"4":{"name":"asyncGeneratorStep","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":27}},"loc":{"start":{"line":18,"column":75},"end":{"line":18,"column":265}},"line":18},"5":{"name":"_asyncToGenerator","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":26}},"loc":{"start":{"line":20,"column":31},"end":{"line":20,"column":389}},"line":20},"6":{"name":"(anonymous_6)","decl":{"start":{"line":20,"column":40},"end":{"line":20,"column":41}},"loc":{"start":{"line":20,"column":52},"end":{"line":20,"column":386}},"line":20},"7":{"name":"(anonymous_7)","decl":{"start":{"line":20,"column":108},"end":{"line":20,"column":109}},"loc":{"start":{"line":20,"column":135},"end":{"line":20,"column":382}},"line":20},"8":{"name":"_next","decl":{"start":{"line":20,"column":178},"end":{"line":20,"column":183}},"loc":{"start":{"line":20,"column":191},"end":{"line":20,"column":266}},"line":20},"9":{"name":"_throw","decl":{"start":{"line":20,"column":276},"end":{"line":20,"column":282}},"loc":{"start":{"line":20,"column":288},"end":{"line":20,"column":362}},"line":20},"10":{"name":"_classCallCheck","decl":{"start":{"line":22,"column":9},"end":{"line":22,"column":24}},"loc":{"start":{"line":22,"column":48},"end":{"line":22,"column":153}},"line":22},"11":{"name":"_defineProperties","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":26}},"loc":{"start":{"line":24,"column":42},"end":{"line":24,"column":317}},"line":24},"12":{"name":"_createClass","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":21}},"loc":{"start":{"line":26,"column":60},"end":{"line":26,"column":215}},"line":26},"13":{"name":"_possibleConstructorReturn","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":35}},"loc":{"start":{"line":28,"column":48},"end":{"line":28,"column":177}},"line":28},"14":{"name":"_getPrototypeOf","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":24}},"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":205}},"line":30},"15":{"name":"_getPrototypeOf","decl":{"start":{"line":30,"column":105},"end":{"line":30,"column":120}},"loc":{"start":{"line":30,"column":124},"end":{"line":30,"column":175}},"line":30},"16":{"name":"_assertThisInitialized","decl":{"start":{"line":32,"column":9},"end":{"line":32,"column":31}},"loc":{"start":{"line":32,"column":38},"end":{"line":32,"column":166}},"line":32},"17":{"name":"_inherits","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":18}},"loc":{"start":{"line":34,"column":41},"end":{"line":34,"column":385}},"line":34},"18":{"name":"_setPrototypeOf","decl":{"start":{"line":36,"column":9},"end":{"line":36,"column":24}},"loc":{"start":{"line":36,"column":31},"end":{"line":36,"column":170}},"line":36},"19":{"name":"_setPrototypeOf","decl":{"start":{"line":36,"column":85},"end":{"line":36,"column":100}},"loc":{"start":{"line":36,"column":107},"end":{"line":36,"column":137}},"line":36},"20":{"name":"_defineProperty","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":24}},"loc":{"start":{"line":38,"column":42},"end":{"line":38,"column":209}},"line":38},"21":{"name":"(anonymous_21)","decl":{"start":{"line":42,"column":0},"end":{"line":42,"column":1}},"loc":{"start":{"line":42,"column":18},"end":{"line":152,"column":1}},"line":42},"22":{"name":"LevelDbIndex","decl":{"start":{"line":45,"column":11},"end":{"line":45,"column":23}},"loc":{"start":{"line":45,"column":39},"end":{"line":64,"column":3}},"line":45},"23":{"name":"(anonymous_23)","decl":{"start":{"line":68,"column":11},"end":{"line":68,"column":12}},"loc":{"start":{"line":68,"column":23},"end":{"line":80,"column":5}},"line":68},"24":{"name":"(anonymous_24)","decl":{"start":{"line":69,"column":35},"end":{"line":69,"column":36}},"loc":{"start":{"line":69,"column":51},"end":{"line":73,"column":7}},"line":69},"25":{"name":"get","decl":{"start":{"line":75,"column":15},"end":{"line":75,"column":18}},"loc":{"start":{"line":75,"column":23},"end":{"line":77,"column":7}},"line":75},"26":{"name":"(anonymous_26)","decl":{"start":{"line":83,"column":11},"end":{"line":83,"column":12}},"loc":{"start":{"line":83,"column":23},"end":{"line":108,"column":5}},"line":83},"27":{"name":"(anonymous_27)","decl":{"start":{"line":84,"column":38},"end":{"line":84,"column":39}},"loc":{"start":{"line":84,"column":72},"end":{"line":101,"column":7}},"line":84},"28":{"name":"(anonymous_28)","decl":{"start":{"line":87,"column":27},"end":{"line":87,"column":28}},"loc":{"start":{"line":87,"column":54},"end":{"line":100,"column":9}},"line":87},"29":{"name":"(anonymous_29)","decl":{"start":{"line":90,"column":50},"end":{"line":90,"column":51}},"loc":{"start":{"line":90,"column":66},"end":{"line":97,"column":11}},"line":90},"30":{"name":"(anonymous_30)","decl":{"start":{"line":97,"column":43},"end":{"line":97,"column":44}},"loc":{"start":{"line":97,"column":55},"end":{"line":99,"column":11}},"line":97},"31":{"name":"getAll","decl":{"start":{"line":103,"column":15},"end":{"line":103,"column":21}},"loc":{"start":{"line":103,"column":32},"end":{"line":105,"column":7}},"line":103},"32":{"name":"(anonymous_32)","decl":{"start":{"line":111,"column":11},"end":{"line":111,"column":12}},"loc":{"start":{"line":111,"column":23},"end":{"line":122,"column":5}},"line":111},"33":{"name":"(anonymous_33)","decl":{"start":{"line":112,"column":35},"end":{"line":112,"column":36}},"loc":{"start":{"line":112,"column":52},"end":{"line":115,"column":7}},"line":112},"34":{"name":"put","decl":{"start":{"line":117,"column":15},"end":{"line":117,"column":18}},"loc":{"start":{"line":117,"column":24},"end":{"line":119,"column":7}},"line":117},"35":{"name":"(anonymous_35)","decl":{"start":{"line":125,"column":11},"end":{"line":125,"column":12}},"loc":{"start":{"line":125,"column":23},"end":{"line":135,"column":5}},"line":125},"36":{"name":"(anonymous_36)","decl":{"start":{"line":126,"column":39},"end":{"line":126,"column":40}},"loc":{"start":{"line":126,"column":55},"end":{"line":128,"column":7}},"line":126},"37":{"name":"_delete","decl":{"start":{"line":130,"column":15},"end":{"line":130,"column":22}},"loc":{"start":{"line":130,"column":28},"end":{"line":132,"column":7}},"line":130},"38":{"name":"(anonymous_38)","decl":{"start":{"line":138,"column":11},"end":{"line":138,"column":12}},"loc":{"start":{"line":138,"column":23},"end":{"line":148,"column":5}},"line":138},"39":{"name":"(anonymous_39)","decl":{"start":{"line":139,"column":37},"end":{"line":139,"column":38}},"loc":{"start":{"line":139,"column":50},"end":{"line":141,"column":7}},"line":139},"40":{"name":"clear","decl":{"start":{"line":143,"column":15},"end":{"line":143,"column":20}},"loc":{"start":{"line":143,"column":23},"end":{"line":145,"column":7}},"line":143},"41":{"name":"(anonymous_41)","decl":{"start":{"line":160,"column":0},"end":{"line":160,"column":1}},"loc":{"start":{"line":160,"column":20},"end":{"line":226,"column":1}},"line":160},"42":{"name":"LevelDbStorage","decl":{"start":{"line":163,"column":11},"end":{"line":163,"column":25}},"loc":{"start":{"line":163,"column":41},"end":{"line":181,"column":3}},"line":163},"43":{"name":"(anonymous_43)","decl":{"start":{"line":185,"column":11},"end":{"line":185,"column":12}},"loc":{"start":{"line":185,"column":23},"end":{"line":195,"column":5}},"line":185},"44":{"name":"(anonymous_44)","decl":{"start":{"line":186,"column":36},"end":{"line":186,"column":37}},"loc":{"start":{"line":186,"column":49},"end":{"line":188,"column":7}},"line":186},"45":{"name":"open","decl":{"start":{"line":190,"column":15},"end":{"line":190,"column":19}},"loc":{"start":{"line":190,"column":22},"end":{"line":192,"column":7}},"line":190},"46":{"name":"(anonymous_46)","decl":{"start":{"line":198,"column":11},"end":{"line":198,"column":12}},"loc":{"start":{"line":198,"column":23},"end":{"line":211,"column":5}},"line":198},"47":{"name":"(anonymous_47)","decl":{"start":{"line":199,"column":37},"end":{"line":199,"column":38}},"loc":{"start":{"line":199,"column":50},"end":{"line":204,"column":7}},"line":199},"48":{"name":"close","decl":{"start":{"line":206,"column":15},"end":{"line":206,"column":20}},"loc":{"start":{"line":206,"column":23},"end":{"line":208,"column":7}},"line":206},"49":{"name":"getIndex","decl":{"start":{"line":214,"column":20},"end":{"line":214,"column":28}},"loc":{"start":{"line":214,"column":35},"end":{"line":222,"column":5}},"line":214}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":94}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":94}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14},"2":{"loc":{"start":{"line":16,"column":24},"end":{"line":16,"column":328}},"type":"if","locations":[{"start":{"line":16,"column":24},"end":{"line":16,"column":328}},{"start":{"line":16,"column":24},"end":{"line":16,"column":328}}],"line":16},"3":{"loc":{"start":{"line":16,"column":28},"end":{"line":16,"column":95}},"type":"binary-expr","locations":[{"start":{"line":16,"column":28},"end":{"line":16,"column":56}},{"start":{"line":16,"column":60},"end":{"line":16,"column":95}}],"line":16},"4":{"loc":{"start":{"line":16,"column":205},"end":{"line":16,"column":322}},"type":"cond-expr","locations":[{"start":{"line":16,"column":301},"end":{"line":16,"column":309}},{"start":{"line":16,"column":312},"end":{"line":16,"column":322}}],"line":16},"5":{"loc":{"start":{"line":16,"column":205},"end":{"line":16,"column":298}},"type":"binary-expr","locations":[{"start":{"line":16,"column":205},"end":{"line":16,"column":208}},{"start":{"line":16,"column":212},"end":{"line":16,"column":240}},{"start":{"line":16,"column":244},"end":{"line":16,"column":270}},{"start":{"line":16,"column":274},"end":{"line":16,"column":298}}],"line":16},"6":{"loc":{"start":{"line":18,"column":176},"end":{"line":18,"column":263}},"type":"if","locations":[{"start":{"line":18,"column":176},"end":{"line":18,"column":263}},{"start":{"line":18,"column":176},"end":{"line":18,"column":263}}],"line":18},"7":{"loc":{"start":{"line":22,"column":50},"end":{"line":22,"column":151}},"type":"if","locations":[{"start":{"line":22,"column":50},"end":{"line":22,"column":151}},{"start":{"line":22,"column":50},"end":{"line":22,"column":151}}],"line":22},"8":{"loc":{"start":{"line":24,"column":136},"end":{"line":24,"column":166}},"type":"binary-expr","locations":[{"start":{"line":24,"column":136},"end":{"line":24,"column":157}},{"start":{"line":24,"column":161},"end":{"line":24,"column":166}}],"line":24},"9":{"loc":{"start":{"line":24,"column":200},"end":{"line":24,"column":254}},"type":"if","locations":[{"start":{"line":24,"column":200},"end":{"line":24,"column":254}},{"start":{"line":24,"column":200},"end":{"line":24,"column":254}}],"line":24},"10":{"loc":{"start":{"line":26,"column":62},"end":{"line":26,"column":131}},"type":"if","locations":[{"start":{"line":26,"column":62},"end":{"line":26,"column":131}},{"start":{"line":26,"column":62},"end":{"line":26,"column":131}}],"line":26},"11":{"loc":{"start":{"line":26,"column":132},"end":{"line":26,"column":193}},"type":"if","locations":[{"start":{"line":26,"column":132},"end":{"line":26,"column":193}},{"start":{"line":26,"column":132},"end":{"line":26,"column":193}}],"line":26},"12":{"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":138}},"type":"if","locations":[{"start":{"line":28,"column":50},"end":{"line":28,"column":138}},{"start":{"line":28,"column":50},"end":{"line":28,"column":138}}],"line":28},"13":{"loc":{"start":{"line":28,"column":54},"end":{"line":28,"column":120}},"type":"binary-expr","locations":[{"start":{"line":28,"column":54},"end":{"line":28,"column":58}},{"start":{"line":28,"column":63},"end":{"line":28,"column":89}},{"start":{"line":28,"column":93},"end":{"line":28,"column":119}}],"line":28},"14":{"loc":{"start":{"line":30,"column":48},"end":{"line":30,"column":175}},"type":"cond-expr","locations":[{"start":{"line":30,"column":72},"end":{"line":30,"column":93}},{"start":{"line":30,"column":96},"end":{"line":30,"column":175}}],"line":30},"15":{"loc":{"start":{"line":30,"column":133},"end":{"line":30,"column":172}},"type":"binary-expr","locations":[{"start":{"line":30,"column":133},"end":{"line":30,"column":144}},{"start":{"line":30,"column":148},"end":{"line":30,"column":172}}],"line":30},"16":{"loc":{"start":{"line":32,"column":40},"end":{"line":32,"column":151}},"type":"if","locations":[{"start":{"line":32,"column":40},"end":{"line":32,"column":151}},{"start":{"line":32,"column":40},"end":{"line":32,"column":151}}],"line":32},"17":{"loc":{"start":{"line":34,"column":43},"end":{"line":34,"column":182}},"type":"if","locations":[{"start":{"line":34,"column":43},"end":{"line":34,"column":182}},{"start":{"line":34,"column":43},"end":{"line":34,"column":182}}],"line":34},"18":{"loc":{"start":{"line":34,"column":47},"end":{"line":34,"column":102}},"type":"binary-expr","locations":[{"start":{"line":34,"column":47},"end":{"line":34,"column":79}},{"start":{"line":34,"column":83},"end":{"line":34,"column":102}}],"line":34},"19":{"loc":{"start":{"line":34,"column":218},"end":{"line":34,"column":252}},"type":"binary-expr","locations":[{"start":{"line":34,"column":218},"end":{"line":34,"column":228}},{"start":{"line":34,"column":232},"end":{"line":34,"column":252}}],"line":34},"20":{"loc":{"start":{"line":34,"column":329},"end":{"line":34,"column":383}},"type":"if","locations":[{"start":{"line":34,"column":329},"end":{"line":34,"column":383}},{"start":{"line":34,"column":329},"end":{"line":34,"column":383}}],"line":34},"21":{"loc":{"start":{"line":36,"column":51},"end":{"line":36,"column":137}},"type":"binary-expr","locations":[{"start":{"line":36,"column":51},"end":{"line":36,"column":72}},{"start":{"line":36,"column":76},"end":{"line":36,"column":137}}],"line":36},"22":{"loc":{"start":{"line":38,"column":44},"end":{"line":38,"column":195}},"type":"if","locations":[{"start":{"line":38,"column":44},"end":{"line":38,"column":195}},{"start":{"line":38,"column":44},"end":{"line":38,"column":195}}],"line":38},"23":{"loc":{"start":{"line":71,"column":8},"end":{"line":71,"column":50}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":50}},{"start":{"line":71,"column":8},"end":{"line":71,"column":50}}],"line":71},"24":{"loc":{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},{"start":{"line":91,"column":12},"end":{"line":94,"column":13}}],"line":91},"25":{"loc":{"start":{"line":91,"column":16},"end":{"line":91,"column":39}},"type":"binary-expr","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":25}},{"start":{"line":91,"column":29},"end":{"line":91,"column":39}}],"line":91},"26":{"loc":{"start":{"line":93,"column":14},"end":{"line":93,"column":64}},"type":"if","locations":[{"start":{"line":93,"column":14},"end":{"line":93,"column":64}},{"start":{"line":93,"column":14},"end":{"line":93,"column":64}}],"line":93},"27":{"loc":{"start":{"line":93,"column":18},"end":{"line":93,"column":55}},"type":"binary-expr","locations":[{"start":{"line":93,"column":18},"end":{"line":93,"column":27}},{"start":{"line":93,"column":31},"end":{"line":93,"column":55}}],"line":93},"28":{"loc":{"start":{"line":215,"column":6},"end":{"line":217,"column":7}},"type":"if","locations":[{"start":{"line":215,"column":6},"end":{"line":217,"column":7}},{"start":{"line":215,"column":6},"end":{"line":217,"column":7}}],"line":215}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":7,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":2,"31":2,"32":8,"33":8,"34":8,"35":8,"36":8,"37":8,"38":2,"39":2,"40":2,"41":0,"42":2,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":2,"53":0,"54":2,"55":2,"56":2,"57":1,"58":0,"59":0,"60":1,"61":0,"62":0,"63":0,"64":0,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":1,"77":1,"78":0,"79":0,"80":0,"81":0,"82":0,"83":1,"84":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":1,"98":0,"99":0,"100":0,"101":1,"102":1,"103":0,"104":0,"105":1,"106":1,"107":0,"108":0,"109":1,"110":1,"111":1,"112":1,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":1,"123":1,"124":0,"125":0,"126":1,"127":1,"128":0,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":7,"6":0,"7":0,"8":0,"9":0,"10":0,"11":2,"12":2,"13":0,"14":0,"15":0,"16":0,"17":2,"18":1,"19":0,"20":0,"21":1,"22":0,"23":1,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":1,"36":0,"37":0,"38":1,"39":0,"40":0,"41":1,"42":0,"43":1,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0},"b":{"0":[0,1],"1":[1,1],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0,0],"6":[0,0],"7":[0,0],"8":[8,8],"9":[8,0],"10":[2,0],"11":[0,2],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,2],"18":[2,0],"19":[2,2],"20":[2,0],"21":[1,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"inputSourceMap":{"version":3,"sources":["leveldb.ts"],"names":["LevelDbIndex","storage","name","db","valueEncoding","key","record","get","Error","indexValue","indexName","Promise","resolve","reject","results","createReadStream","on","data","propValue","value","push","Symbol","iterator","put","del","Index","LevelDbStorage","version","Map","indices","has","index","set","Storage"],"mappings":";;;;;;;AAAA;;AAGA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,Y;;;;;AAKF,wBAAYC,OAAZ,EAAqCC,IAArC,EAAmD;AAAA;;AAAA;;AAC/C;;AAD+C;;AAAA;;AAAA;;AAE/C,UAAKD,OAAL,GAAeA,OAAf;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKC,EAAL,GAAU,0CAAkB,MAAKF,OAAL,CAAaC,IAA/B,cAAuC,MAAKA,IAA5C,UAAuD;AAAEE,MAAAA,aAAa,EAAE;AAAjB,KAAvD,CAAV;AAJ+C;AAKlD;;;;;8CACSC,G,EAA8B;AACpC,YAAMC,MAAM,SAAS,KAAKH,EAAL,CAAQI,GAAR,CAAYF,GAAZ,CAArB;AACA,YAAI,CAACC,MAAL,EAAa,MAAM,IAAIE,KAAJ,CAAU,WAAV,CAAN;AACb,eAAOF,MAAP;AACH,O;;;;;;;;;;;iDACYG,U,EAAwBC,S,EAAuD;AAAA;;AACxF,eAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,cAAMC,OAAiB,GAAG,EAA1B;;AACA,UAAA,MAAI,CAACX,EAAL,CAAQY,gBAAR,GACKC,EADL,CACQ,MADR,EACgB,UAACC,IAAD,EAAU;AAClB,gBAAIP,SAAS,IAAID,UAAjB,EAA6B;AACzB,kBAAMS,SAAS,GAAG,qBAASD,IAAI,CAACE,KAAL,CAAWF,IAApB,EAA0BP,SAA1B,CAAlB;AACA,kBAAIQ,SAAS,IAAIA,SAAS,KAAKT,UAA/B,EAA2C;AAC9C;;AACDK,YAAAA,OAAO,CAACM,IAAR,CAAaH,IAAI,CAACE,KAAlB;AACH,WAPL,EAQKH,EARL,CAQQ,OARR,EAQiBH,MARjB,EASKG,EATL,CASQ,KATR,EASe,YAAM;AACbJ,YAAAA,OAAO,CAACE,OAAO,CAACO,MAAM,CAACC,QAAR,CAAP,EAAD,CAAP;AACH,WAXL;AAYH,SAdM,CAAP;AAeH,O;;;;;;;;;;;8CACSL,I,EAA+B;AACrC,cAAM,KAAKd,EAAL,CAAQoB,GAAR,CAAYN,IAAI,CAACZ,GAAjB,EAAsBY,IAAtB,CAAN;AACA,eAAOA,IAAI,CAACZ,GAAZ;AACH,O;;;;;;;;;;;kDACYA,G,EAA4B;AACrC,cAAM,KAAKF,EAAL,CAAQqB,GAAR,CAAYnB,GAAZ,CAAN;AACH,O;;;;;;;;;;;kDAC4B;AACzB,cAAM,IAAIG,KAAJ,CAAU,mCAAV,CAAN;AACH,O;;;;;;;;;;;EA1CsBiB,c;AA6C3B;;;;;IAGqBC,c;;;;;AAMjB,0BAAYxB,IAAZ,EAA0ByB,OAA1B,EAA2C;AAAA;;AAAA;;AACvC;;AADuC;;AAAA;;AAAA,+DAHN,IAAIC,GAAJ,EAGM;;AAAA;;AAEvC,WAAK1B,IAAL,GAAYA,IAAZ;AACA,WAAKyB,OAAL,GAAeA,OAAf;AAHuC;AAI1C;;;;;iDAC2B;AACxB,eAAO,IAAP;AACH,O;;;;;;;;;;;kDAC4B;AACzB;;;AAGA;AACH,O;;;;;;;;;;6BACQzB,I,EAA4B;AACjC,UAAI,KAAK2B,OAAL,CAAaC,GAAb,CAAiB5B,IAAjB,CAAJ,EAA4B;AACxB,eAAO,KAAK2B,OAAL,CAAatB,GAAb,CAAiBL,IAAjB,CAAP;AACH;;AACD,UAAM6B,KAAK,GAAG,IAAI/B,YAAJ,CAAiB,IAAjB,EAAuBE,IAAvB,CAAd;AACA,WAAK2B,OAAL,CAAaG,GAAb,CAAiB9B,IAAjB,EAAuB6B,KAAvB;AACA,aAAOA,KAAP;AACH;;;;EA3BuCE,gB","sourceRoot":"/Users/paulgrau/projects/aergo/herajs/packages/wallet/src/storages","sourcesContent":["import { Storage, Index } from './storage';\nimport { Record, BasicType } from '../models/record';\nimport { LevelUp } from 'levelup';\nimport level from 'level';\nimport { propPath } from '../utils';\n\nclass LevelDbIndex extends Index {\n    storage: LevelDbStorage;\n    name: string;\n    db: LevelUp;\n\n    constructor(storage: LevelDbStorage, name: string) {\n        super();\n        this.storage = storage;\n        this.name = name;\n        this.db = level(`./herajs-${this.storage.name}-${this.name}.db`, { valueEncoding: 'json' });\n    }\n    async get(key: string): Promise<Record> {\n        const record = await this.db.get(key);\n        if (!record) throw new Error('not found');\n        return record;\n    }\n    async getAll(indexValue?: BasicType, indexName?: string): Promise<IterableIterator<Record>> {\n        return new Promise((resolve, reject) => {\n            const results: Record[] = [];\n            this.db.createReadStream()\n                .on('data', (data) => {\n                    if (indexName && indexValue) {\n                        const propValue = propPath(data.value.data, indexName);\n                        if (propValue && propValue !== indexValue) return;\n                    }\n                    results.push(data.value as Record);\n                })\n                .on('error', reject)\n                .on('end', () => {\n                    resolve(results[Symbol.iterator]());\n                });\n        });\n    }\n    async put(data: Record): Promise<string> {\n        await this.db.put(data.key, data);\n        return data.key;\n    }\n    async delete(key: string): Promise<void> {\n        await this.db.del(key);\n    }\n    async clear(): Promise<void> {\n        throw new Error('clear is not supported on leveldb');\n    }\n}\n\n/**\n * LevelDbStorage can be used to get an IndexedDb-like storage in Node.js\n */\nexport default class LevelDbStorage extends Storage {\n    name: string;\n    version: number;\n    indices: Map<string, LevelDbIndex> = new Map();\n    db?: LevelUp;\n\n    constructor(name: string, version: number) {\n        super();\n        this.name = name;\n        this.version = version;\n    }\n    async open(): Promise<this> {\n        return this;\n    }\n    async close(): Promise<void> {\n        /*for (let index of this.indices.values()) {\n            index.close();\n        }*/\n        //this.db && await this.db.close();\n    }\n    getIndex(name: string): LevelDbIndex {\n        if (this.indices.has(name)) {\n            return this.indices.get(name) as LevelDbIndex;\n        }\n        const index = new LevelDbIndex(this, name);\n        this.indices.set(name, index);\n        return index;\n    }\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"86c8f90f828c0104f2f6fc3e54468c6aec37c672","contentHash":"b9e59a2aff7be558dcb3a922c78e0ba2acd8c708dbbfe1b0af057f082607cca7"}}